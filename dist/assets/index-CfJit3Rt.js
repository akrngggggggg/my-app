(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function gf(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Th={exports:{}},ua={},Lh={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ug;function KE(){if(ug)return Ue;ug=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),S=Symbol.iterator;function T(V){return V===null||typeof V!="object"?null:(V=S&&V[S]||V["@@iterator"],typeof V=="function"?V:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,j={};function N(V,G,re){this.props=V,this.context=G,this.refs=j,this.updater=re||R}N.prototype.isReactComponent={},N.prototype.setState=function(V,G){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,G,"setState")},N.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function Y(){}Y.prototype=N.prototype;function Z(V,G,re){this.props=V,this.context=G,this.refs=j,this.updater=re||R}var le=Z.prototype=new Y;le.constructor=Z,M(le,N.prototype),le.isPureReactComponent=!0;var K=Array.isArray,H=Object.prototype.hasOwnProperty,q={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function I(V,G,re){var ge,$={},Ce=null,Ie=null;if(G!=null)for(ge in G.ref!==void 0&&(Ie=G.ref),G.key!==void 0&&(Ce=""+G.key),G)H.call(G,ge)&&!k.hasOwnProperty(ge)&&($[ge]=G[ge]);var de=arguments.length-2;if(de===1)$.children=re;else if(1<de){for(var te=Array(de),ee=0;ee<de;ee++)te[ee]=arguments[ee+2];$.children=te}if(V&&V.defaultProps)for(ge in de=V.defaultProps,de)$[ge]===void 0&&($[ge]=de[ge]);return{$$typeof:r,type:V,key:Ce,ref:Ie,props:$,_owner:q.current}}function C(V,G){return{$$typeof:r,type:V.type,key:G,ref:V.ref,props:V.props,_owner:V._owner}}function A(V){return typeof V=="object"&&V!==null&&V.$$typeof===r}function D(V){var G={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(re){return G[re]})}var b=/\/+/g;function P(V,G){return typeof V=="object"&&V!==null&&V.key!=null?D(""+V.key):G.toString(36)}function pe(V,G,re,ge,$){var Ce=typeof V;(Ce==="undefined"||Ce==="boolean")&&(V=null);var Ie=!1;if(V===null)Ie=!0;else switch(Ce){case"string":case"number":Ie=!0;break;case"object":switch(V.$$typeof){case r:case e:Ie=!0}}if(Ie)return Ie=V,$=$(Ie),V=ge===""?"."+P(Ie,0):ge,K($)?(re="",V!=null&&(re=V.replace(b,"$&/")+"/"),pe($,G,re,"",function(ee){return ee})):$!=null&&(A($)&&($=C($,re+(!$.key||Ie&&Ie.key===$.key?"":(""+$.key).replace(b,"$&/")+"/")+V)),G.push($)),1;if(Ie=0,ge=ge===""?".":ge+":",K(V))for(var de=0;de<V.length;de++){Ce=V[de];var te=ge+P(Ce,de);Ie+=pe(Ce,G,re,te,$)}else if(te=T(V),typeof te=="function")for(V=te.call(V),de=0;!(Ce=V.next()).done;)Ce=Ce.value,te=ge+P(Ce,de++),Ie+=pe(Ce,G,re,te,$);else if(Ce==="object")throw G=String(V),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Ie}function Se(V,G,re){if(V==null)return V;var ge=[],$=0;return pe(V,ge,"","",function(Ce){return G.call(re,Ce,$++)}),ge}function Pe(V){if(V._status===-1){var G=V._result;G=G(),G.then(function(re){(V._status===0||V._status===-1)&&(V._status=1,V._result=re)},function(re){(V._status===0||V._status===-1)&&(V._status=2,V._result=re)}),V._status===-1&&(V._status=0,V._result=G)}if(V._status===1)return V._result.default;throw V._result}var Le={current:null},J={transition:null},he={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:J,ReactCurrentOwner:q};function ie(){throw Error("act(...) is not supported in production builds of React.")}return Ue.Children={map:Se,forEach:function(V,G,re){Se(V,function(){G.apply(this,arguments)},re)},count:function(V){var G=0;return Se(V,function(){G++}),G},toArray:function(V){return Se(V,function(G){return G})||[]},only:function(V){if(!A(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Ue.Component=N,Ue.Fragment=t,Ue.Profiler=o,Ue.PureComponent=Z,Ue.StrictMode=i,Ue.Suspense=g,Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=he,Ue.act=ie,Ue.cloneElement=function(V,G,re){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var ge=M({},V.props),$=V.key,Ce=V.ref,Ie=V._owner;if(G!=null){if(G.ref!==void 0&&(Ce=G.ref,Ie=q.current),G.key!==void 0&&($=""+G.key),V.type&&V.type.defaultProps)var de=V.type.defaultProps;for(te in G)H.call(G,te)&&!k.hasOwnProperty(te)&&(ge[te]=G[te]===void 0&&de!==void 0?de[te]:G[te])}var te=arguments.length-2;if(te===1)ge.children=re;else if(1<te){de=Array(te);for(var ee=0;ee<te;ee++)de[ee]=arguments[ee+2];ge.children=de}return{$$typeof:r,type:V.type,key:$,ref:Ce,props:ge,_owner:Ie}},Ue.createContext=function(V){return V={$$typeof:h,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:l,_context:V},V.Consumer=V},Ue.createElement=I,Ue.createFactory=function(V){var G=I.bind(null,V);return G.type=V,G},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(V){return{$$typeof:d,render:V}},Ue.isValidElement=A,Ue.lazy=function(V){return{$$typeof:E,_payload:{_status:-1,_result:V},_init:Pe}},Ue.memo=function(V,G){return{$$typeof:v,type:V,compare:G===void 0?null:G}},Ue.startTransition=function(V){var G=J.transition;J.transition={};try{V()}finally{J.transition=G}},Ue.unstable_act=ie,Ue.useCallback=function(V,G){return Le.current.useCallback(V,G)},Ue.useContext=function(V){return Le.current.useContext(V)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(V){return Le.current.useDeferredValue(V)},Ue.useEffect=function(V,G){return Le.current.useEffect(V,G)},Ue.useId=function(){return Le.current.useId()},Ue.useImperativeHandle=function(V,G,re){return Le.current.useImperativeHandle(V,G,re)},Ue.useInsertionEffect=function(V,G){return Le.current.useInsertionEffect(V,G)},Ue.useLayoutEffect=function(V,G){return Le.current.useLayoutEffect(V,G)},Ue.useMemo=function(V,G){return Le.current.useMemo(V,G)},Ue.useReducer=function(V,G,re){return Le.current.useReducer(V,G,re)},Ue.useRef=function(V){return Le.current.useRef(V)},Ue.useState=function(V){return Le.current.useState(V)},Ue.useSyncExternalStore=function(V,G,re){return Le.current.useSyncExternalStore(V,G,re)},Ue.useTransition=function(){return Le.current.useTransition()},Ue.version="18.3.1",Ue}var cg;function mf(){return cg||(cg=1,Lh.exports=KE()),Lh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hg;function GE(){if(hg)return ua;hg=1;var r=mf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(d,g,v){var E,S={},T=null,R=null;v!==void 0&&(T=""+v),g.key!==void 0&&(T=""+g.key),g.ref!==void 0&&(R=g.ref);for(E in g)i.call(g,E)&&!l.hasOwnProperty(E)&&(S[E]=g[E]);if(d&&d.defaultProps)for(E in g=d.defaultProps,g)S[E]===void 0&&(S[E]=g[E]);return{$$typeof:e,type:d,key:T,ref:R,props:S,_owner:o.current}}return ua.Fragment=t,ua.jsx=h,ua.jsxs=h,ua}var fg;function QE(){return fg||(fg=1,Th.exports=GE()),Th.exports}var Ae=QE(),y=mf();const ZE=gf(y);var Zl={},Ih={exports:{}},cn={},kh={exports:{}},Ph={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dg;function XE(){return dg||(dg=1,function(r){function e(J,he){var ie=J.length;J.push(he);e:for(;0<ie;){var V=ie-1>>>1,G=J[V];if(0<o(G,he))J[V]=he,J[ie]=G,ie=V;else break e}}function t(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var he=J[0],ie=J.pop();if(ie!==he){J[0]=ie;e:for(var V=0,G=J.length,re=G>>>1;V<re;){var ge=2*(V+1)-1,$=J[ge],Ce=ge+1,Ie=J[Ce];if(0>o($,ie))Ce<G&&0>o(Ie,$)?(J[V]=Ie,J[Ce]=ie,V=Ce):(J[V]=$,J[ge]=ie,V=ge);else if(Ce<G&&0>o(Ie,ie))J[V]=Ie,J[Ce]=ie,V=Ce;else break e}}return he}function o(J,he){var ie=J.sortIndex-he.sortIndex;return ie!==0?ie:J.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,d=h.now();r.unstable_now=function(){return h.now()-d}}var g=[],v=[],E=1,S=null,T=3,R=!1,M=!1,j=!1,N=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function le(J){for(var he=t(v);he!==null;){if(he.callback===null)i(v);else if(he.startTime<=J)i(v),he.sortIndex=he.expirationTime,e(g,he);else break;he=t(v)}}function K(J){if(j=!1,le(J),!M)if(t(g)!==null)M=!0,Pe(H);else{var he=t(v);he!==null&&Le(K,he.startTime-J)}}function H(J,he){M=!1,j&&(j=!1,Y(I),I=-1),R=!0;var ie=T;try{for(le(he),S=t(g);S!==null&&(!(S.expirationTime>he)||J&&!D());){var V=S.callback;if(typeof V=="function"){S.callback=null,T=S.priorityLevel;var G=V(S.expirationTime<=he);he=r.unstable_now(),typeof G=="function"?S.callback=G:S===t(g)&&i(g),le(he)}else i(g);S=t(g)}if(S!==null)var re=!0;else{var ge=t(v);ge!==null&&Le(K,ge.startTime-he),re=!1}return re}finally{S=null,T=ie,R=!1}}var q=!1,k=null,I=-1,C=5,A=-1;function D(){return!(r.unstable_now()-A<C)}function b(){if(k!==null){var J=r.unstable_now();A=J;var he=!0;try{he=k(!0,J)}finally{he?P():(q=!1,k=null)}}else q=!1}var P;if(typeof Z=="function")P=function(){Z(b)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,Se=pe.port2;pe.port1.onmessage=b,P=function(){Se.postMessage(null)}}else P=function(){N(b,0)};function Pe(J){k=J,q||(q=!0,P())}function Le(J,he){I=N(function(){J(r.unstable_now())},he)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(J){J.callback=null},r.unstable_continueExecution=function(){M||R||(M=!0,Pe(H))},r.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<J?Math.floor(1e3/J):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(J){switch(T){case 1:case 2:case 3:var he=3;break;default:he=T}var ie=T;T=he;try{return J()}finally{T=ie}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(J,he){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ie=T;T=J;try{return he()}finally{T=ie}},r.unstable_scheduleCallback=function(J,he,ie){var V=r.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?V+ie:V):ie=V,J){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ie+G,J={id:E++,callback:he,priorityLevel:J,startTime:ie,expirationTime:G,sortIndex:-1},ie>V?(J.sortIndex=ie,e(v,J),t(g)===null&&J===t(v)&&(j?(Y(I),I=-1):j=!0,Le(K,ie-V))):(J.sortIndex=G,e(g,J),M||R||(M=!0,Pe(H))),J},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(J){var he=T;return function(){var ie=T;T=he;try{return J.apply(this,arguments)}finally{T=ie}}}}(Ph)),Ph}var pg;function YE(){return pg||(pg=1,kh.exports=XE()),kh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gg;function JE(){if(gg)return cn;gg=1;var r=mf(),e=YE();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},S={};function T(n){return g.call(S,n)?!0:g.call(E,n)?!1:v.test(n)?S[n]=!0:(E[n]=!0,!1)}function R(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function M(n,s,a,c){if(s===null||typeof s>"u"||R(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function j(n,s,a,c,f,m,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=m,this.removeEmptyString=w}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){N[n]=new j(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];N[s]=new j(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){N[n]=new j(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){N[n]=new j(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){N[n]=new j(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){N[n]=new j(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){N[n]=new j(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){N[n]=new j(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){N[n]=new j(n,5,!1,n.toLowerCase(),null,!1,!1)});var Y=/[\-:]([a-z])/g;function Z(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(Y,Z);N[s]=new j(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(Y,Z);N[s]=new j(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(Y,Z);N[s]=new j(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){N[n]=new j(n,1,!1,n.toLowerCase(),null,!1,!1)}),N.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){N[n]=new j(n,1,!1,n.toLowerCase(),null,!0,!0)});function le(n,s,a,c){var f=N.hasOwnProperty(s)?N[s]:null;(f!==null?f.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(M(s,a,f,c)&&(a=null),c||f===null?T(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,c=f.attributeNamespace,a===null?n.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var K=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),q=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),D=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),Se=Symbol.for("react.memo"),Pe=Symbol.for("react.lazy"),Le=Symbol.for("react.offscreen"),J=Symbol.iterator;function he(n){return n===null||typeof n!="object"?null:(n=J&&n[J]||n["@@iterator"],typeof n=="function"?n:null)}var ie=Object.assign,V;function G(n){if(V===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);V=s&&s[1]||""}return`
`+V+n}var re=!1;function ge(n,s){if(!n||re)return"";re=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(W){var c=W}Reflect.construct(n,[],s)}else{try{s.call()}catch(W){c=W}n.call(s.prototype)}else{try{throw Error()}catch(W){c=W}n()}}catch(W){if(W&&c&&typeof W.stack=="string"){for(var f=W.stack.split(`
`),m=c.stack.split(`
`),w=f.length-1,x=m.length-1;1<=w&&0<=x&&f[w]!==m[x];)x--;for(;1<=w&&0<=x;w--,x--)if(f[w]!==m[x]){if(w!==1||x!==1)do if(w--,x--,0>x||f[w]!==m[x]){var O=`
`+f[w].replace(" at new "," at ");return n.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",n.displayName)),O}while(1<=w&&0<=x);break}}}finally{re=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?G(n):""}function $(n){switch(n.tag){case 5:return G(n.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return n=ge(n.type,!1),n;case 11:return n=ge(n.type.render,!1),n;case 1:return n=ge(n.type,!0),n;default:return""}}function Ce(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case k:return"Fragment";case q:return"Portal";case C:return"Profiler";case I:return"StrictMode";case P:return"Suspense";case pe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case D:return(n.displayName||"Context")+".Consumer";case A:return(n._context.displayName||"Context")+".Provider";case b:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Se:return s=n.displayName||null,s!==null?s:Ce(n.type)||"Memo";case Pe:s=n._payload,n=n._init;try{return Ce(n(s))}catch{}}return null}function Ie(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(s);case 8:return s===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function de(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function te(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ee(n){var s=te(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,m=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){c=""+w,m.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function ye(n){n._valueTracker||(n._valueTracker=ee(n))}function Be(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=te(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function Xe(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ot(n,s){var a=s.checked;return ie({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Ne(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=de(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Qt(n,s){s=s.checked,s!=null&&le(n,"checked",s,!1)}function or(n,s){Qt(n,s);var a=de(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?jn(n,s.type,a):s.hasOwnProperty("defaultValue")&&jn(n,s.type,de(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Ui(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function jn(n,s,a){(s!=="number"||Xe(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Ln=Array.isArray;function tn(n,s,a,c){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+de(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function Zr(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Un(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Ln(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:de(a)}}function xr(n,s){var a=de(s.value),c=de(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Xr(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function mt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ut(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?mt(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var In,ar=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,f){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,f)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(In=In||document.createElement("div"),In.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=In.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function zn(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var kn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lr=["Webkit","ms","Moz","O"];Object.keys(kn).forEach(function(n){lr.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),kn[s]=kn[n]})});function ur(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||kn.hasOwnProperty(n)&&kn[n]?(""+s).trim():s+"px"}function Yr(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=ur(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,f):n[a]=f}}var cr=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jr(n,s){if(s){if(cr[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function hr(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fr=null;function Bn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Rr=null,Zt=null,dn=null;function $n(n){if(n=Go(n)){if(typeof Rr!="function")throw Error(t(280));var s=n.stateNode;s&&(s=hl(s),Rr(n.stateNode,n.type,s))}}function pn(n){Zt?dn?dn.push(n):dn=[n]:Zt=n}function dr(){if(Zt){var n=Zt,s=dn;if(dn=Zt=null,$n(n),s)for(n=0;n<s.length;n++)$n(s[n])}}function pr(n,s){return n(s)}function gr(){}var Pn=!1;function zi(n,s,a){if(Pn)return n(s,a);Pn=!0;try{return pr(n,s,a)}finally{Pn=!1,(Zt!==null||dn!==null)&&(gr(),dr())}}function nt(n,s){var a=n.stateNode;if(a===null)return null;var c=hl(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var De=!1;if(d)try{var Hn={};Object.defineProperty(Hn,"passive",{get:function(){De=!0}}),window.addEventListener("test",Hn,Hn),window.removeEventListener("test",Hn,Hn)}catch{De=!1}function Bi(n,s,a,c,f,m,w,x,O){var W=Array.prototype.slice.call(arguments,3);try{s.apply(a,W)}catch(oe){this.onError(oe)}}var $i=!1,Es=null,Wn=!1,Po=null,Yu={onError:function(n){$i=!0,Es=n}};function ws(n,s,a,c,f,m,w,x,O){$i=!1,Es=null,Bi.apply(Yu,arguments)}function Va(n,s,a,c,f,m,w,x,O){if(ws.apply(this,arguments),$i){if($i){var W=Es;$i=!1,Es=null}else throw Error(t(198));Wn||(Wn=!0,Po=W)}}function qn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Hi(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Kn(n){if(qn(n)!==n)throw Error(t(188))}function Na(n){var s=n.alternate;if(!s){if(s=qn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return Kn(f),n;if(m===c)return Kn(f),s;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=f,c=m;else{for(var w=!1,x=f.child;x;){if(x===a){w=!0,a=f,c=m;break}if(x===c){w=!0,c=f,a=m;break}x=x.sibling}if(!w){for(x=m.child;x;){if(x===a){w=!0,a=m,c=f;break}if(x===c){w=!0,c=m,a=f;break}x=x.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function Ao(n){return n=Na(n),n!==null?Ss(n):null}function Ss(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Ss(n);if(s!==null)return s;n=n.sibling}return null}var Cs=e.unstable_scheduleCallback,xo=e.unstable_cancelCallback,Fa=e.unstable_shouldYield,Ju=e.unstable_requestPaint,it=e.unstable_now,ja=e.unstable_getCurrentPriorityLevel,Wi=e.unstable_ImmediatePriority,ei=e.unstable_UserBlockingPriority,An=e.unstable_NormalPriority,Ro=e.unstable_LowPriority,Ua=e.unstable_IdlePriority,qi=null,gn=null;function za(n){if(gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(qi,n,void 0,(n.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:$a,Mo=Math.log,Ba=Math.LN2;function $a(n){return n>>>=0,n===0?32:31-(Mo(n)/Ba|0)|0}var Ts=64,Ls=4194304;function ti(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ki(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,f=n.suspendedLanes,m=n.pingedLanes,w=a&268435455;if(w!==0){var x=w&~f;x!==0?c=ti(x):(m&=w,m!==0&&(c=ti(m)))}else w=a&~f,w!==0?c=ti(w):m!==0&&(c=ti(m));if(c===0)return 0;if(s!==0&&s!==c&&(s&f)===0&&(f=c&-c,m=s&-s,f>=m||f===16&&(m&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-Xt(s),f=1<<a,c|=n[a],s&=~f;return c}function ec(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mr(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes;0<m;){var w=31-Xt(m),x=1<<w,O=f[w];O===-1?((x&a)===0||(x&c)!==0)&&(f[w]=ec(x,s)):O<=s&&(n.expiredLanes|=x),m&=~x}}function mn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Gi(){var n=Ts;return Ts<<=1,(Ts&4194240)===0&&(Ts=64),n}function ni(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function ri(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-Xt(s),n[s]=a}function rt(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-Xt(a),m=1<<f;s[f]=0,c[f]=-1,n[f]=-1,a&=~m}}function ii(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-Xt(a),f=1<<c;f&s|n[c]&s&&(n[c]|=s),a&=~f}}var We=0;function si(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Ha,Is,Wa,qa,Ka,Do=!1,mr=[],Ot=null,Gn=null,Qn=null,oi=new Map,xn=new Map,vr=[],tc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ga(n,s){switch(n){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":Gn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":oi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":xn.delete(s.pointerId)}}function nn(n,s,a,c,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},s!==null&&(s=Go(s),s!==null&&Is(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function nc(n,s,a,c,f){switch(s){case"focusin":return Ot=nn(Ot,n,s,a,c,f),!0;case"dragenter":return Gn=nn(Gn,n,s,a,c,f),!0;case"mouseover":return Qn=nn(Qn,n,s,a,c,f),!0;case"pointerover":var m=f.pointerId;return oi.set(m,nn(oi.get(m)||null,n,s,a,c,f)),!0;case"gotpointercapture":return m=f.pointerId,xn.set(m,nn(xn.get(m)||null,n,s,a,c,f)),!0}return!1}function Qa(n){var s=Ji(n.target);if(s!==null){var a=qn(s);if(a!==null){if(s=a.tag,s===13){if(s=Hi(a),s!==null){n.blockedOn=s,Ka(n.priority,function(){Wa(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Dr(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=ks(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);fr=c,a.target.dispatchEvent(c),fr=null}else return s=Go(a),s!==null&&Is(s),n.blockedOn=a,!1;s.shift()}return!0}function Qi(n,s,a){Dr(n)&&a.delete(s)}function Za(){Do=!1,Ot!==null&&Dr(Ot)&&(Ot=null),Gn!==null&&Dr(Gn)&&(Gn=null),Qn!==null&&Dr(Qn)&&(Qn=null),oi.forEach(Qi),xn.forEach(Qi)}function Zn(n,s){n.blockedOn===s&&(n.blockedOn=null,Do||(Do=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Za)))}function Xn(n){function s(f){return Zn(f,n)}if(0<mr.length){Zn(mr[0],n);for(var a=1;a<mr.length;a++){var c=mr[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Ot!==null&&Zn(Ot,n),Gn!==null&&Zn(Gn,n),Qn!==null&&Zn(Qn,n),oi.forEach(s),xn.forEach(s),a=0;a<vr.length;a++)c=vr[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<vr.length&&(a=vr[0],a.blockedOn===null);)Qa(a),a.blockedOn===null&&vr.shift()}var br=K.ReactCurrentBatchConfig,ai=!0;function ct(n,s,a,c){var f=We,m=br.transition;br.transition=null;try{We=1,bo(n,s,a,c)}finally{We=f,br.transition=m}}function rc(n,s,a,c){var f=We,m=br.transition;br.transition=null;try{We=4,bo(n,s,a,c)}finally{We=f,br.transition=m}}function bo(n,s,a,c){if(ai){var f=ks(n,s,a,c);if(f===null)pc(n,s,c,Zi,a),Ga(n,c);else if(nc(f,n,s,a,c))c.stopPropagation();else if(Ga(n,c),s&4&&-1<tc.indexOf(n)){for(;f!==null;){var m=Go(f);if(m!==null&&Ha(m),m=ks(n,s,a,c),m===null&&pc(n,s,c,Zi,a),m===f)break;f=m}f!==null&&c.stopPropagation()}else pc(n,s,c,null,a)}}var Zi=null;function ks(n,s,a,c){if(Zi=null,n=Bn(c),n=Ji(n),n!==null)if(s=qn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Hi(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Zi=n,null}function Oo(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ja()){case Wi:return 1;case ei:return 4;case An:case Ro:return 16;case Ua:return 536870912;default:return 16}default:return 16}}var vn=null,Ps=null,rn=null;function Vo(){if(rn)return rn;var n,s=Ps,a=s.length,c,f="value"in vn?vn.value:vn.textContent,m=f.length;for(n=0;n<a&&s[n]===f[n];n++);var w=a-n;for(c=1;c<=w&&s[a-c]===f[m-c];c++);return rn=f.slice(n,1<c?1-c:void 0)}function As(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function yr(){return!0}function No(){return!1}function Vt(n){function s(a,c,f,m,w){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var x in n)n.hasOwnProperty(x)&&(a=n[x],this[x]=a?a(m):m[x]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?yr:No,this.isPropagationStopped=No,this}return ie(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=yr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=yr)},persist:function(){},isPersistent:yr}),s}var Yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xs=Vt(Yn),_r=ie({},Yn,{view:0,detail:0}),ic=Vt(_r),Rs,Or,li,Xi=ie({},_r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Er,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==li&&(li&&n.type==="mousemove"?(Rs=n.screenX-li.screenX,Or=n.screenY-li.screenY):Or=Rs=0,li=n),Rs)},movementY:function(n){return"movementY"in n?n.movementY:Or}}),Ms=Vt(Xi),Fo=ie({},Xi,{dataTransfer:0}),Xa=Vt(Fo),Ds=ie({},_r,{relatedTarget:0}),bs=Vt(Ds),Ya=ie({},Yn,{animationName:0,elapsedTime:0,pseudoElement:0}),Vr=Vt(Ya),Ja=ie({},Yn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),el=Vt(Ja),tl=ie({},Yn,{data:0}),jo=Vt(tl),Os={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=nl[n])?!!s[n]:!1}function Er(){return rl}var u=ie({},_r,{key:function(n){if(n.key){var s=Os[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=As(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Yt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Er,charCode:function(n){return n.type==="keypress"?As(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?As(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),p=Vt(u),_=ie({},Xi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),L=Vt(_),U=ie({},_r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Er}),Q=Vt(U),fe=ie({},Yn,{propertyName:0,elapsedTime:0,pseudoElement:0}),tt=Vt(fe),Ct=ie({},Xi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ke=Vt(Ct),xt=[9,13,27,32],Et=d&&"CompositionEvent"in window,Rn=null;d&&"documentMode"in document&&(Rn=document.documentMode);var yn=d&&"TextEvent"in window&&!Rn,Yi=d&&(!Et||Rn&&8<Rn&&11>=Rn),Vs=" ",rd=!1;function id(n,s){switch(n){case"keyup":return xt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sd(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ns=!1;function H_(n,s){switch(n){case"compositionend":return sd(s);case"keypress":return s.which!==32?null:(rd=!0,Vs);case"textInput":return n=s.data,n===Vs&&rd?null:n;default:return null}}function W_(n,s){if(Ns)return n==="compositionend"||!Et&&id(n,s)?(n=Vo(),rn=Ps=vn=null,Ns=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Yi&&s.locale!=="ko"?null:s.data;default:return null}}var q_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function od(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!q_[n.type]:s==="textarea"}function ad(n,s,a,c){pn(c),s=ll(s,"onChange"),0<s.length&&(a=new xs("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var Uo=null,zo=null;function K_(n){Ld(n,0)}function il(n){var s=Bs(n);if(Be(s))return n}function G_(n,s){if(n==="change")return s}var ld=!1;if(d){var sc;if(d){var oc="oninput"in document;if(!oc){var ud=document.createElement("div");ud.setAttribute("oninput","return;"),oc=typeof ud.oninput=="function"}sc=oc}else sc=!1;ld=sc&&(!document.documentMode||9<document.documentMode)}function cd(){Uo&&(Uo.detachEvent("onpropertychange",hd),zo=Uo=null)}function hd(n){if(n.propertyName==="value"&&il(zo)){var s=[];ad(s,zo,n,Bn(n)),zi(K_,s)}}function Q_(n,s,a){n==="focusin"?(cd(),Uo=s,zo=a,Uo.attachEvent("onpropertychange",hd)):n==="focusout"&&cd()}function Z_(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return il(zo)}function X_(n,s){if(n==="click")return il(s)}function Y_(n,s){if(n==="input"||n==="change")return il(s)}function J_(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Jn=typeof Object.is=="function"?Object.is:J_;function Bo(n,s){if(Jn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!g.call(s,f)||!Jn(n[f],s[f]))return!1}return!0}function fd(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function dd(n,s){var a=fd(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=fd(a)}}function pd(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?pd(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function gd(){for(var n=window,s=Xe();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Xe(n.document)}return s}function ac(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function eE(n){var s=gd(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&pd(a.ownerDocument.documentElement,a)){if(c!==null&&ac(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,m=Math.min(c.start,f);c=c.end===void 0?m:Math.min(c.end,f),!n.extend&&m>c&&(f=c,c=m,m=f),f=dd(a,m);var w=dd(a,c);f&&w&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),m>c?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var tE=d&&"documentMode"in document&&11>=document.documentMode,Fs=null,lc=null,$o=null,uc=!1;function md(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;uc||Fs==null||Fs!==Xe(c)||(c=Fs,"selectionStart"in c&&ac(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),$o&&Bo($o,c)||($o=c,c=ll(lc,"onSelect"),0<c.length&&(s=new xs("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=Fs)))}function sl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var js={animationend:sl("Animation","AnimationEnd"),animationiteration:sl("Animation","AnimationIteration"),animationstart:sl("Animation","AnimationStart"),transitionend:sl("Transition","TransitionEnd")},cc={},vd={};d&&(vd=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);function ol(n){if(cc[n])return cc[n];if(!js[n])return n;var s=js[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in vd)return cc[n]=s[a];return n}var yd=ol("animationend"),_d=ol("animationiteration"),Ed=ol("animationstart"),wd=ol("transitionend"),Sd=new Map,Cd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ui(n,s){Sd.set(n,s),l(s,[n])}for(var hc=0;hc<Cd.length;hc++){var fc=Cd[hc],nE=fc.toLowerCase(),rE=fc[0].toUpperCase()+fc.slice(1);ui(nE,"on"+rE)}ui(yd,"onAnimationEnd"),ui(_d,"onAnimationIteration"),ui(Ed,"onAnimationStart"),ui("dblclick","onDoubleClick"),ui("focusin","onFocus"),ui("focusout","onBlur"),ui(wd,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ho));function Td(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,Va(c,s,void 0,n),n.currentTarget=null}function Ld(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var m=void 0;if(s)for(var w=c.length-1;0<=w;w--){var x=c[w],O=x.instance,W=x.currentTarget;if(x=x.listener,O!==m&&f.isPropagationStopped())break e;Td(f,x,W),m=O}else for(w=0;w<c.length;w++){if(x=c[w],O=x.instance,W=x.currentTarget,x=x.listener,O!==m&&f.isPropagationStopped())break e;Td(f,x,W),m=O}}}if(Wn)throw n=Po,Wn=!1,Po=null,n}function at(n,s){var a=s[Ec];a===void 0&&(a=s[Ec]=new Set);var c=n+"__bubble";a.has(c)||(Id(s,n,2,!1),a.add(c))}function dc(n,s,a){var c=0;s&&(c|=4),Id(a,n,c,s)}var al="_reactListening"+Math.random().toString(36).slice(2);function Wo(n){if(!n[al]){n[al]=!0,i.forEach(function(a){a!=="selectionchange"&&(iE.has(a)||dc(a,!1,n),dc(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[al]||(s[al]=!0,dc("selectionchange",!1,s))}}function Id(n,s,a,c){switch(Oo(s)){case 1:var f=ct;break;case 4:f=rc;break;default:f=bo}a=f.bind(null,s,a,n),f=void 0,!De||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function pc(n,s,a,c,f){var m=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var x=c.stateNode.containerInfo;if(x===f||x.nodeType===8&&x.parentNode===f)break;if(w===4)for(w=c.return;w!==null;){var O=w.tag;if((O===3||O===4)&&(O=w.stateNode.containerInfo,O===f||O.nodeType===8&&O.parentNode===f))return;w=w.return}for(;x!==null;){if(w=Ji(x),w===null)return;if(O=w.tag,O===5||O===6){c=m=w;continue e}x=x.parentNode}}c=c.return}zi(function(){var W=m,oe=Bn(a),ue=[];e:{var se=Sd.get(n);if(se!==void 0){var me=xs,Ee=n;switch(n){case"keypress":if(As(a)===0)break e;case"keydown":case"keyup":me=p;break;case"focusin":Ee="focus",me=bs;break;case"focusout":Ee="blur",me=bs;break;case"beforeblur":case"afterblur":me=bs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=Ms;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=Xa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=Q;break;case yd:case _d:case Ed:me=Vr;break;case wd:me=tt;break;case"scroll":me=ic;break;case"wheel":me=Ke;break;case"copy":case"cut":case"paste":me=el;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=L}var we=(s&4)!==0,yt=!we&&n==="scroll",z=we?se!==null?se+"Capture":null:se;we=[];for(var F=W,B;F!==null;){B=F;var ce=B.stateNode;if(B.tag===5&&ce!==null&&(B=ce,z!==null&&(ce=nt(F,z),ce!=null&&we.push(qo(F,ce,B)))),yt)break;F=F.return}0<we.length&&(se=new me(se,Ee,null,a,oe),ue.push({event:se,listeners:we}))}}if((s&7)===0){e:{if(se=n==="mouseover"||n==="pointerover",me=n==="mouseout"||n==="pointerout",se&&a!==fr&&(Ee=a.relatedTarget||a.fromElement)&&(Ji(Ee)||Ee[Nr]))break e;if((me||se)&&(se=oe.window===oe?oe:(se=oe.ownerDocument)?se.defaultView||se.parentWindow:window,me?(Ee=a.relatedTarget||a.toElement,me=W,Ee=Ee?Ji(Ee):null,Ee!==null&&(yt=qn(Ee),Ee!==yt||Ee.tag!==5&&Ee.tag!==6)&&(Ee=null)):(me=null,Ee=W),me!==Ee)){if(we=Ms,ce="onMouseLeave",z="onMouseEnter",F="mouse",(n==="pointerout"||n==="pointerover")&&(we=L,ce="onPointerLeave",z="onPointerEnter",F="pointer"),yt=me==null?se:Bs(me),B=Ee==null?se:Bs(Ee),se=new we(ce,F+"leave",me,a,oe),se.target=yt,se.relatedTarget=B,ce=null,Ji(oe)===W&&(we=new we(z,F+"enter",Ee,a,oe),we.target=B,we.relatedTarget=yt,ce=we),yt=ce,me&&Ee)t:{for(we=me,z=Ee,F=0,B=we;B;B=Us(B))F++;for(B=0,ce=z;ce;ce=Us(ce))B++;for(;0<F-B;)we=Us(we),F--;for(;0<B-F;)z=Us(z),B--;for(;F--;){if(we===z||z!==null&&we===z.alternate)break t;we=Us(we),z=Us(z)}we=null}else we=null;me!==null&&kd(ue,se,me,we,!1),Ee!==null&&yt!==null&&kd(ue,yt,Ee,we,!0)}}e:{if(se=W?Bs(W):window,me=se.nodeName&&se.nodeName.toLowerCase(),me==="select"||me==="input"&&se.type==="file")var Te=G_;else if(od(se))if(ld)Te=Y_;else{Te=Z_;var xe=Q_}else(me=se.nodeName)&&me.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Te=X_);if(Te&&(Te=Te(n,W))){ad(ue,Te,a,oe);break e}xe&&xe(n,se,W),n==="focusout"&&(xe=se._wrapperState)&&xe.controlled&&se.type==="number"&&jn(se,"number",se.value)}switch(xe=W?Bs(W):window,n){case"focusin":(od(xe)||xe.contentEditable==="true")&&(Fs=xe,lc=W,$o=null);break;case"focusout":$o=lc=Fs=null;break;case"mousedown":uc=!0;break;case"contextmenu":case"mouseup":case"dragend":uc=!1,md(ue,a,oe);break;case"selectionchange":if(tE)break;case"keydown":case"keyup":md(ue,a,oe)}var Re;if(Et)e:{switch(n){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else Ns?id(n,a)&&(Oe="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Oe="onCompositionStart");Oe&&(Yi&&a.locale!=="ko"&&(Ns||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&Ns&&(Re=Vo()):(vn=oe,Ps="value"in vn?vn.value:vn.textContent,Ns=!0)),xe=ll(W,Oe),0<xe.length&&(Oe=new jo(Oe,n,null,a,oe),ue.push({event:Oe,listeners:xe}),Re?Oe.data=Re:(Re=sd(a),Re!==null&&(Oe.data=Re)))),(Re=yn?H_(n,a):W_(n,a))&&(W=ll(W,"onBeforeInput"),0<W.length&&(oe=new jo("onBeforeInput","beforeinput",null,a,oe),ue.push({event:oe,listeners:W}),oe.data=Re))}Ld(ue,s)})}function qo(n,s,a){return{instance:n,listener:s,currentTarget:a}}function ll(n,s){for(var a=s+"Capture",c=[];n!==null;){var f=n,m=f.stateNode;f.tag===5&&m!==null&&(f=m,m=nt(n,a),m!=null&&c.unshift(qo(n,m,f)),m=nt(n,s),m!=null&&c.push(qo(n,m,f))),n=n.return}return c}function Us(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function kd(n,s,a,c,f){for(var m=s._reactName,w=[];a!==null&&a!==c;){var x=a,O=x.alternate,W=x.stateNode;if(O!==null&&O===c)break;x.tag===5&&W!==null&&(x=W,f?(O=nt(a,m),O!=null&&w.unshift(qo(a,O,x))):f||(O=nt(a,m),O!=null&&w.push(qo(a,O,x)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var sE=/\r\n?/g,oE=/\u0000|\uFFFD/g;function Pd(n){return(typeof n=="string"?n:""+n).replace(sE,`
`).replace(oE,"")}function ul(n,s,a){if(s=Pd(s),Pd(n)!==s&&a)throw Error(t(425))}function cl(){}var gc=null,mc=null;function vc(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var yc=typeof setTimeout=="function"?setTimeout:void 0,aE=typeof clearTimeout=="function"?clearTimeout:void 0,Ad=typeof Promise=="function"?Promise:void 0,lE=typeof queueMicrotask=="function"?queueMicrotask:typeof Ad<"u"?function(n){return Ad.resolve(null).then(n).catch(uE)}:yc;function uE(n){setTimeout(function(){throw n})}function _c(n,s){var a=s,c=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){n.removeChild(f),Xn(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);Xn(s)}function ci(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function xd(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var zs=Math.random().toString(36).slice(2),wr="__reactFiber$"+zs,Ko="__reactProps$"+zs,Nr="__reactContainer$"+zs,Ec="__reactEvents$"+zs,cE="__reactListeners$"+zs,hE="__reactHandles$"+zs;function Ji(n){var s=n[wr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Nr]||a[wr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=xd(n);n!==null;){if(a=n[wr])return a;n=xd(n)}return s}n=a,a=n.parentNode}return null}function Go(n){return n=n[wr]||n[Nr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Bs(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function hl(n){return n[Ko]||null}var wc=[],$s=-1;function hi(n){return{current:n}}function lt(n){0>$s||(n.current=wc[$s],wc[$s]=null,$s--)}function st(n,s){$s++,wc[$s]=n.current,n.current=s}var fi={},Bt=hi(fi),sn=hi(!1),es=fi;function Hs(n,s){var a=n.type.contextTypes;if(!a)return fi;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var f={},m;for(m in a)f[m]=s[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function on(n){return n=n.childContextTypes,n!=null}function fl(){lt(sn),lt(Bt)}function Rd(n,s,a){if(Bt.current!==fi)throw Error(t(168));st(Bt,s),st(sn,a)}function Md(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in s))throw Error(t(108,Ie(n)||"Unknown",f));return ie({},a,c)}function dl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||fi,es=Bt.current,st(Bt,n),st(sn,sn.current),!0}function Dd(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Md(n,s,es),c.__reactInternalMemoizedMergedChildContext=n,lt(sn),lt(Bt),st(Bt,n)):lt(sn),st(sn,a)}var Fr=null,pl=!1,Sc=!1;function bd(n){Fr===null?Fr=[n]:Fr.push(n)}function fE(n){pl=!0,bd(n)}function di(){if(!Sc&&Fr!==null){Sc=!0;var n=0,s=We;try{var a=Fr;for(We=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Fr=null,pl=!1}catch(f){throw Fr!==null&&(Fr=Fr.slice(n+1)),Cs(Wi,di),f}finally{We=s,Sc=!1}}return null}var Ws=[],qs=0,gl=null,ml=0,Mn=[],Dn=0,ts=null,jr=1,Ur="";function ns(n,s){Ws[qs++]=ml,Ws[qs++]=gl,gl=n,ml=s}function Od(n,s,a){Mn[Dn++]=jr,Mn[Dn++]=Ur,Mn[Dn++]=ts,ts=n;var c=jr;n=Ur;var f=32-Xt(c)-1;c&=~(1<<f),a+=1;var m=32-Xt(s)+f;if(30<m){var w=f-f%5;m=(c&(1<<w)-1).toString(32),c>>=w,f-=w,jr=1<<32-Xt(s)+f|a<<f|c,Ur=m+n}else jr=1<<m|a<<f|c,Ur=n}function Cc(n){n.return!==null&&(ns(n,1),Od(n,1,0))}function Tc(n){for(;n===gl;)gl=Ws[--qs],Ws[qs]=null,ml=Ws[--qs],Ws[qs]=null;for(;n===ts;)ts=Mn[--Dn],Mn[Dn]=null,Ur=Mn[--Dn],Mn[Dn]=null,jr=Mn[--Dn],Mn[Dn]=null}var _n=null,En=null,ht=!1,er=null;function Vd(n,s){var a=Nn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function Nd(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,_n=n,En=ci(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,_n=n,En=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=ts!==null?{id:jr,overflow:Ur}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Nn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,_n=n,En=null,!0):!1;default:return!1}}function Lc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ic(n){if(ht){var s=En;if(s){var a=s;if(!Nd(n,s)){if(Lc(n))throw Error(t(418));s=ci(a.nextSibling);var c=_n;s&&Nd(n,s)?Vd(c,a):(n.flags=n.flags&-4097|2,ht=!1,_n=n)}}else{if(Lc(n))throw Error(t(418));n.flags=n.flags&-4097|2,ht=!1,_n=n}}}function Fd(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;_n=n}function vl(n){if(n!==_n)return!1;if(!ht)return Fd(n),ht=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!vc(n.type,n.memoizedProps)),s&&(s=En)){if(Lc(n))throw jd(),Error(t(418));for(;s;)Vd(n,s),s=ci(s.nextSibling)}if(Fd(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){En=ci(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}En=null}}else En=_n?ci(n.stateNode.nextSibling):null;return!0}function jd(){for(var n=En;n;)n=ci(n.nextSibling)}function Ks(){En=_n=null,ht=!1}function kc(n){er===null?er=[n]:er.push(n)}var dE=K.ReactCurrentBatchConfig;function Qo(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var f=c,m=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===m?s.ref:(s=function(w){var x=f.refs;w===null?delete x[m]:x[m]=w},s._stringRef=m,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function yl(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function Ud(n){var s=n._init;return s(n._payload)}function zd(n){function s(z,F){if(n){var B=z.deletions;B===null?(z.deletions=[F],z.flags|=16):B.push(F)}}function a(z,F){if(!n)return null;for(;F!==null;)s(z,F),F=F.sibling;return null}function c(z,F){for(z=new Map;F!==null;)F.key!==null?z.set(F.key,F):z.set(F.index,F),F=F.sibling;return z}function f(z,F){return z=wi(z,F),z.index=0,z.sibling=null,z}function m(z,F,B){return z.index=B,n?(B=z.alternate,B!==null?(B=B.index,B<F?(z.flags|=2,F):B):(z.flags|=2,F)):(z.flags|=1048576,F)}function w(z){return n&&z.alternate===null&&(z.flags|=2),z}function x(z,F,B,ce){return F===null||F.tag!==6?(F=yh(B,z.mode,ce),F.return=z,F):(F=f(F,B),F.return=z,F)}function O(z,F,B,ce){var Te=B.type;return Te===k?oe(z,F,B.props.children,ce,B.key):F!==null&&(F.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===Pe&&Ud(Te)===F.type)?(ce=f(F,B.props),ce.ref=Qo(z,F,B),ce.return=z,ce):(ce=Bl(B.type,B.key,B.props,null,z.mode,ce),ce.ref=Qo(z,F,B),ce.return=z,ce)}function W(z,F,B,ce){return F===null||F.tag!==4||F.stateNode.containerInfo!==B.containerInfo||F.stateNode.implementation!==B.implementation?(F=_h(B,z.mode,ce),F.return=z,F):(F=f(F,B.children||[]),F.return=z,F)}function oe(z,F,B,ce,Te){return F===null||F.tag!==7?(F=cs(B,z.mode,ce,Te),F.return=z,F):(F=f(F,B),F.return=z,F)}function ue(z,F,B){if(typeof F=="string"&&F!==""||typeof F=="number")return F=yh(""+F,z.mode,B),F.return=z,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case H:return B=Bl(F.type,F.key,F.props,null,z.mode,B),B.ref=Qo(z,null,F),B.return=z,B;case q:return F=_h(F,z.mode,B),F.return=z,F;case Pe:var ce=F._init;return ue(z,ce(F._payload),B)}if(Ln(F)||he(F))return F=cs(F,z.mode,B,null),F.return=z,F;yl(z,F)}return null}function se(z,F,B,ce){var Te=F!==null?F.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return Te!==null?null:x(z,F,""+B,ce);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case H:return B.key===Te?O(z,F,B,ce):null;case q:return B.key===Te?W(z,F,B,ce):null;case Pe:return Te=B._init,se(z,F,Te(B._payload),ce)}if(Ln(B)||he(B))return Te!==null?null:oe(z,F,B,ce,null);yl(z,B)}return null}function me(z,F,B,ce,Te){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return z=z.get(B)||null,x(F,z,""+ce,Te);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case H:return z=z.get(ce.key===null?B:ce.key)||null,O(F,z,ce,Te);case q:return z=z.get(ce.key===null?B:ce.key)||null,W(F,z,ce,Te);case Pe:var xe=ce._init;return me(z,F,B,xe(ce._payload),Te)}if(Ln(ce)||he(ce))return z=z.get(B)||null,oe(F,z,ce,Te,null);yl(F,ce)}return null}function Ee(z,F,B,ce){for(var Te=null,xe=null,Re=F,Oe=F=0,Dt=null;Re!==null&&Oe<B.length;Oe++){Re.index>Oe?(Dt=Re,Re=null):Dt=Re.sibling;var Ye=se(z,Re,B[Oe],ce);if(Ye===null){Re===null&&(Re=Dt);break}n&&Re&&Ye.alternate===null&&s(z,Re),F=m(Ye,F,Oe),xe===null?Te=Ye:xe.sibling=Ye,xe=Ye,Re=Dt}if(Oe===B.length)return a(z,Re),ht&&ns(z,Oe),Te;if(Re===null){for(;Oe<B.length;Oe++)Re=ue(z,B[Oe],ce),Re!==null&&(F=m(Re,F,Oe),xe===null?Te=Re:xe.sibling=Re,xe=Re);return ht&&ns(z,Oe),Te}for(Re=c(z,Re);Oe<B.length;Oe++)Dt=me(Re,z,Oe,B[Oe],ce),Dt!==null&&(n&&Dt.alternate!==null&&Re.delete(Dt.key===null?Oe:Dt.key),F=m(Dt,F,Oe),xe===null?Te=Dt:xe.sibling=Dt,xe=Dt);return n&&Re.forEach(function(Si){return s(z,Si)}),ht&&ns(z,Oe),Te}function we(z,F,B,ce){var Te=he(B);if(typeof Te!="function")throw Error(t(150));if(B=Te.call(B),B==null)throw Error(t(151));for(var xe=Te=null,Re=F,Oe=F=0,Dt=null,Ye=B.next();Re!==null&&!Ye.done;Oe++,Ye=B.next()){Re.index>Oe?(Dt=Re,Re=null):Dt=Re.sibling;var Si=se(z,Re,Ye.value,ce);if(Si===null){Re===null&&(Re=Dt);break}n&&Re&&Si.alternate===null&&s(z,Re),F=m(Si,F,Oe),xe===null?Te=Si:xe.sibling=Si,xe=Si,Re=Dt}if(Ye.done)return a(z,Re),ht&&ns(z,Oe),Te;if(Re===null){for(;!Ye.done;Oe++,Ye=B.next())Ye=ue(z,Ye.value,ce),Ye!==null&&(F=m(Ye,F,Oe),xe===null?Te=Ye:xe.sibling=Ye,xe=Ye);return ht&&ns(z,Oe),Te}for(Re=c(z,Re);!Ye.done;Oe++,Ye=B.next())Ye=me(Re,z,Oe,Ye.value,ce),Ye!==null&&(n&&Ye.alternate!==null&&Re.delete(Ye.key===null?Oe:Ye.key),F=m(Ye,F,Oe),xe===null?Te=Ye:xe.sibling=Ye,xe=Ye);return n&&Re.forEach(function(qE){return s(z,qE)}),ht&&ns(z,Oe),Te}function yt(z,F,B,ce){if(typeof B=="object"&&B!==null&&B.type===k&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case H:e:{for(var Te=B.key,xe=F;xe!==null;){if(xe.key===Te){if(Te=B.type,Te===k){if(xe.tag===7){a(z,xe.sibling),F=f(xe,B.props.children),F.return=z,z=F;break e}}else if(xe.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===Pe&&Ud(Te)===xe.type){a(z,xe.sibling),F=f(xe,B.props),F.ref=Qo(z,xe,B),F.return=z,z=F;break e}a(z,xe);break}else s(z,xe);xe=xe.sibling}B.type===k?(F=cs(B.props.children,z.mode,ce,B.key),F.return=z,z=F):(ce=Bl(B.type,B.key,B.props,null,z.mode,ce),ce.ref=Qo(z,F,B),ce.return=z,z=ce)}return w(z);case q:e:{for(xe=B.key;F!==null;){if(F.key===xe)if(F.tag===4&&F.stateNode.containerInfo===B.containerInfo&&F.stateNode.implementation===B.implementation){a(z,F.sibling),F=f(F,B.children||[]),F.return=z,z=F;break e}else{a(z,F);break}else s(z,F);F=F.sibling}F=_h(B,z.mode,ce),F.return=z,z=F}return w(z);case Pe:return xe=B._init,yt(z,F,xe(B._payload),ce)}if(Ln(B))return Ee(z,F,B,ce);if(he(B))return we(z,F,B,ce);yl(z,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,F!==null&&F.tag===6?(a(z,F.sibling),F=f(F,B),F.return=z,z=F):(a(z,F),F=yh(B,z.mode,ce),F.return=z,z=F),w(z)):a(z,F)}return yt}var Gs=zd(!0),Bd=zd(!1),_l=hi(null),El=null,Qs=null,Pc=null;function Ac(){Pc=Qs=El=null}function xc(n){var s=_l.current;lt(_l),n._currentValue=s}function Rc(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function Zs(n,s){El=n,Pc=Qs=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(an=!0),n.firstContext=null)}function bn(n){var s=n._currentValue;if(Pc!==n)if(n={context:n,memoizedValue:s,next:null},Qs===null){if(El===null)throw Error(t(308));Qs=n,El.dependencies={lanes:0,firstContext:n}}else Qs=Qs.next=n;return s}var rs=null;function Mc(n){rs===null?rs=[n]:rs.push(n)}function $d(n,s,a,c){var f=s.interleaved;return f===null?(a.next=a,Mc(s)):(a.next=f.next,f.next=a),s.interleaved=a,zr(n,c)}function zr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var pi=!1;function Dc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hd(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Br(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function gi(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ze&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,zr(n,a)}return f=c.interleaved,f===null?(s.next=s,Mc(c)):(s.next=f.next,f.next=s),c.interleaved=s,zr(n,a)}function wl(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,ii(n,a)}}function Wd(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?f=m=w:m=m.next=w,a=a.next}while(a!==null);m===null?f=m=s:m=m.next=s}else f=m=s;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function Sl(n,s,a,c){var f=n.updateQueue;pi=!1;var m=f.firstBaseUpdate,w=f.lastBaseUpdate,x=f.shared.pending;if(x!==null){f.shared.pending=null;var O=x,W=O.next;O.next=null,w===null?m=W:w.next=W,w=O;var oe=n.alternate;oe!==null&&(oe=oe.updateQueue,x=oe.lastBaseUpdate,x!==w&&(x===null?oe.firstBaseUpdate=W:x.next=W,oe.lastBaseUpdate=O))}if(m!==null){var ue=f.baseState;w=0,oe=W=O=null,x=m;do{var se=x.lane,me=x.eventTime;if((c&se)===se){oe!==null&&(oe=oe.next={eventTime:me,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var Ee=n,we=x;switch(se=s,me=a,we.tag){case 1:if(Ee=we.payload,typeof Ee=="function"){ue=Ee.call(me,ue,se);break e}ue=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=we.payload,se=typeof Ee=="function"?Ee.call(me,ue,se):Ee,se==null)break e;ue=ie({},ue,se);break e;case 2:pi=!0}}x.callback!==null&&x.lane!==0&&(n.flags|=64,se=f.effects,se===null?f.effects=[x]:se.push(x))}else me={eventTime:me,lane:se,tag:x.tag,payload:x.payload,callback:x.callback,next:null},oe===null?(W=oe=me,O=ue):oe=oe.next=me,w|=se;if(x=x.next,x===null){if(x=f.shared.pending,x===null)break;se=x,x=se.next,se.next=null,f.lastBaseUpdate=se,f.shared.pending=null}}while(!0);if(oe===null&&(O=ue),f.baseState=O,f.firstBaseUpdate=W,f.lastBaseUpdate=oe,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else m===null&&(f.shared.lanes=0);os|=w,n.lanes=w,n.memoizedState=ue}}function qd(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(t(191,f));f.call(c)}}}var Zo={},Sr=hi(Zo),Xo=hi(Zo),Yo=hi(Zo);function is(n){if(n===Zo)throw Error(t(174));return n}function bc(n,s){switch(st(Yo,s),st(Xo,n),st(Sr,Zo),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:ut(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=ut(s,n)}lt(Sr),st(Sr,s)}function Xs(){lt(Sr),lt(Xo),lt(Yo)}function Kd(n){is(Yo.current);var s=is(Sr.current),a=ut(s,n.type);s!==a&&(st(Xo,n),st(Sr,a))}function Oc(n){Xo.current===n&&(lt(Sr),lt(Xo))}var dt=hi(0);function Cl(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Vc=[];function Nc(){for(var n=0;n<Vc.length;n++)Vc[n]._workInProgressVersionPrimary=null;Vc.length=0}var Tl=K.ReactCurrentDispatcher,Fc=K.ReactCurrentBatchConfig,ss=0,pt=null,Tt=null,Rt=null,Ll=!1,Jo=!1,ea=0,pE=0;function $t(){throw Error(t(321))}function jc(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Jn(n[a],s[a]))return!1;return!0}function Uc(n,s,a,c,f,m){if(ss=m,pt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Tl.current=n===null||n.memoizedState===null?yE:_E,n=a(c,f),Jo){m=0;do{if(Jo=!1,ea=0,25<=m)throw Error(t(301));m+=1,Rt=Tt=null,s.updateQueue=null,Tl.current=EE,n=a(c,f)}while(Jo)}if(Tl.current=Pl,s=Tt!==null&&Tt.next!==null,ss=0,Rt=Tt=pt=null,Ll=!1,s)throw Error(t(300));return n}function zc(){var n=ea!==0;return ea=0,n}function Cr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?pt.memoizedState=Rt=n:Rt=Rt.next=n,Rt}function On(){if(Tt===null){var n=pt.alternate;n=n!==null?n.memoizedState:null}else n=Tt.next;var s=Rt===null?pt.memoizedState:Rt.next;if(s!==null)Rt=s,Tt=n;else{if(n===null)throw Error(t(310));Tt=n,n={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Rt===null?pt.memoizedState=Rt=n:Rt=Rt.next=n}return Rt}function ta(n,s){return typeof s=="function"?s(n):s}function Bc(n){var s=On(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Tt,f=c.baseQueue,m=a.pending;if(m!==null){if(f!==null){var w=f.next;f.next=m.next,m.next=w}c.baseQueue=f=m,a.pending=null}if(f!==null){m=f.next,c=c.baseState;var x=w=null,O=null,W=m;do{var oe=W.lane;if((ss&oe)===oe)O!==null&&(O=O.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),c=W.hasEagerState?W.eagerState:n(c,W.action);else{var ue={lane:oe,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};O===null?(x=O=ue,w=c):O=O.next=ue,pt.lanes|=oe,os|=oe}W=W.next}while(W!==null&&W!==m);O===null?w=c:O.next=x,Jn(c,s.memoizedState)||(an=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=O,a.lastRenderedState=c}if(n=a.interleaved,n!==null){f=n;do m=f.lane,pt.lanes|=m,os|=m,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function $c(n){var s=On(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,m=s.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do m=n(m,w.action),w=w.next;while(w!==f);Jn(m,s.memoizedState)||(an=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,c]}function Gd(){}function Qd(n,s){var a=pt,c=On(),f=s(),m=!Jn(c.memoizedState,f);if(m&&(c.memoizedState=f,an=!0),c=c.queue,Hc(Yd.bind(null,a,c,n),[n]),c.getSnapshot!==s||m||Rt!==null&&Rt.memoizedState.tag&1){if(a.flags|=2048,na(9,Xd.bind(null,a,c,f,s),void 0,null),Mt===null)throw Error(t(349));(ss&30)!==0||Zd(a,s,f)}return f}function Zd(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=pt.updateQueue,s===null?(s={lastEffect:null,stores:null},pt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Xd(n,s,a,c){s.value=a,s.getSnapshot=c,Jd(s)&&ep(n)}function Yd(n,s,a){return a(function(){Jd(s)&&ep(n)})}function Jd(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Jn(n,a)}catch{return!0}}function ep(n){var s=zr(n,1);s!==null&&ir(s,n,1,-1)}function tp(n){var s=Cr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ta,lastRenderedState:n},s.queue=n,n=n.dispatch=vE.bind(null,pt,n),[s.memoizedState,n]}function na(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=pt.updateQueue,s===null?(s={lastEffect:null,stores:null},pt.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function np(){return On().memoizedState}function Il(n,s,a,c){var f=Cr();pt.flags|=n,f.memoizedState=na(1|s,a,void 0,c===void 0?null:c)}function kl(n,s,a,c){var f=On();c=c===void 0?null:c;var m=void 0;if(Tt!==null){var w=Tt.memoizedState;if(m=w.destroy,c!==null&&jc(c,w.deps)){f.memoizedState=na(s,a,m,c);return}}pt.flags|=n,f.memoizedState=na(1|s,a,m,c)}function rp(n,s){return Il(8390656,8,n,s)}function Hc(n,s){return kl(2048,8,n,s)}function ip(n,s){return kl(4,2,n,s)}function sp(n,s){return kl(4,4,n,s)}function op(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function ap(n,s,a){return a=a!=null?a.concat([n]):null,kl(4,4,op.bind(null,s,n),a)}function Wc(){}function lp(n,s){var a=On();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&jc(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function up(n,s){var a=On();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&jc(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function cp(n,s,a){return(ss&21)===0?(n.baseState&&(n.baseState=!1,an=!0),n.memoizedState=a):(Jn(a,s)||(a=Gi(),pt.lanes|=a,os|=a,n.baseState=!0),s)}function gE(n,s){var a=We;We=a!==0&&4>a?a:4,n(!0);var c=Fc.transition;Fc.transition={};try{n(!1),s()}finally{We=a,Fc.transition=c}}function hp(){return On().memoizedState}function mE(n,s,a){var c=_i(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},fp(n))dp(s,a);else if(a=$d(n,s,a,c),a!==null){var f=en();ir(a,n,c,f),pp(a,s,c)}}function vE(n,s,a){var c=_i(n),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(fp(n))dp(s,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var w=s.lastRenderedState,x=m(w,a);if(f.hasEagerState=!0,f.eagerState=x,Jn(x,w)){var O=s.interleaved;O===null?(f.next=f,Mc(s)):(f.next=O.next,O.next=f),s.interleaved=f;return}}catch{}finally{}a=$d(n,s,f,c),a!==null&&(f=en(),ir(a,n,c,f),pp(a,s,c))}}function fp(n){var s=n.alternate;return n===pt||s!==null&&s===pt}function dp(n,s){Jo=Ll=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function pp(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,ii(n,a)}}var Pl={readContext:bn,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useInsertionEffect:$t,useLayoutEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useMutableSource:$t,useSyncExternalStore:$t,useId:$t,unstable_isNewReconciler:!1},yE={readContext:bn,useCallback:function(n,s){return Cr().memoizedState=[n,s===void 0?null:s],n},useContext:bn,useEffect:rp,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,Il(4194308,4,op.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Il(4194308,4,n,s)},useInsertionEffect:function(n,s){return Il(4,2,n,s)},useMemo:function(n,s){var a=Cr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=Cr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=mE.bind(null,pt,n),[c.memoizedState,n]},useRef:function(n){var s=Cr();return n={current:n},s.memoizedState=n},useState:tp,useDebugValue:Wc,useDeferredValue:function(n){return Cr().memoizedState=n},useTransition:function(){var n=tp(!1),s=n[0];return n=gE.bind(null,n[1]),Cr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=pt,f=Cr();if(ht){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Mt===null)throw Error(t(349));(ss&30)!==0||Zd(c,s,a)}f.memoizedState=a;var m={value:a,getSnapshot:s};return f.queue=m,rp(Yd.bind(null,c,m,n),[n]),c.flags|=2048,na(9,Xd.bind(null,c,m,a,s),void 0,null),a},useId:function(){var n=Cr(),s=Mt.identifierPrefix;if(ht){var a=Ur,c=jr;a=(c&~(1<<32-Xt(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=ea++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=pE++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},_E={readContext:bn,useCallback:lp,useContext:bn,useEffect:Hc,useImperativeHandle:ap,useInsertionEffect:ip,useLayoutEffect:sp,useMemo:up,useReducer:Bc,useRef:np,useState:function(){return Bc(ta)},useDebugValue:Wc,useDeferredValue:function(n){var s=On();return cp(s,Tt.memoizedState,n)},useTransition:function(){var n=Bc(ta)[0],s=On().memoizedState;return[n,s]},useMutableSource:Gd,useSyncExternalStore:Qd,useId:hp,unstable_isNewReconciler:!1},EE={readContext:bn,useCallback:lp,useContext:bn,useEffect:Hc,useImperativeHandle:ap,useInsertionEffect:ip,useLayoutEffect:sp,useMemo:up,useReducer:$c,useRef:np,useState:function(){return $c(ta)},useDebugValue:Wc,useDeferredValue:function(n){var s=On();return Tt===null?s.memoizedState=n:cp(s,Tt.memoizedState,n)},useTransition:function(){var n=$c(ta)[0],s=On().memoizedState;return[n,s]},useMutableSource:Gd,useSyncExternalStore:Qd,useId:hp,unstable_isNewReconciler:!1};function tr(n,s){if(n&&n.defaultProps){s=ie({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function qc(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:ie({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Al={isMounted:function(n){return(n=n._reactInternals)?qn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=en(),f=_i(n),m=Br(c,f);m.payload=s,a!=null&&(m.callback=a),s=gi(n,m,f),s!==null&&(ir(s,n,f,c),wl(s,n,f))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=en(),f=_i(n),m=Br(c,f);m.tag=1,m.payload=s,a!=null&&(m.callback=a),s=gi(n,m,f),s!==null&&(ir(s,n,f,c),wl(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=en(),c=_i(n),f=Br(a,c);f.tag=2,s!=null&&(f.callback=s),s=gi(n,f,c),s!==null&&(ir(s,n,c,a),wl(s,n,c))}};function gp(n,s,a,c,f,m,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,w):s.prototype&&s.prototype.isPureReactComponent?!Bo(a,c)||!Bo(f,m):!0}function mp(n,s,a){var c=!1,f=fi,m=s.contextType;return typeof m=="object"&&m!==null?m=bn(m):(f=on(s)?es:Bt.current,c=s.contextTypes,m=(c=c!=null)?Hs(n,f):fi),s=new s(a,m),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Al,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=m),s}function vp(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&Al.enqueueReplaceState(s,s.state,null)}function Kc(n,s,a,c){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},Dc(n);var m=s.contextType;typeof m=="object"&&m!==null?f.context=bn(m):(m=on(s)?es:Bt.current,f.context=Hs(n,m)),f.state=n.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(qc(n,s,m,a),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Al.enqueueReplaceState(f,f.state,null),Sl(n,a,f,c),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function Ys(n,s){try{var a="",c=s;do a+=$(c),c=c.return;while(c);var f=a}catch(m){f=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:s,stack:f,digest:null}}function Gc(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Qc(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var wE=typeof WeakMap=="function"?WeakMap:Map;function yp(n,s,a){a=Br(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Vl||(Vl=!0,ch=c),Qc(n,s)},a}function _p(n,s,a){a=Br(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=s.value;a.payload=function(){return c(f)},a.callback=function(){Qc(n,s)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){Qc(n,s),typeof c!="function"&&(vi===null?vi=new Set([this]):vi.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function Ep(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new wE;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(a)||(f.add(a),n=OE.bind(null,n,s,a),s.then(n,n))}function wp(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Sp(n,s,a,c,f){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Br(-1,1),s.tag=2,gi(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var SE=K.ReactCurrentOwner,an=!1;function Jt(n,s,a,c){s.child=n===null?Bd(s,null,a,c):Gs(s,n.child,a,c)}function Cp(n,s,a,c,f){a=a.render;var m=s.ref;return Zs(s,f),c=Uc(n,s,a,c,m,f),a=zc(),n!==null&&!an?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,$r(n,s,f)):(ht&&a&&Cc(s),s.flags|=1,Jt(n,s,c,f),s.child)}function Tp(n,s,a,c,f){if(n===null){var m=a.type;return typeof m=="function"&&!vh(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=m,Lp(n,s,m,c,f)):(n=Bl(a.type,null,c,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,(n.lanes&f)===0){var w=m.memoizedProps;if(a=a.compare,a=a!==null?a:Bo,a(w,c)&&n.ref===s.ref)return $r(n,s,f)}return s.flags|=1,n=wi(m,c),n.ref=s.ref,n.return=s,s.child=n}function Lp(n,s,a,c,f){if(n!==null){var m=n.memoizedProps;if(Bo(m,c)&&n.ref===s.ref)if(an=!1,s.pendingProps=c=m,(n.lanes&f)!==0)(n.flags&131072)!==0&&(an=!0);else return s.lanes=n.lanes,$r(n,s,f)}return Zc(n,s,a,c,f)}function Ip(n,s,a){var c=s.pendingProps,f=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},st(eo,wn),wn|=a;else{if((a&1073741824)===0)return n=m!==null?m.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,st(eo,wn),wn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,st(eo,wn),wn|=c}else m!==null?(c=m.baseLanes|a,s.memoizedState=null):c=a,st(eo,wn),wn|=c;return Jt(n,s,f,a),s.child}function kp(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Zc(n,s,a,c,f){var m=on(a)?es:Bt.current;return m=Hs(s,m),Zs(s,f),a=Uc(n,s,a,c,m,f),c=zc(),n!==null&&!an?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,$r(n,s,f)):(ht&&c&&Cc(s),s.flags|=1,Jt(n,s,a,f),s.child)}function Pp(n,s,a,c,f){if(on(a)){var m=!0;dl(s)}else m=!1;if(Zs(s,f),s.stateNode===null)Rl(n,s),mp(s,a,c),Kc(s,a,c,f),c=!0;else if(n===null){var w=s.stateNode,x=s.memoizedProps;w.props=x;var O=w.context,W=a.contextType;typeof W=="object"&&W!==null?W=bn(W):(W=on(a)?es:Bt.current,W=Hs(s,W));var oe=a.getDerivedStateFromProps,ue=typeof oe=="function"||typeof w.getSnapshotBeforeUpdate=="function";ue||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(x!==c||O!==W)&&vp(s,w,c,W),pi=!1;var se=s.memoizedState;w.state=se,Sl(s,c,w,f),O=s.memoizedState,x!==c||se!==O||sn.current||pi?(typeof oe=="function"&&(qc(s,a,oe,c),O=s.memoizedState),(x=pi||gp(s,a,x,c,se,O,W))?(ue||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=O),w.props=c,w.state=O,w.context=W,c=x):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,Hd(n,s),x=s.memoizedProps,W=s.type===s.elementType?x:tr(s.type,x),w.props=W,ue=s.pendingProps,se=w.context,O=a.contextType,typeof O=="object"&&O!==null?O=bn(O):(O=on(a)?es:Bt.current,O=Hs(s,O));var me=a.getDerivedStateFromProps;(oe=typeof me=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(x!==ue||se!==O)&&vp(s,w,c,O),pi=!1,se=s.memoizedState,w.state=se,Sl(s,c,w,f);var Ee=s.memoizedState;x!==ue||se!==Ee||sn.current||pi?(typeof me=="function"&&(qc(s,a,me,c),Ee=s.memoizedState),(W=pi||gp(s,a,W,c,se,Ee,O)||!1)?(oe||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,Ee,O),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,Ee,O)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||x===n.memoizedProps&&se===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&se===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=Ee),w.props=c,w.state=Ee,w.context=O,c=W):(typeof w.componentDidUpdate!="function"||x===n.memoizedProps&&se===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&se===n.memoizedState||(s.flags|=1024),c=!1)}return Xc(n,s,a,c,m,f)}function Xc(n,s,a,c,f,m){kp(n,s);var w=(s.flags&128)!==0;if(!c&&!w)return f&&Dd(s,a,!1),$r(n,s,m);c=s.stateNode,SE.current=s;var x=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&w?(s.child=Gs(s,n.child,null,m),s.child=Gs(s,null,x,m)):Jt(n,s,x,m),s.memoizedState=c.state,f&&Dd(s,a,!0),s.child}function Ap(n){var s=n.stateNode;s.pendingContext?Rd(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Rd(n,s.context,!1),bc(n,s.containerInfo)}function xp(n,s,a,c,f){return Ks(),kc(f),s.flags|=256,Jt(n,s,a,c),s.child}var Yc={dehydrated:null,treeContext:null,retryLane:0};function Jc(n){return{baseLanes:n,cachePool:null,transitions:null}}function Rp(n,s,a){var c=s.pendingProps,f=dt.current,m=!1,w=(s.flags&128)!==0,x;if((x=w)||(x=n!==null&&n.memoizedState===null?!1:(f&2)!==0),x?(m=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),st(dt,f&1),n===null)return Ic(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,n=c.fallback,m?(c=s.mode,m=s.child,w={mode:"hidden",children:w},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=w):m=$l(w,c,0,null),n=cs(n,c,a,null),m.return=s,n.return=s,m.sibling=n,s.child=m,s.child.memoizedState=Jc(a),s.memoizedState=Yc,n):eh(s,w));if(f=n.memoizedState,f!==null&&(x=f.dehydrated,x!==null))return CE(n,s,w,c,x,f,a);if(m){m=c.fallback,w=s.mode,f=n.child,x=f.sibling;var O={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==f?(c=s.child,c.childLanes=0,c.pendingProps=O,s.deletions=null):(c=wi(f,O),c.subtreeFlags=f.subtreeFlags&14680064),x!==null?m=wi(x,m):(m=cs(m,w,a,null),m.flags|=2),m.return=s,c.return=s,c.sibling=m,s.child=c,c=m,m=s.child,w=n.child.memoizedState,w=w===null?Jc(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},m.memoizedState=w,m.childLanes=n.childLanes&~a,s.memoizedState=Yc,c}return m=n.child,n=m.sibling,c=wi(m,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function eh(n,s){return s=$l({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function xl(n,s,a,c){return c!==null&&kc(c),Gs(s,n.child,null,a),n=eh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function CE(n,s,a,c,f,m,w){if(a)return s.flags&256?(s.flags&=-257,c=Gc(Error(t(422))),xl(n,s,w,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(m=c.fallback,f=s.mode,c=$l({mode:"visible",children:c.children},f,0,null),m=cs(m,f,w,null),m.flags|=2,c.return=s,m.return=s,c.sibling=m,s.child=c,(s.mode&1)!==0&&Gs(s,n.child,null,w),s.child.memoizedState=Jc(w),s.memoizedState=Yc,m);if((s.mode&1)===0)return xl(n,s,w,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var x=c.dgst;return c=x,m=Error(t(419)),c=Gc(m,c,void 0),xl(n,s,w,c)}if(x=(w&n.childLanes)!==0,an||x){if(c=Mt,c!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(c.suspendedLanes|w))!==0?0:f,f!==0&&f!==m.retryLane&&(m.retryLane=f,zr(n,f),ir(c,n,f,-1))}return mh(),c=Gc(Error(t(421))),xl(n,s,w,c)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=VE.bind(null,n),f._reactRetry=s,null):(n=m.treeContext,En=ci(f.nextSibling),_n=s,ht=!0,er=null,n!==null&&(Mn[Dn++]=jr,Mn[Dn++]=Ur,Mn[Dn++]=ts,jr=n.id,Ur=n.overflow,ts=s),s=eh(s,c.children),s.flags|=4096,s)}function Mp(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Rc(n.return,s,a)}function th(n,s,a,c,f){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=f)}function Dp(n,s,a){var c=s.pendingProps,f=c.revealOrder,m=c.tail;if(Jt(n,s,c.children,a),c=dt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Mp(n,a,s);else if(n.tag===19)Mp(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(st(dt,c),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&Cl(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),th(s,!1,f,a,m);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Cl(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}th(s,!0,a,null,m);break;case"together":th(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Rl(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function $r(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),os|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=wi(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=wi(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function TE(n,s,a){switch(s.tag){case 3:Ap(s),Ks();break;case 5:Kd(s);break;case 1:on(s.type)&&dl(s);break;case 4:bc(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,f=s.memoizedProps.value;st(_l,c._currentValue),c._currentValue=f;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(st(dt,dt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Rp(n,s,a):(st(dt,dt.current&1),n=$r(n,s,a),n!==null?n.sibling:null);st(dt,dt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return Dp(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),st(dt,dt.current),c)break;return null;case 22:case 23:return s.lanes=0,Ip(n,s,a)}return $r(n,s,a)}var bp,nh,Op,Vp;bp=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},nh=function(){},Op=function(n,s,a,c){var f=n.memoizedProps;if(f!==c){n=s.stateNode,is(Sr.current);var m=null;switch(a){case"input":f=ot(n,f),c=ot(n,c),m=[];break;case"select":f=ie({},f,{value:void 0}),c=ie({},c,{value:void 0}),m=[];break;case"textarea":f=Zr(n,f),c=Zr(n,c),m=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=cl)}Jr(a,c);var w;a=null;for(W in f)if(!c.hasOwnProperty(W)&&f.hasOwnProperty(W)&&f[W]!=null)if(W==="style"){var x=f[W];for(w in x)x.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(o.hasOwnProperty(W)?m||(m=[]):(m=m||[]).push(W,null));for(W in c){var O=c[W];if(x=f!=null?f[W]:void 0,c.hasOwnProperty(W)&&O!==x&&(O!=null||x!=null))if(W==="style")if(x){for(w in x)!x.hasOwnProperty(w)||O&&O.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in O)O.hasOwnProperty(w)&&x[w]!==O[w]&&(a||(a={}),a[w]=O[w])}else a||(m||(m=[]),m.push(W,a)),a=O;else W==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,x=x?x.__html:void 0,O!=null&&x!==O&&(m=m||[]).push(W,O)):W==="children"?typeof O!="string"&&typeof O!="number"||(m=m||[]).push(W,""+O):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(o.hasOwnProperty(W)?(O!=null&&W==="onScroll"&&at("scroll",n),m||x===O||(m=[])):(m=m||[]).push(W,O))}a&&(m=m||[]).push("style",a);var W=m;(s.updateQueue=W)&&(s.flags|=4)}},Vp=function(n,s,a,c){a!==c&&(s.flags|=4)};function ra(n,s){if(!ht)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ht(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function LE(n,s,a){var c=s.pendingProps;switch(Tc(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(s),null;case 1:return on(s.type)&&fl(),Ht(s),null;case 3:return c=s.stateNode,Xs(),lt(sn),lt(Bt),Nc(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(vl(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,er!==null&&(dh(er),er=null))),nh(n,s),Ht(s),null;case 5:Oc(s);var f=is(Yo.current);if(a=s.type,n!==null&&s.stateNode!=null)Op(n,s,a,c,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Ht(s),null}if(n=is(Sr.current),vl(s)){c=s.stateNode,a=s.type;var m=s.memoizedProps;switch(c[wr]=s,c[Ko]=m,n=(s.mode&1)!==0,a){case"dialog":at("cancel",c),at("close",c);break;case"iframe":case"object":case"embed":at("load",c);break;case"video":case"audio":for(f=0;f<Ho.length;f++)at(Ho[f],c);break;case"source":at("error",c);break;case"img":case"image":case"link":at("error",c),at("load",c);break;case"details":at("toggle",c);break;case"input":Ne(c,m),at("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},at("invalid",c);break;case"textarea":Un(c,m),at("invalid",c)}Jr(a,m),f=null;for(var w in m)if(m.hasOwnProperty(w)){var x=m[w];w==="children"?typeof x=="string"?c.textContent!==x&&(m.suppressHydrationWarning!==!0&&ul(c.textContent,x,n),f=["children",x]):typeof x=="number"&&c.textContent!==""+x&&(m.suppressHydrationWarning!==!0&&ul(c.textContent,x,n),f=["children",""+x]):o.hasOwnProperty(w)&&x!=null&&w==="onScroll"&&at("scroll",c)}switch(a){case"input":ye(c),Ui(c,m,!0);break;case"textarea":ye(c),Xr(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=cl)}c=f,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=mt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[wr]=s,n[Ko]=c,bp(n,s,!1,!1),s.stateNode=n;e:{switch(w=hr(a,c),a){case"dialog":at("cancel",n),at("close",n),f=c;break;case"iframe":case"object":case"embed":at("load",n),f=c;break;case"video":case"audio":for(f=0;f<Ho.length;f++)at(Ho[f],n);f=c;break;case"source":at("error",n),f=c;break;case"img":case"image":case"link":at("error",n),at("load",n),f=c;break;case"details":at("toggle",n),f=c;break;case"input":Ne(n,c),f=ot(n,c),at("invalid",n);break;case"option":f=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},f=ie({},c,{value:void 0}),at("invalid",n);break;case"textarea":Un(n,c),f=Zr(n,c),at("invalid",n);break;default:f=c}Jr(a,f),x=f;for(m in x)if(x.hasOwnProperty(m)){var O=x[m];m==="style"?Yr(n,O):m==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&ar(n,O)):m==="children"?typeof O=="string"?(a!=="textarea"||O!=="")&&zn(n,O):typeof O=="number"&&zn(n,""+O):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?O!=null&&m==="onScroll"&&at("scroll",n):O!=null&&le(n,m,O,w))}switch(a){case"input":ye(n),Ui(n,c,!1);break;case"textarea":ye(n),Xr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+de(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?tn(n,!!c.multiple,m,!1):c.defaultValue!=null&&tn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=cl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ht(s),null;case 6:if(n&&s.stateNode!=null)Vp(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=is(Yo.current),is(Sr.current),vl(s)){if(c=s.stateNode,a=s.memoizedProps,c[wr]=s,(m=c.nodeValue!==a)&&(n=_n,n!==null))switch(n.tag){case 3:ul(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ul(c.nodeValue,a,(n.mode&1)!==0)}m&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[wr]=s,s.stateNode=c}return Ht(s),null;case 13:if(lt(dt),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ht&&En!==null&&(s.mode&1)!==0&&(s.flags&128)===0)jd(),Ks(),s.flags|=98560,m=!1;else if(m=vl(s),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[wr]=s}else Ks(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ht(s),m=!1}else er!==null&&(dh(er),er=null),m=!0;if(!m)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(dt.current&1)!==0?Lt===0&&(Lt=3):mh())),s.updateQueue!==null&&(s.flags|=4),Ht(s),null);case 4:return Xs(),nh(n,s),n===null&&Wo(s.stateNode.containerInfo),Ht(s),null;case 10:return xc(s.type._context),Ht(s),null;case 17:return on(s.type)&&fl(),Ht(s),null;case 19:if(lt(dt),m=s.memoizedState,m===null)return Ht(s),null;if(c=(s.flags&128)!==0,w=m.rendering,w===null)if(c)ra(m,!1);else{if(Lt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=Cl(n),w!==null){for(s.flags|=128,ra(m,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)m=a,n=c,m.flags&=14680066,w=m.alternate,w===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=w.childLanes,m.lanes=w.lanes,m.child=w.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=w.memoizedProps,m.memoizedState=w.memoizedState,m.updateQueue=w.updateQueue,m.type=w.type,n=w.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return st(dt,dt.current&1|2),s.child}n=n.sibling}m.tail!==null&&it()>to&&(s.flags|=128,c=!0,ra(m,!1),s.lanes=4194304)}else{if(!c)if(n=Cl(w),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),ra(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!ht)return Ht(s),null}else 2*it()-m.renderingStartTime>to&&a!==1073741824&&(s.flags|=128,c=!0,ra(m,!1),s.lanes=4194304);m.isBackwards?(w.sibling=s.child,s.child=w):(a=m.last,a!==null?a.sibling=w:s.child=w,m.last=w)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=it(),s.sibling=null,a=dt.current,st(dt,c?a&1|2:a&1),s):(Ht(s),null);case 22:case 23:return gh(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(wn&1073741824)!==0&&(Ht(s),s.subtreeFlags&6&&(s.flags|=8192)):Ht(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function IE(n,s){switch(Tc(s),s.tag){case 1:return on(s.type)&&fl(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Xs(),lt(sn),lt(Bt),Nc(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Oc(s),null;case 13:if(lt(dt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Ks()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return lt(dt),null;case 4:return Xs(),null;case 10:return xc(s.type._context),null;case 22:case 23:return gh(),null;case 24:return null;default:return null}}var Ml=!1,Wt=!1,kE=typeof WeakSet=="function"?WeakSet:Set,_e=null;function Js(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){vt(n,s,c)}else a.current=null}function rh(n,s,a){try{a()}catch(c){vt(n,s,c)}}var Np=!1;function PE(n,s){if(gc=ai,n=gd(),ac(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var w=0,x=-1,O=-1,W=0,oe=0,ue=n,se=null;t:for(;;){for(var me;ue!==a||f!==0&&ue.nodeType!==3||(x=w+f),ue!==m||c!==0&&ue.nodeType!==3||(O=w+c),ue.nodeType===3&&(w+=ue.nodeValue.length),(me=ue.firstChild)!==null;)se=ue,ue=me;for(;;){if(ue===n)break t;if(se===a&&++W===f&&(x=w),se===m&&++oe===c&&(O=w),(me=ue.nextSibling)!==null)break;ue=se,se=ue.parentNode}ue=me}a=x===-1||O===-1?null:{start:x,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(mc={focusedElem:n,selectionRange:a},ai=!1,_e=s;_e!==null;)if(s=_e,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,_e=n;else for(;_e!==null;){s=_e;try{var Ee=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ee!==null){var we=Ee.memoizedProps,yt=Ee.memoizedState,z=s.stateNode,F=z.getSnapshotBeforeUpdate(s.elementType===s.type?we:tr(s.type,we),yt);z.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var B=s.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ce){vt(s,s.return,ce)}if(n=s.sibling,n!==null){n.return=s.return,_e=n;break}_e=s.return}return Ee=Np,Np=!1,Ee}function ia(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&n)===n){var m=f.destroy;f.destroy=void 0,m!==void 0&&rh(s,a,m)}f=f.next}while(f!==c)}}function Dl(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function ih(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function Fp(n){var s=n.alternate;s!==null&&(n.alternate=null,Fp(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[wr],delete s[Ko],delete s[Ec],delete s[cE],delete s[hE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function jp(n){return n.tag===5||n.tag===3||n.tag===4}function Up(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||jp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function sh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=cl));else if(c!==4&&(n=n.child,n!==null))for(sh(n,s,a),n=n.sibling;n!==null;)sh(n,s,a),n=n.sibling}function oh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(oh(n,s,a),n=n.sibling;n!==null;)oh(n,s,a),n=n.sibling}var Nt=null,nr=!1;function mi(n,s,a){for(a=a.child;a!==null;)zp(n,s,a),a=a.sibling}function zp(n,s,a){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(qi,a)}catch{}switch(a.tag){case 5:Wt||Js(a,s);case 6:var c=Nt,f=nr;Nt=null,mi(n,s,a),Nt=c,nr=f,Nt!==null&&(nr?(n=Nt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Nt.removeChild(a.stateNode));break;case 18:Nt!==null&&(nr?(n=Nt,a=a.stateNode,n.nodeType===8?_c(n.parentNode,a):n.nodeType===1&&_c(n,a),Xn(n)):_c(Nt,a.stateNode));break;case 4:c=Nt,f=nr,Nt=a.stateNode.containerInfo,nr=!0,mi(n,s,a),Nt=c,nr=f;break;case 0:case 11:case 14:case 15:if(!Wt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var m=f,w=m.destroy;m=m.tag,w!==void 0&&((m&2)!==0||(m&4)!==0)&&rh(a,s,w),f=f.next}while(f!==c)}mi(n,s,a);break;case 1:if(!Wt&&(Js(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(x){vt(a,s,x)}mi(n,s,a);break;case 21:mi(n,s,a);break;case 22:a.mode&1?(Wt=(c=Wt)||a.memoizedState!==null,mi(n,s,a),Wt=c):mi(n,s,a);break;default:mi(n,s,a)}}function Bp(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new kE),s.forEach(function(c){var f=NE.bind(null,n,c);a.has(c)||(a.add(c),c.then(f,f))})}}function rr(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var m=n,w=s,x=w;e:for(;x!==null;){switch(x.tag){case 5:Nt=x.stateNode,nr=!1;break e;case 3:Nt=x.stateNode.containerInfo,nr=!0;break e;case 4:Nt=x.stateNode.containerInfo,nr=!0;break e}x=x.return}if(Nt===null)throw Error(t(160));zp(m,w,f),Nt=null,nr=!1;var O=f.alternate;O!==null&&(O.return=null),f.return=null}catch(W){vt(f,s,W)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)$p(s,n),s=s.sibling}function $p(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(rr(s,n),Tr(n),c&4){try{ia(3,n,n.return),Dl(3,n)}catch(we){vt(n,n.return,we)}try{ia(5,n,n.return)}catch(we){vt(n,n.return,we)}}break;case 1:rr(s,n),Tr(n),c&512&&a!==null&&Js(a,a.return);break;case 5:if(rr(s,n),Tr(n),c&512&&a!==null&&Js(a,a.return),n.flags&32){var f=n.stateNode;try{zn(f,"")}catch(we){vt(n,n.return,we)}}if(c&4&&(f=n.stateNode,f!=null)){var m=n.memoizedProps,w=a!==null?a.memoizedProps:m,x=n.type,O=n.updateQueue;if(n.updateQueue=null,O!==null)try{x==="input"&&m.type==="radio"&&m.name!=null&&Qt(f,m),hr(x,w);var W=hr(x,m);for(w=0;w<O.length;w+=2){var oe=O[w],ue=O[w+1];oe==="style"?Yr(f,ue):oe==="dangerouslySetInnerHTML"?ar(f,ue):oe==="children"?zn(f,ue):le(f,oe,ue,W)}switch(x){case"input":or(f,m);break;case"textarea":xr(f,m);break;case"select":var se=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!m.multiple;var me=m.value;me!=null?tn(f,!!m.multiple,me,!1):se!==!!m.multiple&&(m.defaultValue!=null?tn(f,!!m.multiple,m.defaultValue,!0):tn(f,!!m.multiple,m.multiple?[]:"",!1))}f[Ko]=m}catch(we){vt(n,n.return,we)}}break;case 6:if(rr(s,n),Tr(n),c&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,m=n.memoizedProps;try{f.nodeValue=m}catch(we){vt(n,n.return,we)}}break;case 3:if(rr(s,n),Tr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Xn(s.containerInfo)}catch(we){vt(n,n.return,we)}break;case 4:rr(s,n),Tr(n);break;case 13:rr(s,n),Tr(n),f=n.child,f.flags&8192&&(m=f.memoizedState!==null,f.stateNode.isHidden=m,!m||f.alternate!==null&&f.alternate.memoizedState!==null||(uh=it())),c&4&&Bp(n);break;case 22:if(oe=a!==null&&a.memoizedState!==null,n.mode&1?(Wt=(W=Wt)||oe,rr(s,n),Wt=W):rr(s,n),Tr(n),c&8192){if(W=n.memoizedState!==null,(n.stateNode.isHidden=W)&&!oe&&(n.mode&1)!==0)for(_e=n,oe=n.child;oe!==null;){for(ue=_e=oe;_e!==null;){switch(se=_e,me=se.child,se.tag){case 0:case 11:case 14:case 15:ia(4,se,se.return);break;case 1:Js(se,se.return);var Ee=se.stateNode;if(typeof Ee.componentWillUnmount=="function"){c=se,a=se.return;try{s=c,Ee.props=s.memoizedProps,Ee.state=s.memoizedState,Ee.componentWillUnmount()}catch(we){vt(c,a,we)}}break;case 5:Js(se,se.return);break;case 22:if(se.memoizedState!==null){qp(ue);continue}}me!==null?(me.return=se,_e=me):qp(ue)}oe=oe.sibling}e:for(oe=null,ue=n;;){if(ue.tag===5){if(oe===null){oe=ue;try{f=ue.stateNode,W?(m=f.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(x=ue.stateNode,O=ue.memoizedProps.style,w=O!=null&&O.hasOwnProperty("display")?O.display:null,x.style.display=ur("display",w))}catch(we){vt(n,n.return,we)}}}else if(ue.tag===6){if(oe===null)try{ue.stateNode.nodeValue=W?"":ue.memoizedProps}catch(we){vt(n,n.return,we)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===n)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===n)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===n)break e;oe===ue&&(oe=null),ue=ue.return}oe===ue&&(oe=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:rr(s,n),Tr(n),c&4&&Bp(n);break;case 21:break;default:rr(s,n),Tr(n)}}function Tr(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(jp(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(zn(f,""),c.flags&=-33);var m=Up(n);oh(n,m,f);break;case 3:case 4:var w=c.stateNode.containerInfo,x=Up(n);sh(n,x,w);break;default:throw Error(t(161))}}catch(O){vt(n,n.return,O)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function AE(n,s,a){_e=n,Hp(n)}function Hp(n,s,a){for(var c=(n.mode&1)!==0;_e!==null;){var f=_e,m=f.child;if(f.tag===22&&c){var w=f.memoizedState!==null||Ml;if(!w){var x=f.alternate,O=x!==null&&x.memoizedState!==null||Wt;x=Ml;var W=Wt;if(Ml=w,(Wt=O)&&!W)for(_e=f;_e!==null;)w=_e,O=w.child,w.tag===22&&w.memoizedState!==null?Kp(f):O!==null?(O.return=w,_e=O):Kp(f);for(;m!==null;)_e=m,Hp(m),m=m.sibling;_e=f,Ml=x,Wt=W}Wp(n)}else(f.subtreeFlags&8772)!==0&&m!==null?(m.return=f,_e=m):Wp(n)}}function Wp(n){for(;_e!==null;){var s=_e;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Wt||Dl(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Wt)if(a===null)c.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:tr(s.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=s.updateQueue;m!==null&&qd(s,m,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}qd(s,w,a)}break;case 5:var x=s.stateNode;if(a===null&&s.flags&4){a=x;var O=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&a.focus();break;case"img":O.src&&(a.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var W=s.alternate;if(W!==null){var oe=W.memoizedState;if(oe!==null){var ue=oe.dehydrated;ue!==null&&Xn(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Wt||s.flags&512&&ih(s)}catch(se){vt(s,s.return,se)}}if(s===n){_e=null;break}if(a=s.sibling,a!==null){a.return=s.return,_e=a;break}_e=s.return}}function qp(n){for(;_e!==null;){var s=_e;if(s===n){_e=null;break}var a=s.sibling;if(a!==null){a.return=s.return,_e=a;break}_e=s.return}}function Kp(n){for(;_e!==null;){var s=_e;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Dl(4,s)}catch(O){vt(s,a,O)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var f=s.return;try{c.componentDidMount()}catch(O){vt(s,f,O)}}var m=s.return;try{ih(s)}catch(O){vt(s,m,O)}break;case 5:var w=s.return;try{ih(s)}catch(O){vt(s,w,O)}}}catch(O){vt(s,s.return,O)}if(s===n){_e=null;break}var x=s.sibling;if(x!==null){x.return=s.return,_e=x;break}_e=s.return}}var xE=Math.ceil,bl=K.ReactCurrentDispatcher,ah=K.ReactCurrentOwner,Vn=K.ReactCurrentBatchConfig,Ze=0,Mt=null,wt=null,Ft=0,wn=0,eo=hi(0),Lt=0,sa=null,os=0,Ol=0,lh=0,oa=null,ln=null,uh=0,to=1/0,Hr=null,Vl=!1,ch=null,vi=null,Nl=!1,yi=null,Fl=0,aa=0,hh=null,jl=-1,Ul=0;function en(){return(Ze&6)!==0?it():jl!==-1?jl:jl=it()}function _i(n){return(n.mode&1)===0?1:(Ze&2)!==0&&Ft!==0?Ft&-Ft:dE.transition!==null?(Ul===0&&(Ul=Gi()),Ul):(n=We,n!==0||(n=window.event,n=n===void 0?16:Oo(n.type)),n)}function ir(n,s,a,c){if(50<aa)throw aa=0,hh=null,Error(t(185));ri(n,a,c),((Ze&2)===0||n!==Mt)&&(n===Mt&&((Ze&2)===0&&(Ol|=a),Lt===4&&Ei(n,Ft)),un(n,c),a===1&&Ze===0&&(s.mode&1)===0&&(to=it()+500,pl&&di()))}function un(n,s){var a=n.callbackNode;Mr(n,s);var c=Ki(n,n===Mt?Ft:0);if(c===0)a!==null&&xo(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&xo(a),s===1)n.tag===0?fE(Qp.bind(null,n)):bd(Qp.bind(null,n)),lE(function(){(Ze&6)===0&&di()}),a=null;else{switch(si(c)){case 1:a=Wi;break;case 4:a=ei;break;case 16:a=An;break;case 536870912:a=Ua;break;default:a=An}a=rg(a,Gp.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function Gp(n,s){if(jl=-1,Ul=0,(Ze&6)!==0)throw Error(t(327));var a=n.callbackNode;if(no()&&n.callbackNode!==a)return null;var c=Ki(n,n===Mt?Ft:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=zl(n,c);else{s=c;var f=Ze;Ze|=2;var m=Xp();(Mt!==n||Ft!==s)&&(Hr=null,to=it()+500,ls(n,s));do try{DE();break}catch(x){Zp(n,x)}while(!0);Ac(),bl.current=m,Ze=f,wt!==null?s=0:(Mt=null,Ft=0,s=Lt)}if(s!==0){if(s===2&&(f=mn(n),f!==0&&(c=f,s=fh(n,f))),s===1)throw a=sa,ls(n,0),Ei(n,c),un(n,it()),a;if(s===6)Ei(n,c);else{if(f=n.current.alternate,(c&30)===0&&!RE(f)&&(s=zl(n,c),s===2&&(m=mn(n),m!==0&&(c=m,s=fh(n,m))),s===1))throw a=sa,ls(n,0),Ei(n,c),un(n,it()),a;switch(n.finishedWork=f,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:us(n,ln,Hr);break;case 3:if(Ei(n,c),(c&130023424)===c&&(s=uh+500-it(),10<s)){if(Ki(n,0)!==0)break;if(f=n.suspendedLanes,(f&c)!==c){en(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=yc(us.bind(null,n,ln,Hr),s);break}us(n,ln,Hr);break;case 4:if(Ei(n,c),(c&4194240)===c)break;for(s=n.eventTimes,f=-1;0<c;){var w=31-Xt(c);m=1<<w,w=s[w],w>f&&(f=w),c&=~m}if(c=f,c=it()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*xE(c/1960))-c,10<c){n.timeoutHandle=yc(us.bind(null,n,ln,Hr),c);break}us(n,ln,Hr);break;case 5:us(n,ln,Hr);break;default:throw Error(t(329))}}}return un(n,it()),n.callbackNode===a?Gp.bind(null,n):null}function fh(n,s){var a=oa;return n.current.memoizedState.isDehydrated&&(ls(n,s).flags|=256),n=zl(n,s),n!==2&&(s=ln,ln=a,s!==null&&dh(s)),n}function dh(n){ln===null?ln=n:ln.push.apply(ln,n)}function RE(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],m=f.getSnapshot;f=f.value;try{if(!Jn(m(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ei(n,s){for(s&=~lh,s&=~Ol,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-Xt(s),c=1<<a;n[a]=-1,s&=~c}}function Qp(n){if((Ze&6)!==0)throw Error(t(327));no();var s=Ki(n,0);if((s&1)===0)return un(n,it()),null;var a=zl(n,s);if(n.tag!==0&&a===2){var c=mn(n);c!==0&&(s=c,a=fh(n,c))}if(a===1)throw a=sa,ls(n,0),Ei(n,s),un(n,it()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,us(n,ln,Hr),un(n,it()),null}function ph(n,s){var a=Ze;Ze|=1;try{return n(s)}finally{Ze=a,Ze===0&&(to=it()+500,pl&&di())}}function as(n){yi!==null&&yi.tag===0&&(Ze&6)===0&&no();var s=Ze;Ze|=1;var a=Vn.transition,c=We;try{if(Vn.transition=null,We=1,n)return n()}finally{We=c,Vn.transition=a,Ze=s,(Ze&6)===0&&di()}}function gh(){wn=eo.current,lt(eo)}function ls(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,aE(a)),wt!==null)for(a=wt.return;a!==null;){var c=a;switch(Tc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&fl();break;case 3:Xs(),lt(sn),lt(Bt),Nc();break;case 5:Oc(c);break;case 4:Xs();break;case 13:lt(dt);break;case 19:lt(dt);break;case 10:xc(c.type._context);break;case 22:case 23:gh()}a=a.return}if(Mt=n,wt=n=wi(n.current,null),Ft=wn=s,Lt=0,sa=null,lh=Ol=os=0,ln=oa=null,rs!==null){for(s=0;s<rs.length;s++)if(a=rs[s],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,m=a.pending;if(m!==null){var w=m.next;m.next=f,c.next=w}a.pending=c}rs=null}return n}function Zp(n,s){do{var a=wt;try{if(Ac(),Tl.current=Pl,Ll){for(var c=pt.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Ll=!1}if(ss=0,Rt=Tt=pt=null,Jo=!1,ea=0,ah.current=null,a===null||a.return===null){Lt=1,sa=s,wt=null;break}e:{var m=n,w=a.return,x=a,O=s;if(s=Ft,x.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var W=O,oe=x,ue=oe.tag;if((oe.mode&1)===0&&(ue===0||ue===11||ue===15)){var se=oe.alternate;se?(oe.updateQueue=se.updateQueue,oe.memoizedState=se.memoizedState,oe.lanes=se.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var me=wp(w);if(me!==null){me.flags&=-257,Sp(me,w,x,m,s),me.mode&1&&Ep(m,W,s),s=me,O=W;var Ee=s.updateQueue;if(Ee===null){var we=new Set;we.add(O),s.updateQueue=we}else Ee.add(O);break e}else{if((s&1)===0){Ep(m,W,s),mh();break e}O=Error(t(426))}}else if(ht&&x.mode&1){var yt=wp(w);if(yt!==null){(yt.flags&65536)===0&&(yt.flags|=256),Sp(yt,w,x,m,s),kc(Ys(O,x));break e}}m=O=Ys(O,x),Lt!==4&&(Lt=2),oa===null?oa=[m]:oa.push(m),m=w;do{switch(m.tag){case 3:m.flags|=65536,s&=-s,m.lanes|=s;var z=yp(m,O,s);Wd(m,z);break e;case 1:x=O;var F=m.type,B=m.stateNode;if((m.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(vi===null||!vi.has(B)))){m.flags|=65536,s&=-s,m.lanes|=s;var ce=_p(m,x,s);Wd(m,ce);break e}}m=m.return}while(m!==null)}Jp(a)}catch(Te){s=Te,wt===a&&a!==null&&(wt=a=a.return);continue}break}while(!0)}function Xp(){var n=bl.current;return bl.current=Pl,n===null?Pl:n}function mh(){(Lt===0||Lt===3||Lt===2)&&(Lt=4),Mt===null||(os&268435455)===0&&(Ol&268435455)===0||Ei(Mt,Ft)}function zl(n,s){var a=Ze;Ze|=2;var c=Xp();(Mt!==n||Ft!==s)&&(Hr=null,ls(n,s));do try{ME();break}catch(f){Zp(n,f)}while(!0);if(Ac(),Ze=a,bl.current=c,wt!==null)throw Error(t(261));return Mt=null,Ft=0,Lt}function ME(){for(;wt!==null;)Yp(wt)}function DE(){for(;wt!==null&&!Fa();)Yp(wt)}function Yp(n){var s=ng(n.alternate,n,wn);n.memoizedProps=n.pendingProps,s===null?Jp(n):wt=s,ah.current=null}function Jp(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=LE(a,s,wn),a!==null){wt=a;return}}else{if(a=IE(a,s),a!==null){a.flags&=32767,wt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Lt=6,wt=null;return}}if(s=s.sibling,s!==null){wt=s;return}wt=s=n}while(s!==null);Lt===0&&(Lt=5)}function us(n,s,a){var c=We,f=Vn.transition;try{Vn.transition=null,We=1,bE(n,s,a,c)}finally{Vn.transition=f,We=c}return null}function bE(n,s,a,c){do no();while(yi!==null);if((Ze&6)!==0)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(rt(n,m),n===Mt&&(wt=Mt=null,Ft=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Nl||(Nl=!0,rg(An,function(){return no(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=Vn.transition,Vn.transition=null;var w=We;We=1;var x=Ze;Ze|=4,ah.current=null,PE(n,a),$p(a,n),eE(mc),ai=!!gc,mc=gc=null,n.current=a,AE(a),Ju(),Ze=x,We=w,Vn.transition=m}else n.current=a;if(Nl&&(Nl=!1,yi=n,Fl=f),m=n.pendingLanes,m===0&&(vi=null),za(a.stateNode),un(n,it()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)f=s[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(Vl)throw Vl=!1,n=ch,ch=null,n;return(Fl&1)!==0&&n.tag!==0&&no(),m=n.pendingLanes,(m&1)!==0?n===hh?aa++:(aa=0,hh=n):aa=0,di(),null}function no(){if(yi!==null){var n=si(Fl),s=Vn.transition,a=We;try{if(Vn.transition=null,We=16>n?16:n,yi===null)var c=!1;else{if(n=yi,yi=null,Fl=0,(Ze&6)!==0)throw Error(t(331));var f=Ze;for(Ze|=4,_e=n.current;_e!==null;){var m=_e,w=m.child;if((_e.flags&16)!==0){var x=m.deletions;if(x!==null){for(var O=0;O<x.length;O++){var W=x[O];for(_e=W;_e!==null;){var oe=_e;switch(oe.tag){case 0:case 11:case 15:ia(8,oe,m)}var ue=oe.child;if(ue!==null)ue.return=oe,_e=ue;else for(;_e!==null;){oe=_e;var se=oe.sibling,me=oe.return;if(Fp(oe),oe===W){_e=null;break}if(se!==null){se.return=me,_e=se;break}_e=me}}}var Ee=m.alternate;if(Ee!==null){var we=Ee.child;if(we!==null){Ee.child=null;do{var yt=we.sibling;we.sibling=null,we=yt}while(we!==null)}}_e=m}}if((m.subtreeFlags&2064)!==0&&w!==null)w.return=m,_e=w;else e:for(;_e!==null;){if(m=_e,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:ia(9,m,m.return)}var z=m.sibling;if(z!==null){z.return=m.return,_e=z;break e}_e=m.return}}var F=n.current;for(_e=F;_e!==null;){w=_e;var B=w.child;if((w.subtreeFlags&2064)!==0&&B!==null)B.return=w,_e=B;else e:for(w=F;_e!==null;){if(x=_e,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:Dl(9,x)}}catch(Te){vt(x,x.return,Te)}if(x===w){_e=null;break e}var ce=x.sibling;if(ce!==null){ce.return=x.return,_e=ce;break e}_e=x.return}}if(Ze=f,di(),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(qi,n)}catch{}c=!0}return c}finally{We=a,Vn.transition=s}}return!1}function eg(n,s,a){s=Ys(a,s),s=yp(n,s,1),n=gi(n,s,1),s=en(),n!==null&&(ri(n,1,s),un(n,s))}function vt(n,s,a){if(n.tag===3)eg(n,n,a);else for(;s!==null;){if(s.tag===3){eg(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(vi===null||!vi.has(c))){n=Ys(a,n),n=_p(s,n,1),s=gi(s,n,1),n=en(),s!==null&&(ri(s,1,n),un(s,n));break}}s=s.return}}function OE(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=en(),n.pingedLanes|=n.suspendedLanes&a,Mt===n&&(Ft&a)===a&&(Lt===4||Lt===3&&(Ft&130023424)===Ft&&500>it()-uh?ls(n,0):lh|=a),un(n,s)}function tg(n,s){s===0&&((n.mode&1)===0?s=1:(s=Ls,Ls<<=1,(Ls&130023424)===0&&(Ls=4194304)));var a=en();n=zr(n,s),n!==null&&(ri(n,s,a),un(n,a))}function VE(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),tg(n,a)}function NE(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),tg(n,a)}var ng;ng=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||sn.current)an=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return an=!1,TE(n,s,a);an=(n.flags&131072)!==0}else an=!1,ht&&(s.flags&1048576)!==0&&Od(s,ml,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Rl(n,s),n=s.pendingProps;var f=Hs(s,Bt.current);Zs(s,a),f=Uc(null,s,c,n,f,a);var m=zc();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,on(c)?(m=!0,dl(s)):m=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Dc(s),f.updater=Al,s.stateNode=f,f._reactInternals=s,Kc(s,c,n,a),s=Xc(null,s,c,!0,m,a)):(s.tag=0,ht&&m&&Cc(s),Jt(null,s,f,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Rl(n,s),n=s.pendingProps,f=c._init,c=f(c._payload),s.type=c,f=s.tag=jE(c),n=tr(c,n),f){case 0:s=Zc(null,s,c,n,a);break e;case 1:s=Pp(null,s,c,n,a);break e;case 11:s=Cp(null,s,c,n,a);break e;case 14:s=Tp(null,s,c,tr(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:tr(c,f),Zc(n,s,c,f,a);case 1:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:tr(c,f),Pp(n,s,c,f,a);case 3:e:{if(Ap(s),n===null)throw Error(t(387));c=s.pendingProps,m=s.memoizedState,f=m.element,Hd(n,s),Sl(s,c,null,a);var w=s.memoizedState;if(c=w.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){f=Ys(Error(t(423)),s),s=xp(n,s,c,a,f);break e}else if(c!==f){f=Ys(Error(t(424)),s),s=xp(n,s,c,a,f);break e}else for(En=ci(s.stateNode.containerInfo.firstChild),_n=s,ht=!0,er=null,a=Bd(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ks(),c===f){s=$r(n,s,a);break e}Jt(n,s,c,a)}s=s.child}return s;case 5:return Kd(s),n===null&&Ic(s),c=s.type,f=s.pendingProps,m=n!==null?n.memoizedProps:null,w=f.children,vc(c,f)?w=null:m!==null&&vc(c,m)&&(s.flags|=32),kp(n,s),Jt(n,s,w,a),s.child;case 6:return n===null&&Ic(s),null;case 13:return Rp(n,s,a);case 4:return bc(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Gs(s,null,c,a):Jt(n,s,c,a),s.child;case 11:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:tr(c,f),Cp(n,s,c,f,a);case 7:return Jt(n,s,s.pendingProps,a),s.child;case 8:return Jt(n,s,s.pendingProps.children,a),s.child;case 12:return Jt(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,f=s.pendingProps,m=s.memoizedProps,w=f.value,st(_l,c._currentValue),c._currentValue=w,m!==null)if(Jn(m.value,w)){if(m.children===f.children&&!sn.current){s=$r(n,s,a);break e}}else for(m=s.child,m!==null&&(m.return=s);m!==null;){var x=m.dependencies;if(x!==null){w=m.child;for(var O=x.firstContext;O!==null;){if(O.context===c){if(m.tag===1){O=Br(-1,a&-a),O.tag=2;var W=m.updateQueue;if(W!==null){W=W.shared;var oe=W.pending;oe===null?O.next=O:(O.next=oe.next,oe.next=O),W.pending=O}}m.lanes|=a,O=m.alternate,O!==null&&(O.lanes|=a),Rc(m.return,a,s),x.lanes|=a;break}O=O.next}}else if(m.tag===10)w=m.type===s.type?null:m.child;else if(m.tag===18){if(w=m.return,w===null)throw Error(t(341));w.lanes|=a,x=w.alternate,x!==null&&(x.lanes|=a),Rc(w,a,s),w=m.sibling}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===s){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}Jt(n,s,f.children,a),s=s.child}return s;case 9:return f=s.type,c=s.pendingProps.children,Zs(s,a),f=bn(f),c=c(f),s.flags|=1,Jt(n,s,c,a),s.child;case 14:return c=s.type,f=tr(c,s.pendingProps),f=tr(c.type,f),Tp(n,s,c,f,a);case 15:return Lp(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:tr(c,f),Rl(n,s),s.tag=1,on(c)?(n=!0,dl(s)):n=!1,Zs(s,a),mp(s,c,f),Kc(s,c,f,a),Xc(null,s,c,!0,n,a);case 19:return Dp(n,s,a);case 22:return Ip(n,s,a)}throw Error(t(156,s.tag))};function rg(n,s){return Cs(n,s)}function FE(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(n,s,a,c){return new FE(n,s,a,c)}function vh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function jE(n){if(typeof n=="function")return vh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===b)return 11;if(n===Se)return 14}return 2}function wi(n,s){var a=n.alternate;return a===null?(a=Nn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Bl(n,s,a,c,f,m){var w=2;if(c=n,typeof n=="function")vh(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case k:return cs(a.children,f,m,s);case I:w=8,f|=8;break;case C:return n=Nn(12,a,s,f|2),n.elementType=C,n.lanes=m,n;case P:return n=Nn(13,a,s,f),n.elementType=P,n.lanes=m,n;case pe:return n=Nn(19,a,s,f),n.elementType=pe,n.lanes=m,n;case Le:return $l(a,f,m,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case A:w=10;break e;case D:w=9;break e;case b:w=11;break e;case Se:w=14;break e;case Pe:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Nn(w,a,s,f),s.elementType=n,s.type=c,s.lanes=m,s}function cs(n,s,a,c){return n=Nn(7,n,c,s),n.lanes=a,n}function $l(n,s,a,c){return n=Nn(22,n,c,s),n.elementType=Le,n.lanes=a,n.stateNode={isHidden:!1},n}function yh(n,s,a){return n=Nn(6,n,null,s),n.lanes=a,n}function _h(n,s,a){return s=Nn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function UE(n,s,a,c,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ni(0),this.expirationTimes=ni(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ni(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Eh(n,s,a,c,f,m,w,x,O){return n=new UE(n,s,a,x,O),s===1?(s=1,m===!0&&(s|=8)):s=0,m=Nn(3,null,null,s),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dc(m),n}function zE(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:q,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function ig(n){if(!n)return fi;n=n._reactInternals;e:{if(qn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(on(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(on(a))return Md(n,a,s)}return s}function sg(n,s,a,c,f,m,w,x,O){return n=Eh(a,c,!0,n,f,m,w,x,O),n.context=ig(null),a=n.current,c=en(),f=_i(a),m=Br(c,f),m.callback=s??null,gi(a,m,f),n.current.lanes=f,ri(n,f,c),un(n,c),n}function Hl(n,s,a,c){var f=s.current,m=en(),w=_i(f);return a=ig(a),s.context===null?s.context=a:s.pendingContext=a,s=Br(m,w),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=gi(f,s,w),n!==null&&(ir(n,f,w,m),wl(n,f,w)),w}function Wl(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function og(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function wh(n,s){og(n,s),(n=n.alternate)&&og(n,s)}function BE(){return null}var ag=typeof reportError=="function"?reportError:function(n){console.error(n)};function Sh(n){this._internalRoot=n}ql.prototype.render=Sh.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Hl(n,s,null,null)},ql.prototype.unmount=Sh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;as(function(){Hl(null,n,null,null)}),s[Nr]=null}};function ql(n){this._internalRoot=n}ql.prototype.unstable_scheduleHydration=function(n){if(n){var s=qa();n={blockedOn:null,target:n,priority:s};for(var a=0;a<vr.length&&s!==0&&s<vr[a].priority;a++);vr.splice(a,0,n),a===0&&Qa(n)}};function Ch(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Kl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function lg(){}function $E(n,s,a,c,f){if(f){if(typeof c=="function"){var m=c;c=function(){var W=Wl(w);m.call(W)}}var w=sg(s,c,n,0,null,!1,!1,"",lg);return n._reactRootContainer=w,n[Nr]=w.current,Wo(n.nodeType===8?n.parentNode:n),as(),w}for(;f=n.lastChild;)n.removeChild(f);if(typeof c=="function"){var x=c;c=function(){var W=Wl(O);x.call(W)}}var O=Eh(n,0,!1,null,null,!1,!1,"",lg);return n._reactRootContainer=O,n[Nr]=O.current,Wo(n.nodeType===8?n.parentNode:n),as(function(){Hl(s,O,a,c)}),O}function Gl(n,s,a,c,f){var m=a._reactRootContainer;if(m){var w=m;if(typeof f=="function"){var x=f;f=function(){var O=Wl(w);x.call(O)}}Hl(s,w,n,f)}else w=$E(a,s,n,f,c);return Wl(w)}Ha=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=ti(s.pendingLanes);a!==0&&(ii(s,a|1),un(s,it()),(Ze&6)===0&&(to=it()+500,di()))}break;case 13:as(function(){var c=zr(n,1);if(c!==null){var f=en();ir(c,n,1,f)}}),wh(n,1)}},Is=function(n){if(n.tag===13){var s=zr(n,134217728);if(s!==null){var a=en();ir(s,n,134217728,a)}wh(n,134217728)}},Wa=function(n){if(n.tag===13){var s=_i(n),a=zr(n,s);if(a!==null){var c=en();ir(a,n,s,c)}wh(n,s)}},qa=function(){return We},Ka=function(n,s){var a=We;try{return We=n,s()}finally{We=a}},Rr=function(n,s,a){switch(s){case"input":if(or(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var f=hl(c);if(!f)throw Error(t(90));Be(c),or(c,f)}}}break;case"textarea":xr(n,a);break;case"select":s=a.value,s!=null&&tn(n,!!a.multiple,s,!1)}},pr=ph,gr=as;var HE={usingClientEntryPoint:!1,Events:[Go,Bs,hl,pn,dr,ph]},la={findFiberByHostInstance:Ji,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WE={bundleType:la.bundleType,version:la.version,rendererPackageName:la.rendererPackageName,rendererConfig:la.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ao(n),n===null?null:n.stateNode},findFiberByHostInstance:la.findFiberByHostInstance||BE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ql.isDisabled&&Ql.supportsFiber)try{qi=Ql.inject(WE),gn=Ql}catch{}}return cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HE,cn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ch(s))throw Error(t(200));return zE(n,s,null,a)},cn.createRoot=function(n,s){if(!Ch(n))throw Error(t(299));var a=!1,c="",f=ag;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Eh(n,1,!1,null,null,a,!1,c,f),n[Nr]=s.current,Wo(n.nodeType===8?n.parentNode:n),new Sh(s)},cn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Ao(s),n=n===null?null:n.stateNode,n},cn.flushSync=function(n){return as(n)},cn.hydrate=function(n,s,a){if(!Kl(s))throw Error(t(200));return Gl(null,n,s,!0,a)},cn.hydrateRoot=function(n,s,a){if(!Ch(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,f=!1,m="",w=ag;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=sg(s,null,n,1,a??null,f,!1,m,w),n[Nr]=s.current,Wo(n),c)for(n=0;n<c.length;n++)a=c[n],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new ql(s)},cn.render=function(n,s,a){if(!Kl(s))throw Error(t(200));return Gl(null,n,s,!1,a)},cn.unmountComponentAtNode=function(n){if(!Kl(n))throw Error(t(40));return n._reactRootContainer?(as(function(){Gl(null,null,n,!1,function(){n._reactRootContainer=null,n[Nr]=null})}),!0):!1},cn.unstable_batchedUpdates=ph,cn.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Kl(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Gl(n,s,a,!1,c)},cn.version="18.3.1-next-f1338f8080-20240426",cn}var mg;function Bv(){if(mg)return Ih.exports;mg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ih.exports=JE(),Ih.exports}var vg;function ew(){if(vg)return Zl;vg=1;var r=Bv();return Zl.createRoot=r.createRoot,Zl.hydrateRoot=r.hydrateRoot,Zl}var tw=ew();const nw=gf(tw);var Eo=Bv();function Sa(r){"@babel/helpers - typeof";return Sa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sa(r)}function rw(r,e){if(Sa(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(Sa(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function iw(r){var e=rw(r,"string");return Sa(e)=="symbol"?e:e+""}function X(r,e,t){return(e=iw(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function $v(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ah,yg;function sw(){if(yg)return Ah;yg=1;var r=function(t,i,o,l,h,d,g,v){if(!t){var E;if(i===void 0)E=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var S=[o,l,h,d,g,v],T=0;E=new Error(i.replace(/%s/g,function(){return S[T++]})),E.name="Invariant Violation"}throw E.framesToPop=1,E}};return Ah=r,Ah}var ow=sw(),At=$v(ow),je=y.createContext(null);function aw(){At(!!y.useContext,"useGoogleMap is React hook and requires React version 16.8+");var r=y.useContext(je);return At(!!r,"useGoogleMap needs a GoogleMap available up in the tree"),r}function lw(r,e,t){return Object.keys(r).reduce(function(o,l){return e(o,r[l],l)},t)}function uw(r,e){Object.keys(r).forEach(t=>e(r[t],t))}function cw(r,e,t,i){var o={},l=(h,d)=>{var g=t[d];g!==e[d]&&(o[d]=g,h(i,g))};return uw(r,l),o}function hw(r,e,t){var i=lw(t,function(l,h,d){return typeof r[d]=="function"&&l.push(google.maps.event.addListener(e,h,r[d])),l},[]);return i}function fw(r){google.maps.event.removeListener(r)}function $e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];r.forEach(fw)}function ze(r){var{updaterMap:e,eventMap:t,prevProps:i,nextProps:o,instance:l}=r,h=hw(o,l,t);return cw(e,i,o,l),h}var _g={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},Eg={extraMapTypes(r,e){e.forEach(function(i,o){r.mapTypes.set(String(o),i)})},center(r,e){r.setCenter(e)},clickableIcons(r,e){r.setClickableIcons(e)},heading(r,e){r.setHeading(e)},mapTypeId(r,e){r.setMapTypeId(e)},options(r,e){r.setOptions(e)},streetView(r,e){r.setStreetView(e)},tilt(r,e){r.setTilt(e)},zoom(r,e){r.setZoom(e)}};function dw(r){var{children:e,options:t,id:i,mapContainerStyle:o,mapContainerClassName:l,center:h,onClick:d,onDblClick:g,onDrag:v,onDragEnd:E,onDragStart:S,onMouseMove:T,onMouseOut:R,onMouseOver:M,onMouseDown:j,onMouseUp:N,onRightClick:Y,onCenterChanged:Z,onLoad:le,onUnmount:K}=r,[H,q]=y.useState(null),k=y.useRef(null),[I,C]=y.useState(null),[A,D]=y.useState(null),[b,P]=y.useState(null),[pe,Se]=y.useState(null),[Pe,Le]=y.useState(null),[J,he]=y.useState(null),[ie,V]=y.useState(null),[G,re]=y.useState(null),[ge,$]=y.useState(null),[Ce,Ie]=y.useState(null),[de,te]=y.useState(null),[ee,ye]=y.useState(null);return y.useEffect(()=>{t&&H!==null&&H.setOptions(t)},[H,t]),y.useEffect(()=>{H!==null&&typeof h<"u"&&H.setCenter(h)},[H,h]),y.useEffect(()=>{H&&g&&(A!==null&&google.maps.event.removeListener(A),D(google.maps.event.addListener(H,"dblclick",g)))},[g]),y.useEffect(()=>{H&&E&&(b!==null&&google.maps.event.removeListener(b),P(google.maps.event.addListener(H,"dragend",E)))},[E]),y.useEffect(()=>{H&&S&&(pe!==null&&google.maps.event.removeListener(pe),Se(google.maps.event.addListener(H,"dragstart",S)))},[S]),y.useEffect(()=>{H&&j&&(Pe!==null&&google.maps.event.removeListener(Pe),Le(google.maps.event.addListener(H,"mousedown",j)))},[j]),y.useEffect(()=>{H&&T&&(J!==null&&google.maps.event.removeListener(J),he(google.maps.event.addListener(H,"mousemove",T)))},[T]),y.useEffect(()=>{H&&R&&(ie!==null&&google.maps.event.removeListener(ie),V(google.maps.event.addListener(H,"mouseout",R)))},[R]),y.useEffect(()=>{H&&M&&(G!==null&&google.maps.event.removeListener(G),re(google.maps.event.addListener(H,"mouseover",M)))},[M]),y.useEffect(()=>{H&&N&&(ge!==null&&google.maps.event.removeListener(ge),$(google.maps.event.addListener(H,"mouseup",N)))},[N]),y.useEffect(()=>{H&&Y&&(Ce!==null&&google.maps.event.removeListener(Ce),Ie(google.maps.event.addListener(H,"rightclick",Y)))},[Y]),y.useEffect(()=>{H&&d&&(de!==null&&google.maps.event.removeListener(de),te(google.maps.event.addListener(H,"click",d)))},[d]),y.useEffect(()=>{H&&v&&(ee!==null&&google.maps.event.removeListener(ee),ye(google.maps.event.addListener(H,"drag",v)))},[v]),y.useEffect(()=>{H&&Z&&(I!==null&&google.maps.event.removeListener(I),C(google.maps.event.addListener(H,"center_changed",Z)))},[d]),y.useEffect(()=>{var Be=k.current===null?null:new google.maps.Map(k.current,t);return q(Be),Be!==null&&le&&le(Be),()=>{Be!==null&&K&&K(Be)}},[]),Ae.jsx("div",{id:i,ref:k,style:o,className:l,children:Ae.jsx(je.Provider,{value:H,children:H!==null?e:null})})}y.memo(dw);class pw extends y.PureComponent{constructor(){super(...arguments),X(this,"state",{map:null}),X(this,"registeredEvents",[]),X(this,"mapRef",null),X(this,"getInstance",()=>this.mapRef===null?null:new google.maps.Map(this.mapRef,this.props.options)),X(this,"panTo",e=>{var t=this.getInstance();t&&t.panTo(e)}),X(this,"setMapCallback",()=>{this.state.map!==null&&this.props.onLoad&&this.props.onLoad(this.state.map)}),X(this,"getRef",e=>{this.mapRef=e})}componentDidMount(){var e=this.getInstance();this.registeredEvents=ze({updaterMap:Eg,eventMap:_g,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{map:e}},this.setMapCallback)}componentDidUpdate(e){this.state.map!==null&&($e(this.registeredEvents),this.registeredEvents=ze({updaterMap:Eg,eventMap:_g,prevProps:e,nextProps:this.props,instance:this.state.map}))}componentWillUnmount(){this.state.map!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),$e(this.registeredEvents))}render(){return Ae.jsx("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:Ae.jsx(je.Provider,{value:this.state.map,children:this.state.map!==null?this.props.children:null})})}}function wg(r,e,t,i,o,l,h){try{var d=r[l](h),g=d.value}catch(v){return void t(v)}d.done?e(g):Promise.resolve(g).then(i,o)}function Hv(r){return function(){var e=this,t=arguments;return new Promise(function(i,o){var l=r.apply(e,t);function h(g){wg(l,i,o,h,d,"next",g)}function d(g){wg(l,i,o,h,d,"throw",g)}h(void 0)})}}function Wv(r){var{googleMapsApiKey:e,googleMapsClientId:t,version:i="weekly",language:o,region:l,libraries:h,channel:d,mapIds:g,authReferrerPolicy:v}=r,E=[];return At(e&&t||!(e&&t),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),e?E.push("key=".concat(e)):t&&E.push("client=".concat(t)),i&&E.push("v=".concat(i)),o&&E.push("language=".concat(o)),l&&E.push("region=".concat(l)),h&&h.length&&E.push("libraries=".concat(h.sort().join(","))),d&&E.push("channel=".concat(d)),g&&g.length&&E.push("map_ids=".concat(g.join(","))),v&&E.push("auth_referrer_policy=".concat(v)),E.push("loading=async"),E.push("callback=initMap"),"https://maps.googleapis.com/maps/api/js?".concat(E.join("&"))}var Li=typeof document<"u";function qv(r){var{url:e,id:t,nonce:i}=r;return Li?new Promise(function(l,h){var d=document.getElementById(t),g=window;if(d){var v=d.getAttribute("data-state");if(d.src===e&&v!=="error"){if(v==="ready")return l(t);var E=g.initMap,S=d.onerror;g.initMap=function(){E&&E(),l(t)},d.onerror=function(R){S&&S(R),h(R)};return}else d.remove()}var T=document.createElement("script");T.type="text/javascript",T.src=e,T.id=t,T.async=!0,T.nonce=i||"",T.onerror=function(M){T.setAttribute("data-state","error"),h(M)},g.initMap=function(){T.setAttribute("data-state","ready"),l(t)},document.head.appendChild(T)}).catch(o=>{throw console.error("injectScript error: ",o),o}):Promise.reject(new Error("document is undefined"))}function Sg(r){var e=r.href;return e&&(e.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||e.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:r.tagName.toLowerCase()==="style"&&r.styleSheet&&r.styleSheet.cssText&&r.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(r.styleSheet.cssText="",!0):r.tagName.toLowerCase()==="style"&&r.innerHTML&&r.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(r.innerHTML="",!0):r.tagName.toLowerCase()==="style"&&!r.styleSheet&&!r.innerHTML}function vf(){var r=document.getElementsByTagName("head")[0];if(r){var e=r.insertBefore.bind(r);r.insertBefore=function(o,l){return Sg(o)||Reflect.apply(e,r,[o,l]),o};var t=r.appendChild.bind(r);r.appendChild=function(o){return Sg(o)||Reflect.apply(t,r,[o]),o}}}var ca=!1;function Kv(){return Ae.jsx("div",{children:"Loading..."})}var Ca={id:"script-loader",version:"weekly"};class gw extends y.PureComponent{constructor(){super(...arguments),X(this,"check",null),X(this,"state",{loaded:!1}),X(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),X(this,"isCleaningUp",Hv(function*(){function e(t){if(!ca)t();else if(Li)var i=window.setInterval(function(){ca||(window.clearInterval(i),t())},1)}return new Promise(e)})),X(this,"cleanup",()=>{ca=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(i){return typeof i.src=="string"&&i.src.includes("maps.googleapis")}).forEach(function(i){i.parentNode&&i.parentNode.removeChild(i)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(i){return i.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(i){i.parentNode&&i.parentNode.removeChild(i)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(i){return i.innerText!==void 0&&i.innerText.length>0&&i.innerText.includes(".gm-")}).forEach(function(i){i.parentNode&&i.parentNode.removeChild(i)})}),X(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&vf(),At(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id);var e={id:this.props.id,nonce:this.props.nonce,url:Wv(this.props)};qv(e).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(t=>{this.props.onError&&this.props.onError(t),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",`) to <LoadScript />
          Otherwise it is a Network issue.
        `))})}),X(this,"getRef",e=>{this.check=e})}componentDidMount(){if(Li){if(window.google&&window.google.maps&&!ca){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(t){console.error("Error at injecting script after cleaning up: ",t)})}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),Li&&e.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(Li){this.cleanup();var e=()=>{this.check||(delete window.google,ca=!1)};window.setTimeout(e,1),this.props.onUnmount&&this.props.onUnmount()}}render(){return Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||Ae.jsx(Kv,{})]})}}X(gw,"defaultProps",Ca);function mw(r,e){if(r==null)return{};var t={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.includes(i))continue;t[i]=r[i]}return t}function yf(r,e){if(r==null)return{};var t,i,o=mw(r,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);for(i=0;i<l.length;i++)t=l[i],e.includes(t)||{}.propertyIsEnumerable.call(r,t)&&(o[t]=r[t])}return o}var Cg;function vw(r){var{id:e=Ca.id,version:t=Ca.version,nonce:i,googleMapsApiKey:o,googleMapsClientId:l,language:h,region:d,libraries:g,preventGoogleFontsLoading:v,channel:E,mapIds:S,authReferrerPolicy:T}=r,R=y.useRef(!1),[M,j]=y.useState(!1),[N,Y]=y.useState(void 0);y.useEffect(function(){return R.current=!0,()=>{R.current=!1}},[]),y.useEffect(function(){Li&&v&&vf()},[v]),y.useEffect(function(){M&&At(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[M]);var Z=Wv({version:t,googleMapsApiKey:o,googleMapsClientId:l,language:h,region:d,libraries:g,channel:E,mapIds:S,authReferrerPolicy:T});y.useEffect(function(){if(!Li)return;function H(){R.current&&(j(!0),Cg=Z)}if(window.google&&window.google.maps&&Cg===Z){H();return}qv({id:e,url:Z,nonce:i}).then(H).catch(function(k){R.current&&Y(k),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(o||"-",") or Client ID (").concat(l||"-",`)
        Otherwise it is a Network issue.
      `)),console.error(k)})},[e,Z,i]);var le=y.useRef(void 0);return y.useEffect(function(){le.current&&g!==le.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),le.current=g},[g]),{isLoaded:M,loadError:N,url:Z}}var yw=["loadingElement","onLoad","onError","onUnmount","children"],_w=Ae.jsx(Kv,{});function Ew(r){var{loadingElement:e,onLoad:t,onError:i,onUnmount:o,children:l}=r,h=yf(r,yw),{isLoaded:d,loadError:g}=vw(h);return y.useEffect(function(){d&&typeof t=="function"&&t()},[d,t]),y.useEffect(function(){g&&typeof i=="function"&&i(g)},[g,i]),y.useEffect(function(){return()=>{o&&o()}},[o]),d?l:e||_w}y.memo(Ew);function ww(r,e,t,i){function o(l){return l instanceof t?l:new t(function(h){h(l)})}return new(t||(t=Promise))(function(l,h){function d(E){try{v(i.next(E))}catch(S){h(S)}}function g(E){try{v(i.throw(E))}catch(S){h(S)}}function v(E){E.done?l(E.value):o(E.value).then(d,g)}v((i=i.apply(r,[])).next())})}function Sw(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Cw=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var i,o,l;if(Array.isArray(e)){if(i=e.length,i!=t.length)return!1;for(o=i;o--!==0;)if(!r(e[o],t[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(l=Object.keys(e),i=l.length,i!==Object.keys(t).length)return!1;for(o=i;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,l[o]))return!1;for(o=i;o--!==0;){var h=l[o];if(!r(e[h],t[h]))return!1}return!0}return e!==e&&t!==t},Tw=Sw(Cw),Tg="__googleMapsScriptId",lo;(function(r){r[r.INITIALIZED=0]="INITIALIZED",r[r.LOADING=1]="LOADING",r[r.SUCCESS=2]="SUCCESS",r[r.FAILURE=3]="FAILURE"})(lo||(lo={}));class ps{constructor(e){var{apiKey:t,authReferrerPolicy:i,channel:o,client:l,id:h=Tg,language:d,libraries:g=[],mapIds:v,nonce:E,region:S,retries:T=3,url:R="https://maps.googleapis.com/maps/api/js",version:M}=e;if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=i,this.channel=o,this.client=l,this.id=h||Tg,this.language=d,this.libraries=g,this.mapIds=v,this.nonce=E,this.region=S,this.retries=T,this.url=R,this.version=M,ps.instance){if(!Tw(this.options,ps.instance.options))throw new Error("Loader must not be called again with different options. ".concat(JSON.stringify(this.options)," !== ").concat(JSON.stringify(ps.instance.options)));return ps.instance}ps.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?lo.FAILURE:this.done?lo.SUCCESS:this.loading?lo.LOADING:lo.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){var e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+="&key=".concat(this.apiKey)),this.channel&&(e+="&channel=".concat(this.channel)),this.client&&(e+="&client=".concat(this.client)),this.libraries.length>0&&(e+="&libraries=".concat(this.libraries.join(","))),this.language&&(e+="&language=".concat(this.language)),this.region&&(e+="&region=".concat(this.region)),this.version&&(e+="&v=".concat(this.version)),this.mapIds&&(e+="&map_ids=".concat(this.mapIds.join(","))),this.authReferrerPolicy&&(e+="&auth_referrer_policy=".concat(this.authReferrerPolicy)),e}deleteScript(){var e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,t)=>{this.loadCallback(i=>{i?t(i.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;if(document.getElementById(this.id)){this.callback();return}var i={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(i).forEach(l=>!i[l]&&delete i[l]),!((t=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||t===void 0)&&t.importLibrary||(l=>{var h,d,g,v="The Google Maps JavaScript API",E="google",S="importLibrary",T="__ib__",R=document,M=window;M=M[E]||(M[E]={});var j=M.maps||(M.maps={}),N=new Set,Y=new URLSearchParams,Z=()=>h||(h=new Promise((le,K)=>ww(this,void 0,void 0,function*(){var H;yield d=R.createElement("script"),d.id=this.id,Y.set("libraries",[...N]+"");for(g in l)Y.set(g.replace(/[A-Z]/g,q=>"_"+q[0].toLowerCase()),l[g]);Y.set("callback",E+".maps."+T),d.src=this.url+"?"+Y,j[T]=le,d.onerror=()=>h=K(Error(v+" could not load.")),d.nonce=this.nonce||((H=R.querySelector("script[nonce]"))===null||H===void 0?void 0:H.nonce)||"",R.head.append(d)})));j[S]?console.warn(v+" only loads once. Ignoring:",l):j[S]=function(le){for(var K=arguments.length,H=new Array(K>1?K-1:0),q=1;q<K;q++)H[q-1]=arguments[q];return N.add(le)&&Z().then(()=>j[S](le,...H))}})(i);var o=this.libraries.map(l=>this.importLibrary(l));o.length||o.push(this.importLibrary("core")),Promise.all(o).then(()=>this.callback(),l=>{var h=new ErrorEvent("error",{error:l});this.loadErrorCallback(h)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){var t=this.errors.length*Math.pow(2,this.errors.length);console.error("Failed to load Google Maps script, retrying in ".concat(t," ms.")),setTimeout(()=>{this.deleteScript(),this.setScript()},t)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}var Lw=["maps"];function Iw(r){var{id:e=Ca.id,version:t=Ca.version,nonce:i,googleMapsApiKey:o,language:l,region:h,libraries:d=Lw,preventGoogleFontsLoading:g,mapIds:v,authReferrerPolicy:E}=r,S=y.useRef(!1),[T,R]=y.useState(!1),[M,j]=y.useState(void 0);y.useEffect(function(){return S.current=!0,()=>{S.current=!1}},[]);var N=y.useMemo(()=>new ps({id:e,apiKey:o,version:t,libraries:d,language:l||"en",region:h||"US",mapIds:v||[],nonce:i||"",authReferrerPolicy:E||"origin"}),[e,o,t,d,l,h,v,i,E]);y.useEffect(function(){T||N.load().then(()=>{S.current&&R(!0)}).catch(le=>{j(le)})},[]),y.useEffect(()=>{Li&&g&&vf()},[g]);var Y=y.useRef();return y.useEffect(()=>{Y.current&&d!==Y.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),Y.current=d},[d]),{isLoaded:T,loadError:M}}function Lg(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,i)}return t}function cu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Lg(Object(t),!0).forEach(function(i){X(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Lg(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}var Ig={},kg={options(r,e){r.setOptions(e)}};function kw(r){var{options:e,onLoad:t,onUnmount:i}=r,o=y.useContext(je),[l,h]=y.useState(null);return y.useEffect(()=>{l!==null&&l.setMap(o)},[o]),y.useEffect(()=>{e&&l!==null&&l.setOptions(e)},[l,e]),y.useEffect(()=>{var d=new google.maps.TrafficLayer(cu(cu({},e),{},{map:o}));return h(d),t&&t(d),()=>{l!==null&&(i&&i(l),l.setMap(null))}},[]),null}y.memo(kw);class Pw extends y.PureComponent{constructor(){super(...arguments),X(this,"state",{trafficLayer:null}),X(this,"setTrafficLayerCallback",()=>{this.state.trafficLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),X(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(cu(cu({},this.props.options),{},{map:this.context}));this.registeredEvents=ze({updaterMap:kg,eventMap:Ig,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{trafficLayer:e}},this.setTrafficLayerCallback)}componentDidUpdate(e){this.state.trafficLayer!==null&&($e(this.registeredEvents),this.registeredEvents=ze({updaterMap:kg,eventMap:Ig,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),$e(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}X(Pw,"contextType",je);function Aw(r){var{onLoad:e,onUnmount:t}=r,i=y.useContext(je),[o,l]=y.useState(null);return y.useEffect(()=>{o!==null&&o.setMap(i)},[i]),y.useEffect(()=>{var h=new google.maps.BicyclingLayer;return l(h),h.setMap(i),e&&e(h),()=>{h!==null&&(t&&t(h),h.setMap(null))}},[]),null}y.memo(Aw);class xw extends y.PureComponent{constructor(){super(...arguments),X(this,"state",{bicyclingLayer:null}),X(this,"setBicyclingLayerCallback",()=>{this.state.bicyclingLayer!==null&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:e}),this.setBicyclingLayerCallback)}componentWillUnmount(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}X(xw,"contextType",je);function Rw(r){var{onLoad:e,onUnmount:t}=r,i=y.useContext(je),[o,l]=y.useState(null);return y.useEffect(()=>{o!==null&&o.setMap(i)},[i]),y.useEffect(()=>{var h=new google.maps.TransitLayer;return l(h),h.setMap(i),e&&e(h),()=>{o!==null&&(t&&t(o),o.setMap(null))}},[]),null}y.memo(Rw);class Mw extends y.PureComponent{constructor(){super(...arguments),X(this,"state",{transitLayer:null}),X(this,"setTransitLayerCallback",()=>{this.state.transitLayer!==null&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var e=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:e}},this.setTransitLayerCallback)}componentWillUnmount(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}X(Mw,"contextType",je);function Pg(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,i)}return t}function hu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Pg(Object(t),!0).forEach(function(i){X(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Pg(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}var Ag={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},xg={drawingMode(r,e){r.setDrawingMode(e)},options(r,e){r.setOptions(e)}};function Dw(r){var{options:e,drawingMode:t,onCircleComplete:i,onMarkerComplete:o,onOverlayComplete:l,onPolygonComplete:h,onPolylineComplete:d,onRectangleComplete:g,onLoad:v,onUnmount:E}=r,S=y.useContext(je),[T,R]=y.useState(null),[M,j]=y.useState(null),[N,Y]=y.useState(null),[Z,le]=y.useState(null),[K,H]=y.useState(null),[q,k]=y.useState(null),[I,C]=y.useState(null);return y.useEffect(()=>{T!==null&&T.setMap(S)},[S]),y.useEffect(()=>{e&&T!==null&&T.setOptions(e)},[T,e]),y.useEffect(()=>{T!==null&&T.setDrawingMode(t??null)},[T,t]),y.useEffect(()=>{T&&i&&(M!==null&&google.maps.event.removeListener(M),j(google.maps.event.addListener(T,"circlecomplete",i)))},[T,i]),y.useEffect(()=>{T&&o&&(N!==null&&google.maps.event.removeListener(N),Y(google.maps.event.addListener(T,"markercomplete",o)))},[T,o]),y.useEffect(()=>{T&&l&&(Z!==null&&google.maps.event.removeListener(Z),le(google.maps.event.addListener(T,"overlaycomplete",l)))},[T,l]),y.useEffect(()=>{T&&h&&(K!==null&&google.maps.event.removeListener(K),H(google.maps.event.addListener(T,"polygoncomplete",h)))},[T,h]),y.useEffect(()=>{T&&d&&(q!==null&&google.maps.event.removeListener(q),k(google.maps.event.addListener(T,"polylinecomplete",d)))},[T,d]),y.useEffect(()=>{T&&g&&(I!==null&&google.maps.event.removeListener(I),C(google.maps.event.addListener(T,"rectanglecomplete",g)))},[T,g]),y.useEffect(()=>{At(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var A=new google.maps.drawing.DrawingManager(hu(hu({},e),{},{map:S}));return t&&A.setDrawingMode(t),i&&j(google.maps.event.addListener(A,"circlecomplete",i)),o&&Y(google.maps.event.addListener(A,"markercomplete",o)),l&&le(google.maps.event.addListener(A,"overlaycomplete",l)),h&&H(google.maps.event.addListener(A,"polygoncomplete",h)),d&&k(google.maps.event.addListener(A,"polylinecomplete",d)),g&&C(google.maps.event.addListener(A,"rectanglecomplete",g)),R(A),v&&v(A),()=>{T!==null&&(M&&google.maps.event.removeListener(M),N&&google.maps.event.removeListener(N),Z&&google.maps.event.removeListener(Z),K&&google.maps.event.removeListener(K),q&&google.maps.event.removeListener(q),I&&google.maps.event.removeListener(I),E&&E(T),T.setMap(null))}},[]),null}y.memo(Dw);class bw extends y.PureComponent{constructor(e){super(e),X(this,"registeredEvents",[]),X(this,"state",{drawingManager:null}),X(this,"setDrawingManagerCallback",()=>{this.state.drawingManager!==null&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),At(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager(hu(hu({},this.props.options),{},{map:this.context}));this.registeredEvents=ze({updaterMap:xg,eventMap:Ag,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{drawingManager:e}},this.setDrawingManagerCallback)}componentDidUpdate(e){this.state.drawingManager!==null&&($e(this.registeredEvents),this.registeredEvents=ze({updaterMap:xg,eventMap:Ag,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),$e(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}X(bw,"contextType",je);function Rg(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,i)}return t}function uo(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Rg(Object(t),!0).forEach(function(i){X(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Rg(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}var Mg={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},Dg={animation(r,e){r.setAnimation(e)},clickable(r,e){r.setClickable(e)},cursor(r,e){r.setCursor(e)},draggable(r,e){r.setDraggable(e)},icon(r,e){r.setIcon(e)},label(r,e){r.setLabel(e)},map(r,e){r.setMap(e)},opacity(r,e){r.setOpacity(e)},options(r,e){r.setOptions(e)},position(r,e){r.setPosition(e)},shape(r,e){r.setShape(e)},title(r,e){r.setTitle(e)},visible(r,e){r.setVisible(e)},zIndex(r,e){r.setZIndex(e)}},fu={};function Ow(r){var{position:e,options:t,clusterer:i,noClustererRedraw:o,children:l,draggable:h,visible:d,animation:g,clickable:v,cursor:E,icon:S,label:T,opacity:R,shape:M,title:j,zIndex:N,onClick:Y,onDblClick:Z,onDrag:le,onDragEnd:K,onDragStart:H,onMouseOut:q,onMouseOver:k,onMouseUp:I,onMouseDown:C,onRightClick:A,onClickableChanged:D,onCursorChanged:b,onAnimationChanged:P,onDraggableChanged:pe,onFlatChanged:Se,onIconChanged:Pe,onPositionChanged:Le,onShapeChanged:J,onTitleChanged:he,onVisibleChanged:ie,onZindexChanged:V,onLoad:G,onUnmount:re}=r,ge=y.useContext(je),[$,Ce]=y.useState(null),[Ie,de]=y.useState(null),[te,ee]=y.useState(null),[ye,Be]=y.useState(null),[Xe,ot]=y.useState(null),[Ne,Qt]=y.useState(null),[or,Ui]=y.useState(null),[jn,Ln]=y.useState(null),[tn,Zr]=y.useState(null),[Un,xr]=y.useState(null),[Xr,mt]=y.useState(null),[ut,In]=y.useState(null),[ar,zn]=y.useState(null),[kn,lr]=y.useState(null),[ur,Yr]=y.useState(null),[cr,Jr]=y.useState(null),[hr,fr]=y.useState(null),[Bn,Rr]=y.useState(null),[Zt,dn]=y.useState(null),[$n,pn]=y.useState(null),[dr,pr]=y.useState(null),[gr,Pn]=y.useState(null);y.useEffect(()=>{$!==null&&$.setMap(ge)},[ge]),y.useEffect(()=>{typeof t<"u"&&$!==null&&$.setOptions(t)},[$,t]),y.useEffect(()=>{typeof h<"u"&&$!==null&&$.setDraggable(h)},[$,h]),y.useEffect(()=>{e&&$!==null&&$.setPosition(e)},[$,e]),y.useEffect(()=>{typeof d<"u"&&$!==null&&$.setVisible(d)},[$,d]),y.useEffect(()=>{$==null||$.setAnimation(g)},[$,g]),y.useEffect(()=>{$&&v!==void 0&&$.setClickable(v)},[$,v]),y.useEffect(()=>{$&&E!==void 0&&$.setCursor(E)},[$,E]),y.useEffect(()=>{$&&S!==void 0&&$.setIcon(S)},[$,S]),y.useEffect(()=>{$&&T!==void 0&&$.setLabel(T)},[$,T]),y.useEffect(()=>{$&&R!==void 0&&$.setOpacity(R)},[$,R]),y.useEffect(()=>{$&&M!==void 0&&$.setShape(M)},[$,M]),y.useEffect(()=>{$&&j!==void 0&&$.setTitle(j)},[$,j]),y.useEffect(()=>{$&&N!==void 0&&$.setZIndex(N)},[$,N]),y.useEffect(()=>{$&&Z&&(Ie!==null&&google.maps.event.removeListener(Ie),de(google.maps.event.addListener($,"dblclick",Z)))},[Z]),y.useEffect(()=>{$&&K&&(te!==null&&google.maps.event.removeListener(te),ee(google.maps.event.addListener($,"dragend",K)))},[K]),y.useEffect(()=>{$&&H&&(ye!==null&&google.maps.event.removeListener(ye),Be(google.maps.event.addListener($,"dragstart",H)))},[H]),y.useEffect(()=>{$&&C&&(Xe!==null&&google.maps.event.removeListener(Xe),ot(google.maps.event.addListener($,"mousedown",C)))},[C]),y.useEffect(()=>{$&&q&&(Ne!==null&&google.maps.event.removeListener(Ne),Qt(google.maps.event.addListener($,"mouseout",q)))},[q]),y.useEffect(()=>{$&&k&&(or!==null&&google.maps.event.removeListener(or),Ui(google.maps.event.addListener($,"mouseover",k)))},[k]),y.useEffect(()=>{$&&I&&(jn!==null&&google.maps.event.removeListener(jn),Ln(google.maps.event.addListener($,"mouseup",I)))},[I]),y.useEffect(()=>{$&&A&&(tn!==null&&google.maps.event.removeListener(tn),Zr(google.maps.event.addListener($,"rightclick",A)))},[A]),y.useEffect(()=>{$&&Y&&(Un!==null&&google.maps.event.removeListener(Un),xr(google.maps.event.addListener($,"click",Y)))},[Y]),y.useEffect(()=>{$&&le&&(Xr!==null&&google.maps.event.removeListener(Xr),mt(google.maps.event.addListener($,"drag",le)))},[le]),y.useEffect(()=>{$&&D&&(ut!==null&&google.maps.event.removeListener(ut),In(google.maps.event.addListener($,"clickable_changed",D)))},[D]),y.useEffect(()=>{$&&b&&(ar!==null&&google.maps.event.removeListener(ar),zn(google.maps.event.addListener($,"cursor_changed",b)))},[b]),y.useEffect(()=>{$&&P&&(kn!==null&&google.maps.event.removeListener(kn),lr(google.maps.event.addListener($,"animation_changed",P)))},[P]),y.useEffect(()=>{$&&pe&&(ur!==null&&google.maps.event.removeListener(ur),Yr(google.maps.event.addListener($,"draggable_changed",pe)))},[pe]),y.useEffect(()=>{$&&Se&&(cr!==null&&google.maps.event.removeListener(cr),Jr(google.maps.event.addListener($,"flat_changed",Se)))},[Se]),y.useEffect(()=>{$&&Pe&&(hr!==null&&google.maps.event.removeListener(hr),fr(google.maps.event.addListener($,"icon_changed",Pe)))},[Pe]),y.useEffect(()=>{$&&Le&&(Bn!==null&&google.maps.event.removeListener(Bn),Rr(google.maps.event.addListener($,"position_changed",Le)))},[Le]),y.useEffect(()=>{$&&J&&(Zt!==null&&google.maps.event.removeListener(Zt),dn(google.maps.event.addListener($,"shape_changed",J)))},[J]),y.useEffect(()=>{$&&he&&($n!==null&&google.maps.event.removeListener($n),pn(google.maps.event.addListener($,"title_changed",he)))},[he]),y.useEffect(()=>{$&&ie&&(dr!==null&&google.maps.event.removeListener(dr),pr(google.maps.event.addListener($,"visible_changed",ie)))},[ie]),y.useEffect(()=>{$&&V&&(gr!==null&&google.maps.event.removeListener(gr),Pn(google.maps.event.addListener($,"zindex_changed",V)))},[V]),y.useEffect(()=>{var nt=uo(uo(uo({},t||fu),i?fu:{map:ge}),{},{position:e}),De=new google.maps.Marker(nt);return i?i.addMarker(De,!!o):De.setMap(ge),e&&De.setPosition(e),typeof d<"u"&&De.setVisible(d),typeof h<"u"&&De.setDraggable(h),typeof v<"u"&&De.setClickable(v),typeof E=="string"&&De.setCursor(E),S&&De.setIcon(S),typeof T<"u"&&De.setLabel(T),typeof R<"u"&&De.setOpacity(R),M&&De.setShape(M),typeof j=="string"&&De.setTitle(j),typeof N=="number"&&De.setZIndex(N),Z&&de(google.maps.event.addListener(De,"dblclick",Z)),K&&ee(google.maps.event.addListener(De,"dragend",K)),H&&Be(google.maps.event.addListener(De,"dragstart",H)),C&&ot(google.maps.event.addListener(De,"mousedown",C)),q&&Qt(google.maps.event.addListener(De,"mouseout",q)),k&&Ui(google.maps.event.addListener(De,"mouseover",k)),I&&Ln(google.maps.event.addListener(De,"mouseup",I)),A&&Zr(google.maps.event.addListener(De,"rightclick",A)),Y&&xr(google.maps.event.addListener(De,"click",Y)),le&&mt(google.maps.event.addListener(De,"drag",le)),D&&In(google.maps.event.addListener(De,"clickable_changed",D)),b&&zn(google.maps.event.addListener(De,"cursor_changed",b)),P&&lr(google.maps.event.addListener(De,"animation_changed",P)),pe&&Yr(google.maps.event.addListener(De,"draggable_changed",pe)),Se&&Jr(google.maps.event.addListener(De,"flat_changed",Se)),Pe&&fr(google.maps.event.addListener(De,"icon_changed",Pe)),Le&&Rr(google.maps.event.addListener(De,"position_changed",Le)),J&&dn(google.maps.event.addListener(De,"shape_changed",J)),he&&pn(google.maps.event.addListener(De,"title_changed",he)),ie&&pr(google.maps.event.addListener(De,"visible_changed",ie)),V&&Pn(google.maps.event.addListener(De,"zindex_changed",V)),Ce(De),G&&G(De),()=>{Ie!==null&&google.maps.event.removeListener(Ie),te!==null&&google.maps.event.removeListener(te),ye!==null&&google.maps.event.removeListener(ye),Xe!==null&&google.maps.event.removeListener(Xe),Ne!==null&&google.maps.event.removeListener(Ne),or!==null&&google.maps.event.removeListener(or),jn!==null&&google.maps.event.removeListener(jn),tn!==null&&google.maps.event.removeListener(tn),Un!==null&&google.maps.event.removeListener(Un),ut!==null&&google.maps.event.removeListener(ut),ar!==null&&google.maps.event.removeListener(ar),kn!==null&&google.maps.event.removeListener(kn),ur!==null&&google.maps.event.removeListener(ur),cr!==null&&google.maps.event.removeListener(cr),hr!==null&&google.maps.event.removeListener(hr),Bn!==null&&google.maps.event.removeListener(Bn),$n!==null&&google.maps.event.removeListener($n),dr!==null&&google.maps.event.removeListener(dr),gr!==null&&google.maps.event.removeListener(gr),re&&re(De),i?i.removeMarker(De,!!o):De&&De.setMap(null)}},[]);var zi=y.useMemo(()=>l?y.Children.map(l,nt=>{if(!y.isValidElement(nt))return nt;var De=nt;return y.cloneElement(De,{anchor:$})}):null,[l,$]);return Ae.jsx(Ae.Fragment,{children:zi})||null}var xh=y.memo(Ow);class Vw extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[])}componentDidMount(){var e=this;return Hv(function*(){var t=uo(uo(uo({},e.props.options||fu),e.props.clusterer?fu:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(t),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=ze({updaterMap:Dg,eventMap:Mg,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)})()}componentDidUpdate(e){this.marker&&($e(this.registeredEvents),this.registeredEvents=ze({updaterMap:Dg,eventMap:Mg,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),$e(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){var e=this.props.children?y.Children.map(this.props.children,t=>{if(!y.isValidElement(t))return t;var i=t;return y.cloneElement(i,{anchor:this.marker})}):null;return e||null}}X(Vw,"contextType",je);var Nw=function(){function r(e,t){e.getClusterer().extend(r,google.maps.OverlayView),this.cluster=e,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=t,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(e.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return r.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},r.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},r.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var t=this.cluster.getClusterer();if(google.maps.event.trigger(t,"click",this.cluster),google.maps.event.trigger(t,"clusterclick",this.cluster),t.getZoomOnClick()){var i=t.getMaxZoom(),o=this.cluster.getBounds(),l=t.getMap();l!==null&&"fitBounds"in l&&l.fitBounds(o),this.timeOut=window.setTimeout(function(){var h=t.getMap();if(h!==null){"fitBounds"in h&&h.fitBounds(o);var d=h.getZoom()||0;i!==null&&d>i&&h.setZoom(i+1)}},100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},r.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},r.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},r.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(e=this.getPanes())===null||e===void 0||e.overlayMouseTarget.appendChild(this.div);var t=this.getMap();t!==null&&(this.boundsChangedListener=google.maps.event.addListener(t,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},r.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},r.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=e!==null?"".concat(e.y,"px"):"0",this.div.style.left=e!==null?"".concat(e.x,"px"):"0"}},r.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},r.prototype.show=function(){var e,t,i,o,l,h;if(this.div&&this.center){var d=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,g=this.backgroundPosition.split(" "),v=parseInt(((e=g[0])===null||e===void 0?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),E=parseInt(((t=g[1])===null||t===void 0?void 0:t.replace(/^\s+|\s+$/g,""))||"0",10),S=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(S!==null?"".concat(S.y,"px"):"0","; left: ").concat(S!==null?"".concat(S.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var T=document.createElement("img");T.alt=d,T.src=this.url,T.width=this.width,T.height=this.height,T.setAttribute("style","position: absolute; top: ".concat(E,"px; left: ").concat(v,"px")),this.cluster.getClusterer().enableRetinaIcons||(T.style.clip="rect(-".concat(E,"px, -").concat(v+this.width,"px, -").concat(E+this.height,", -").concat(v,")"));var R=document.createElement("div");R.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((i=this.sums)===null||i===void 0)&&i.text&&(R.innerText="".concat((o=this.sums)===null||o===void 0?void 0:o.text)),!((l=this.sums)===null||l===void 0)&&l.html&&(R.innerHTML="".concat((h=this.sums)===null||h===void 0?void 0:h.html)),this.div.innerHTML="",this.div.appendChild(T),this.div.appendChild(R),this.div.title=d,this.div.style.display=""}this.visible=!0},r.prototype.useStyle=function(e){this.sums=e;var t=this.cluster.getClusterer().getStyles(),i=t[Math.min(t.length-1,Math.max(0,e.index-1))];i&&(this.url=i.url,this.height=i.height,this.width=i.width,i.className&&(this.className="".concat(this.clusterClassName," ").concat(i.className)),this.anchorText=i.anchorText||[0,0],this.anchorIcon=i.anchorIcon||[this.height/2,this.width/2],this.textColor=i.textColor||"black",this.textSize=i.textSize||11,this.textDecoration=i.textDecoration||"none",this.fontWeight=i.fontWeight||"bold",this.fontStyle=i.fontStyle||"normal",this.fontFamily=i.fontFamily||"Arial,sans-serif",this.backgroundPosition=i.backgroundPosition||"0 0")},r.prototype.setCenter=function(e){this.center=e},r.prototype.getPosFromLatLng=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return t!==null&&(t.x-=this.anchorIcon[1],t.y-=this.anchorIcon[0]),t},r}(),Fw=function(){function r(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new Nw(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return r.prototype.getSize=function(){return this.markers.length},r.prototype.getMarkers=function(){return this.markers},r.prototype.getCenter=function(){return this.center},r.prototype.getMap=function(){return this.map},r.prototype.getClusterer=function(){return this.markerClusterer},r.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),t=this.getMarkers(),i=0,o=t;i<o.length;i++){var l=o[i],h=l.getPosition();h&&e.extend(h)}return e},r.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},r.prototype.addMarker=function(e){var t;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter){var i=e.getPosition();if(i){var o=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(o-1)+i.lat())/o,(this.center.lng()*(o-1)+i.lng())/o),this.calculateBounds()}}}else{var i=e.getPosition();i&&(this.center=i,this.calculateBounds())}e.isAdded=!0,this.markers.push(e);var l=this.markers.length,h=this.markerClusterer.getMaxZoom(),d=(t=this.map)===null||t===void 0?void 0:t.getZoom();if(h!==null&&typeof d<"u"&&d>h)e.getMap()!==this.map&&e.setMap(this.map);else if(l<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(l===this.minClusterSize)for(var g=0,v=this.markers;g<v.length;g++){var E=v[g];E.setMap(null)}else e.setMap(null);return!0},r.prototype.isMarkerInClusterBounds=function(e){if(this.bounds!==null){var t=e.getPosition();if(t)return this.bounds.contains(t)}return!1},r.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},r.prototype.updateIcon=function(){var e,t=this.markers.length,i=this.markerClusterer.getMaxZoom(),o=(e=this.map)===null||e===void 0?void 0:e.getZoom();if(i!==null&&typeof o<"u"&&o>i){this.clusterIcon.hide();return}if(t<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},r.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var t=0;t<this.markers.length;t++)if(e===this.markers[t])return!0;return!1},r}();function jw(r,e){var t=r.length,i=t.toString().length,o=Math.min(i,e);return{text:t.toString(),index:o,title:""}}var Uw=2e3,zw=500,Bw="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",$w="png",Hw=[53,56,66,78,90],Ww="cluster",Gv=function(){function r(e,t,i){t===void 0&&(t=[]),i===void 0&&(i={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(r,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=i.gridSize||60,this.minClusterSize=i.minimumClusterSize||2,this.maxZoom=i.maxZoom||null,this.styles=i.styles||[],this.title=i.title||"",this.zoomOnClick=!0,i.zoomOnClick!==void 0&&(this.zoomOnClick=i.zoomOnClick),this.averageCenter=!1,i.averageCenter!==void 0&&(this.averageCenter=i.averageCenter),this.ignoreHidden=!1,i.ignoreHidden!==void 0&&(this.ignoreHidden=i.ignoreHidden),this.enableRetinaIcons=!1,i.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=i.enableRetinaIcons),this.imagePath=i.imagePath||Bw,this.imageExtension=i.imageExtension||$w,this.imageSizes=i.imageSizes||Hw,this.calculator=i.calculator||jw,this.batchSize=i.batchSize||Uw,this.batchSizeIE=i.batchSizeIE||zw,this.clusterClass=i.clusterClass||Ww,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(t,!0),this.setMap(e)}return r.prototype.onZoomChanged=function(){var e,t;this.resetViewport(!1),(((e=this.getMap())===null||e===void 0?void 0:e.getZoom())===(this.get("minZoom")||0)||((t=this.getMap())===null||t===void 0?void 0:t.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},r.prototype.onIdle=function(){this.redraw()},r.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),e!==null&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},r.prototype.onRemove=function(){for(var e=0,t=this.markers;e<t.length;e++){var i=t[e];i.getMap()!==this.activeMap&&i.setMap(this.activeMap)}for(var o=0,l=this.clusters;o<l.length;o++){var h=l[o];h.remove()}this.clusters=[];for(var d=0,g=this.listeners;d<g.length;d++){var v=g[d];google.maps.event.removeListener(v)}this.listeners=[],this.activeMap=null,this.ready=!1},r.prototype.draw=function(){},r.prototype.getMap=function(){return null},r.prototype.getPanes=function(){return null},r.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},r.prototype.setMap=function(){},r.prototype.addListener=function(){return{remove:function(){}}},r.prototype.bindTo=function(){},r.prototype.get=function(){},r.prototype.notify=function(){},r.prototype.set=function(){},r.prototype.setValues=function(){},r.prototype.unbind=function(){},r.prototype.unbindAll=function(){},r.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},r.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),t=new google.maps.LatLngBounds,i=0,o=e;i<o.length;i++){var l=o[i],h=l.getPosition();h&&t.extend(h)}var d=this.getMap();d!==null&&"fitBounds"in d&&d.fitBounds(t)},r.prototype.getGridSize=function(){return this.gridSize},r.prototype.setGridSize=function(e){this.gridSize=e},r.prototype.getMinimumClusterSize=function(){return this.minClusterSize},r.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},r.prototype.getMaxZoom=function(){return this.maxZoom},r.prototype.setMaxZoom=function(e){this.maxZoom=e},r.prototype.getStyles=function(){return this.styles},r.prototype.setStyles=function(e){this.styles=e},r.prototype.getTitle=function(){return this.title},r.prototype.setTitle=function(e){this.title=e},r.prototype.getZoomOnClick=function(){return this.zoomOnClick},r.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},r.prototype.getAverageCenter=function(){return this.averageCenter},r.prototype.setAverageCenter=function(e){this.averageCenter=e},r.prototype.getIgnoreHidden=function(){return this.ignoreHidden},r.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},r.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},r.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},r.prototype.getImageExtension=function(){return this.imageExtension},r.prototype.setImageExtension=function(e){this.imageExtension=e},r.prototype.getImagePath=function(){return this.imagePath},r.prototype.setImagePath=function(e){this.imagePath=e},r.prototype.getImageSizes=function(){return this.imageSizes},r.prototype.setImageSizes=function(e){this.imageSizes=e},r.prototype.getCalculator=function(){return this.calculator},r.prototype.setCalculator=function(e){this.calculator=e},r.prototype.getBatchSizeIE=function(){return this.batchSizeIE},r.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},r.prototype.getClusterClass=function(){return this.clusterClass},r.prototype.setClusterClass=function(e){this.clusterClass=e},r.prototype.getMarkers=function(){return this.markers},r.prototype.getTotalMarkers=function(){return this.markers.length},r.prototype.getClusters=function(){return this.clusters},r.prototype.getTotalClusters=function(){return this.clusters.length},r.prototype.addMarker=function(e,t){this.pushMarkerTo(e),t||this.redraw()},r.prototype.addMarkers=function(e,t){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=e[i];o&&this.pushMarkerTo(o)}t||this.redraw()},r.prototype.pushMarkerTo=function(e){var t=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",function(){t.ready&&(e.isAdded=!1,t.repaint())}),e.isAdded=!1,this.markers.push(e)},r.prototype.removeMarker_=function(e){var t=-1;if(this.markers.indexOf)t=this.markers.indexOf(e);else for(var i=0;i<this.markers.length;i++)if(e===this.markers[i]){t=i;break}return t===-1?!1:(e.setMap(null),this.markers.splice(t,1),!0)},r.prototype.removeMarker=function(e,t){var i=this.removeMarker_(e);return!t&&i&&this.repaint(),i},r.prototype.removeMarkers=function(e,t){for(var i=!1,o=0,l=e;o<l.length;o++){var h=l[o];i=i||this.removeMarker_(h)}return!t&&i&&this.repaint(),i},r.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},r.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var i=0,o=e;i<o.length;i++){var l=o[i];l.remove()}},0)},r.prototype.getExtendedBounds=function(e){var t=this.getProjection(),i=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));i!==null&&(i.x+=this.gridSize,i.y-=this.gridSize);var o=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(o!==null&&(o.x-=this.gridSize,o.y+=this.gridSize),i!==null){var l=t.fromDivPixelToLatLng(i);l!==null&&e.extend(l)}if(o!==null){var h=t.fromDivPixelToLatLng(o);h!==null&&e.extend(h)}return e},r.prototype.redraw=function(){this.createClusters(0)},r.prototype.resetViewport=function(e){for(var t=0,i=this.clusters;t<i.length;t++){var o=i[t];o.remove()}this.clusters=[];for(var l=0,h=this.markers;l<h.length;l++){var d=h[l];d.isAdded=!1,e&&d.setMap(null)}},r.prototype.distanceBetweenPoints=function(e,t){var i=6371,o=(t.lat()-e.lat())*Math.PI/180,l=(t.lng()-e.lng())*Math.PI/180,h=Math.sin(o/2)*Math.sin(o/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return i*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)))},r.prototype.isMarkerInBounds=function(e,t){var i=e.getPosition();return i?t.contains(i):!1},r.prototype.addToClosestCluster=function(e){for(var t,i=4e4,o=null,l=0,h=this.clusters;l<h.length;l++){var d=h[l];t=d;var g=t.getCenter(),v=e.getPosition();if(g&&v){var E=this.distanceBetweenPoints(g,v);E<i&&(i=E,o=t)}}o&&o.isMarkerInClusterBounds(e)?o.addMarker(e):(t=new Fw(this),t.addMarker(e),this.clusters.push(t))},r.prototype.createClusters=function(e){var t=this;if(this.ready){e===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var i=this.getMap(),o=i!==null&&("getBounds"in i)?i.getBounds():null,l=(i==null?void 0:i.getZoom())||0,h=l>3?new google.maps.LatLngBounds(o==null?void 0:o.getSouthWest(),o==null?void 0:o.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),d=this.getExtendedBounds(h),g=Math.min(e+this.batchSize,this.markers.length),v=e;v<g;v++){var E=this.markers[v];E&&!E.isAdded&&this.isMarkerInBounds(E,d)&&(!this.ignoreHidden||this.ignoreHidden&&E.getVisible())&&this.addToClosestCluster(E)}if(g<this.markers.length)this.timerRefStatic=window.setTimeout(function(){t.createClusters(g)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var S=0,T=this.clusters;S<T.length;S++){var R=T[S];R.updateIcon()}}}},r.prototype.extend=function(e,t){return(function(o){for(var l in o.prototype){var h=l;this.prototype[h]=o.prototype[h]}return this}).apply(e,[t])},r}();function bg(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,i)}return t}function qw(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?bg(Object(t),!0).forEach(function(i){X(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):bg(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}var Fn={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},Je={averageCenter(r,e){r.setAverageCenter(e)},batchSizeIE(r,e){r.setBatchSizeIE(e)},calculator(r,e){r.setCalculator(e)},clusterClass(r,e){r.setClusterClass(e)},enableRetinaIcons(r,e){r.setEnableRetinaIcons(e)},gridSize(r,e){r.setGridSize(e)},ignoreHidden(r,e){r.setIgnoreHidden(e)},imageExtension(r,e){r.setImageExtension(e)},imagePath(r,e){r.setImagePath(e)},imageSizes(r,e){r.setImageSizes(e)},maxZoom(r,e){r.setMaxZoom(e)},minimumClusterSize(r,e){r.setMinimumClusterSize(e)},styles(r,e){r.setStyles(e)},title(r,e){r.setTitle(e)},zoomOnClick(r,e){r.setZoomOnClick(e)}},Kw={};function Gw(r){var{children:e,options:t,averageCenter:i,batchSizeIE:o,calculator:l,clusterClass:h,enableRetinaIcons:d,gridSize:g,ignoreHidden:v,imageExtension:E,imagePath:S,imageSizes:T,maxZoom:R,minimumClusterSize:M,styles:j,title:N,zoomOnClick:Y,onClick:Z,onClusteringBegin:le,onClusteringEnd:K,onMouseOver:H,onMouseOut:q,onLoad:k,onUnmount:I}=r,[C,A]=y.useState(null),D=y.useContext(je),[b,P]=y.useState(null),[pe,Se]=y.useState(null),[Pe,Le]=y.useState(null),[J,he]=y.useState(null),[ie,V]=y.useState(null);return y.useEffect(()=>{C&&q&&(J!==null&&google.maps.event.removeListener(J),he(google.maps.event.addListener(C,Fn.onMouseOut,q)))},[q]),y.useEffect(()=>{C&&H&&(ie!==null&&google.maps.event.removeListener(ie),V(google.maps.event.addListener(C,Fn.onMouseOver,H)))},[H]),y.useEffect(()=>{C&&Z&&(b!==null&&google.maps.event.removeListener(b),P(google.maps.event.addListener(C,Fn.onClick,Z)))},[Z]),y.useEffect(()=>{C&&le&&(pe!==null&&google.maps.event.removeListener(pe),Se(google.maps.event.addListener(C,Fn.onClusteringBegin,le)))},[le]),y.useEffect(()=>{C&&K&&(Pe!==null&&google.maps.event.removeListener(Pe),Se(google.maps.event.addListener(C,Fn.onClusteringEnd,K)))},[K]),y.useEffect(()=>{typeof i<"u"&&C!==null&&Je.averageCenter(C,i)},[C,i]),y.useEffect(()=>{typeof o<"u"&&C!==null&&Je.batchSizeIE(C,o)},[C,o]),y.useEffect(()=>{typeof l<"u"&&C!==null&&Je.calculator(C,l)},[C,l]),y.useEffect(()=>{typeof h<"u"&&C!==null&&Je.clusterClass(C,h)},[C,h]),y.useEffect(()=>{typeof d<"u"&&C!==null&&Je.enableRetinaIcons(C,d)},[C,d]),y.useEffect(()=>{typeof g<"u"&&C!==null&&Je.gridSize(C,g)},[C,g]),y.useEffect(()=>{typeof v<"u"&&C!==null&&Je.ignoreHidden(C,v)},[C,v]),y.useEffect(()=>{typeof E<"u"&&C!==null&&Je.imageExtension(C,E)},[C,E]),y.useEffect(()=>{typeof S<"u"&&C!==null&&Je.imagePath(C,S)},[C,S]),y.useEffect(()=>{typeof T<"u"&&C!==null&&Je.imageSizes(C,T)},[C,T]),y.useEffect(()=>{typeof R<"u"&&C!==null&&Je.maxZoom(C,R)},[C,R]),y.useEffect(()=>{typeof M<"u"&&C!==null&&Je.minimumClusterSize(C,M)},[C,M]),y.useEffect(()=>{typeof j<"u"&&C!==null&&Je.styles(C,j)},[C,j]),y.useEffect(()=>{typeof N<"u"&&C!==null&&Je.title(C,N)},[C,N]),y.useEffect(()=>{typeof Y<"u"&&C!==null&&Je.zoomOnClick(C,Y)},[C,Y]),y.useEffect(()=>{if(D){var G=qw({},t||Kw),re=new Gv(D,[],G);return i&&Je.averageCenter(re,i),o&&Je.batchSizeIE(re,o),l&&Je.calculator(re,l),h&&Je.clusterClass(re,h),d&&Je.enableRetinaIcons(re,d),g&&Je.gridSize(re,g),v&&Je.ignoreHidden(re,v),E&&Je.imageExtension(re,E),S&&Je.imagePath(re,S),T&&Je.imageSizes(re,T),R&&Je.maxZoom(re,R),M&&Je.minimumClusterSize(re,M),j&&Je.styles(re,j),N&&Je.title(re,N),Y&&Je.zoomOnClick(re,Y),q&&he(google.maps.event.addListener(re,Fn.onMouseOut,q)),H&&V(google.maps.event.addListener(re,Fn.onMouseOver,H)),Z&&P(google.maps.event.addListener(re,Fn.onClick,Z)),le&&Se(google.maps.event.addListener(re,Fn.onClusteringBegin,le)),K&&Le(google.maps.event.addListener(re,Fn.onClusteringEnd,K)),A(re),k&&k(re),()=>{J!==null&&google.maps.event.removeListener(J),ie!==null&&google.maps.event.removeListener(ie),b!==null&&google.maps.event.removeListener(b),pe!==null&&google.maps.event.removeListener(pe),Pe!==null&&google.maps.event.removeListener(Pe),I&&I(re)}}},[]),C!==null&&e(C)||null}var Qw=y.memo(Gw);class Zw extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"state",{markerClusterer:null}),X(this,"setClustererCallback",()=>{this.state.markerClusterer!==null&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var e=new Gv(this.context,[],this.props.options);this.registeredEvents=ze({updaterMap:Je,eventMap:Fn,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({markerClusterer:e}),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&($e(this.registeredEvents),this.registeredEvents=ze({updaterMap:Je,eventMap:Fn,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),$e(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null}}X(Zw,"contextType",je);function Og(r){r.cancelBubble=!0,r.stopPropagation&&r.stopPropagation()}var Qv=function(){function r(e){e===void 0&&(e={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(r,google.maps.OverlayView),this.content=e.content||"",this.disableAutoPan=e.disableAutoPan||!1,this.maxWidth=e.maxWidth||0,this.pixelOffset=e.pixelOffset||new google.maps.Size(0,0),this.position=e.position||new google.maps.LatLng(0,0),this.zIndex=e.zIndex||null,this.boxClass=e.boxClass||"infoBox",this.boxStyle=e.boxStyle||{},this.closeBoxMargin=e.closeBoxMargin||"2px",this.closeBoxURL=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",e.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=e.infoBoxClearance||new google.maps.Size(1,1),typeof e.visible>"u"&&(typeof e.isHidden>"u"?e.visible=!0:e.visible=!e.isHidden),this.isHidden=!e.visible,this.alignBottom=e.alignBottom||!1,this.pane=e.pane||"floatPane",this.enableEventPropagation=e.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return r.prototype.createInfoBoxDiv=function(){var e=this,t=function(E){E.returnValue=!1,E.preventDefault&&E.preventDefault(),e.enableEventPropagation||Og(E)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var i=this.getPanes();if(i!==null&&i[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var o=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-o.left-o.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var l=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],h=0,d=l;h<d.length;h++){var g=d[h];this.eventListeners.push(google.maps.event.addListener(this.div,g,Og))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){e.div&&(e.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",t),google.maps.event.trigger(this,"domready")}},r.prototype.getCloseBoxImg=function(){var e="";return this.closeBoxURL!==""&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},r.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},r.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},r.prototype.getCloseClickHandler=function(){return this.closeClickHandler},r.prototype.panBox=function(e){if(this.div&&!e){var t=this.getMap();if(t instanceof google.maps.Map){var i=0,o=0,l=t.getBounds();l&&!l.contains(this.position)&&t.setCenter(this.position);var h=t.getDiv(),d=h.offsetWidth,g=h.offsetHeight,v=this.pixelOffset.width,E=this.pixelOffset.height,S=this.div.offsetWidth,T=this.div.offsetHeight,R=this.infoBoxClearance.width,M=this.infoBoxClearance.height,j=this.getProjection(),N=j.fromLatLngToContainerPixel(this.position);N!==null&&(N.x<-v+R?i=N.x+v-R:N.x+S+v+R>d&&(i=N.x+S+v+R-d),this.alignBottom?N.y<-E+M+T?o=N.y+E-M-T:N.y+E+M>g&&(o=N.y+E+M-g):N.y<-E+M?o=N.y+E-M:N.y+T+E+M>g&&(o=N.y+T+E+M-g)),i===0&&o===0||t.panBy(i,o)}}},r.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this.div.style[t]=e[t]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var i=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+i*100+')"',this.div.style.filter="alpha(opacity="+i*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},r.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var t=this.div.ownerDocument,i=t&&t.defaultView?t.defaultView.getComputedStyle(this.div,""):null;i&&(e.top=parseInt(i.borderTopWidth||"",10)||0,e.bottom=parseInt(i.borderBottomWidth||"",10)||0,e.left=parseInt(i.borderLeftWidth||"",10)||0,e.right=parseInt(i.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var o=this.div.currentStyle;o&&(e.top=parseInt(o.borderTopWidth||"",10)||0,e.bottom=parseInt(o.borderBottomWidth||"",10)||0,e.left=parseInt(o.borderLeftWidth||"",10)||0,e.right=parseInt(o.borderRightWidth||"",10)||0)}return e},r.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},r.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection(),t=e.fromLatLngToDivPixel(this.position);t!==null&&(this.div.style.left=t.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(t.y+this.pixelOffset.height)+"px":this.div.style.top=t.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},r.prototype.setOptions=function(e){e===void 0&&(e={}),typeof e.boxClass<"u"&&(this.boxClass=e.boxClass,this.setBoxStyle()),typeof e.boxStyle<"u"&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),typeof e.content<"u"&&this.setContent(e.content),typeof e.disableAutoPan<"u"&&(this.disableAutoPan=e.disableAutoPan),typeof e.maxWidth<"u"&&(this.maxWidth=e.maxWidth),typeof e.pixelOffset<"u"&&(this.pixelOffset=e.pixelOffset),typeof e.alignBottom<"u"&&(this.alignBottom=e.alignBottom),typeof e.position<"u"&&this.setPosition(e.position),typeof e.zIndex<"u"&&this.setZIndex(e.zIndex),typeof e.closeBoxMargin<"u"&&(this.closeBoxMargin=e.closeBoxMargin),typeof e.closeBoxURL<"u"&&(this.closeBoxURL=e.closeBoxURL),typeof e.infoBoxClearance<"u"&&(this.infoBoxClearance=e.infoBoxClearance),typeof e.isHidden<"u"&&(this.isHidden=e.isHidden),typeof e.visible<"u"&&(this.isHidden=!e.visible),typeof e.enableEventPropagation<"u"&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},r.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},r.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},r.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},r.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},r.prototype.getContent=function(){return this.content},r.prototype.getPosition=function(){return this.position},r.prototype.getZIndex=function(){return this.zIndex},r.prototype.getVisible=function(){var e=this.getMap();return typeof e>"u"||e===null?!1:!this.isHidden},r.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},r.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},r.prototype.open=function(e,t){var i=this;t&&(this.position=t.getPosition(),this.moveListener=google.maps.event.addListener(t,"position_changed",function(){var o=t.getPosition();i.setPosition(o)}),this.mapListener=google.maps.event.addListener(t,"map_changed",function(){i.setMap(t.map)})),this.setMap(e),this.div&&this.panBox()},r.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,t=this.eventListeners;e<t.length;e++){var i=t[e];google.maps.event.removeListener(i)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},r.prototype.extend=function(e,t){return(function(o){for(var l in o.prototype)Object.prototype.hasOwnProperty.call(this,l)||(this.prototype[l]=o.prototype[l]);return this}).apply(e,[t])},r}(),Xw=["position"],Yw=["position"];function Vg(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,i)}return t}function du(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Vg(Object(t),!0).forEach(function(i){X(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Vg(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}var Ng={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},Fg={options(r,e){r.setOptions(e)},position(r,e){e instanceof google.maps.LatLng?r.setPosition(e):r.setPosition(new google.maps.LatLng(e.lat,e.lng))},visible(r,e){r.setVisible(e)},zIndex(r,e){r.setZIndex(e)}},Jw={};function e0(r){var{children:e,anchor:t,options:i,position:o,zIndex:l,onCloseClick:h,onDomReady:d,onContentChanged:g,onPositionChanged:v,onZindexChanged:E,onLoad:S,onUnmount:T}=r,R=y.useContext(je),[M,j]=y.useState(null),[N,Y]=y.useState(null),[Z,le]=y.useState(null),[K,H]=y.useState(null),[q,k]=y.useState(null),[I,C]=y.useState(null),A=y.useRef(null);return y.useEffect(()=>{R&&M!==null&&(M.close(),t?M.open(R,t):M.getPosition()&&M.open(R))},[R,M,t]),y.useEffect(()=>{i&&M!==null&&M.setOptions(i)},[M,i]),y.useEffect(()=>{if(o&&M!==null){var D=o instanceof google.maps.LatLng?o:new google.maps.LatLng(o.lat,o.lng);M.setPosition(D)}},[o]),y.useEffect(()=>{typeof l=="number"&&M!==null&&M.setZIndex(l)},[l]),y.useEffect(()=>{M&&h&&(N!==null&&google.maps.event.removeListener(N),Y(google.maps.event.addListener(M,"closeclick",h)))},[h]),y.useEffect(()=>{M&&d&&(Z!==null&&google.maps.event.removeListener(Z),le(google.maps.event.addListener(M,"domready",d)))},[d]),y.useEffect(()=>{M&&g&&(K!==null&&google.maps.event.removeListener(K),H(google.maps.event.addListener(M,"content_changed",g)))},[g]),y.useEffect(()=>{M&&v&&(q!==null&&google.maps.event.removeListener(q),k(google.maps.event.addListener(M,"position_changed",v)))},[v]),y.useEffect(()=>{M&&E&&(I!==null&&google.maps.event.removeListener(I),C(google.maps.event.addListener(M,"zindex_changed",E)))},[E]),y.useEffect(()=>{if(R){var D=i||Jw,{position:b}=D,P=yf(D,Xw),pe;b&&!(b instanceof google.maps.LatLng)&&(pe=new google.maps.LatLng(b.lat,b.lng));var Se=new Qv(du(du({},P),pe?{position:pe}:{}));A.current=document.createElement("div"),j(Se),h&&Y(google.maps.event.addListener(Se,"closeclick",h)),d&&le(google.maps.event.addListener(Se,"domready",d)),g&&H(google.maps.event.addListener(Se,"content_changed",g)),v&&k(google.maps.event.addListener(Se,"position_changed",v)),E&&C(google.maps.event.addListener(Se,"zindex_changed",E)),Se.setContent(A.current),t?Se.open(R,t):Se.getPosition()?Se.open(R):At(!1,"You must provide either an anchor or a position prop for <InfoBox>."),S&&S(Se)}return()=>{M!==null&&(N&&google.maps.event.removeListener(N),K&&google.maps.event.removeListener(K),Z&&google.maps.event.removeListener(Z),q&&google.maps.event.removeListener(q),I&&google.maps.event.removeListener(I),T&&T(M),M.close())}},[]),A.current?Eo.createPortal(y.Children.only(e),A.current):null}y.memo(e0);class t0 extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"containerElement",null),X(this,"state",{infoBox:null}),X(this,"open",(e,t)=>{t?this.context!==null&&e.open(this.context,t):e.getPosition()?this.context!==null&&e.open(this.context):At(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),X(this,"setInfoBoxCallback",()=>{this.state.infoBox!==null&&this.containerElement!==null&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var e=this.props.options||{},{position:t}=e,i=yf(e,Yw),o;t&&!(t instanceof google.maps.LatLng)&&(o=new google.maps.LatLng(t.lat,t.lng));var l=new Qv(du(du({},i),o?{position:o}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=ze({updaterMap:Fg,eventMap:Ng,prevProps:{},nextProps:this.props,instance:l}),this.setState({infoBox:l},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:t}=this.state;t!==null&&($e(this.registeredEvents),this.registeredEvents=ze({updaterMap:Fg,eventMap:Ng,prevProps:e,nextProps:this.props,instance:t}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:t}=this.state;t!==null&&(e&&e(t),$e(this.registeredEvents),t.close())}render(){return this.containerElement?Eo.createPortal(y.Children.only(this.props.children),this.containerElement):null}}X(t0,"contextType",je);var Rh,jg;function n0(){return jg||(jg=1,Rh=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var i,o,l;if(Array.isArray(e)){if(i=e.length,i!=t.length)return!1;for(o=i;o--!==0;)if(!r(e[o],t[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(l=Object.keys(e),i=l.length,i!==Object.keys(t).length)return!1;for(o=i;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,l[o]))return!1;for(o=i;o--!==0;){var h=l[o];if(!r(e[h],t[h]))return!1}return!0}return e!==e&&t!==t}),Rh}var r0=n0(),Ug=$v(r0),zg=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Mh=1,ha=8;class _f{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[t,i]=new Uint8Array(e,0,2);if(t!==219)throw new Error("Data does not appear to be in a KDBush format.");var o=i>>4;if(o!==Mh)throw new Error("Got v".concat(o," data when expected v").concat(Mh,"."));var l=zg[i&15];if(!l)throw new Error("Unrecognized array type.");var[h]=new Uint16Array(e,2,1),[d]=new Uint32Array(e,4,1);return new _f(d,h,l,e)}constructor(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float64Array,o=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=i,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var l=zg.indexOf(this.ArrayType),h=e*2*this.ArrayType.BYTES_PER_ELEMENT,d=e*this.IndexArrayType.BYTES_PER_ELEMENT,g=(8-d%8)%8;if(l<0)throw new Error("Unexpected typed array class: ".concat(i,"."));o&&o instanceof ArrayBuffer?(this.data=o,this.ids=new this.IndexArrayType(this.data,ha,e),this.coords=new this.ArrayType(this.data,ha+d+g,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(ha+h+d+g),this.ids=new this.IndexArrayType(this.data,ha,e),this.coords=new this.ArrayType(this.data,ha+d+g,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(Mh<<4)+l]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){var i=this._pos>>1;return this.ids[i]=i,this.coords[this._pos++]=e,this.coords[this._pos++]=t,i}finish(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return Wh(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,i,o){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:l,coords:h,nodeSize:d}=this,g=[0,l.length-1,0],v=[];g.length;){var E=g.pop()||0,S=g.pop()||0,T=g.pop()||0;if(S-T<=d){for(var R=T;R<=S;R++){var M=h[2*R],j=h[2*R+1];M>=e&&M<=i&&j>=t&&j<=o&&v.push(l[R])}continue}var N=T+S>>1,Y=h[2*N],Z=h[2*N+1];Y>=e&&Y<=i&&Z>=t&&Z<=o&&v.push(l[N]),(E===0?e<=Y:t<=Z)&&(g.push(T),g.push(N-1),g.push(1-E)),(E===0?i>=Y:o>=Z)&&(g.push(N+1),g.push(S),g.push(1-E))}return v}within(e,t,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:o,coords:l,nodeSize:h}=this,d=[0,o.length-1,0],g=[],v=i*i;d.length;){var E=d.pop()||0,S=d.pop()||0,T=d.pop()||0;if(S-T<=h){for(var R=T;R<=S;R++)Bg(l[2*R],l[2*R+1],e,t)<=v&&g.push(o[R]);continue}var M=T+S>>1,j=l[2*M],N=l[2*M+1];Bg(j,N,e,t)<=v&&g.push(o[M]),(E===0?e-i<=j:t-i<=N)&&(d.push(T),d.push(M-1),d.push(1-E)),(E===0?e+i>=j:t+i>=N)&&(d.push(M+1),d.push(S),d.push(1-E))}return g}}function Wh(r,e,t,i,o,l){if(!(o-i<=t)){var h=i+o>>1;Zv(r,e,h,i,o,l),Wh(r,e,t,i,h-1,1-l),Wh(r,e,t,h+1,o,1-l)}}function Zv(r,e,t,i,o,l){for(;o>i;){if(o-i>600){var h=o-i+1,d=t-i+1,g=Math.log(h),v=.5*Math.exp(2*g/3),E=.5*Math.sqrt(g*v*(h-v)/h)*(d-h/2<0?-1:1),S=Math.max(i,Math.floor(t-d*v/h+E)),T=Math.min(o,Math.floor(t+(h-d)*v/h+E));Zv(r,e,t,S,T,l)}var R=e[2*t+l],M=i,j=o;for(fa(r,e,i,t),e[2*o+l]>R&&fa(r,e,i,o);M<j;){for(fa(r,e,M,j),M++,j--;e[2*M+l]<R;)M++;for(;e[2*j+l]>R;)j--}e[2*i+l]===R?fa(r,e,i,j):(j++,fa(r,e,j,o)),j<=t&&(i=j+1),t<=j&&(o=j-1)}}function fa(r,e,t,i){Dh(r,t,i),Dh(e,2*t,2*i),Dh(e,2*t+1,2*i+1)}function Dh(r,e,t){var i=r[e];r[e]=r[t],r[t]=i}function Bg(r,e,t,i){var o=r-t,l=e-i;return o*o+l*l}var i0={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:r=>r},$g=Math.fround||(r=>e=>(r[0]=+e,r[0]))(new Float32Array(1)),hs=2,Ti=3,bh=4,Ci=5,Xv=6;class s0{constructor(e){this.options=Object.assign(Object.create(i0),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:t,minZoom:i,maxZoom:o}=this.options;t&&console.time("total time");var l="prepare ".concat(e.length," points");t&&console.time(l),this.points=e;for(var h=[],d=0;d<e.length;d++){var g=e[d];if(g.geometry){var[v,E]=g.geometry.coordinates,S=$g(Xl(v)),T=$g(Yl(E));h.push(S,T,1/0,d,-1,1),this.options.reduce&&h.push(0)}}var R=this.trees[o+1]=this._createTree(h);t&&console.timeEnd(l);for(var M=o;M>=i;M--){var j=+Date.now();R=this.trees[M]=this._createTree(this._cluster(R,M)),t&&console.log("z%d: %d clusters in %dms",M,R.numItems,+Date.now()-j)}return t&&console.timeEnd("total time"),this}getClusters(e,t){var i=((e[0]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,e[1])),l=e[2]===180?180:((e[2]+180)%360+360)%360-180,h=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)i=-180,l=180;else if(i>l){var d=this.getClusters([i,o,180,h],t),g=this.getClusters([-180,o,l,h],t);return d.concat(g)}var v=this.trees[this._limitZoom(t)],E=v.range(Xl(i),Yl(h),Xl(l),Yl(o)),S=v.data,T=[];for(var R of E){var M=this.stride*R;T.push(S[M+Ci]>1?Hg(S,M,this.clusterProps):this.points[S[M+Ti]])}return T}getChildren(e){var t=this._getOriginId(e),i=this._getOriginZoom(e),o="No cluster with the specified id.",l=this.trees[i];if(!l)throw new Error(o);var h=l.data;if(t*this.stride>=h.length)throw new Error(o);var d=this.options.radius/(this.options.extent*Math.pow(2,i-1)),g=h[t*this.stride],v=h[t*this.stride+1],E=l.within(g,v,d),S=[];for(var T of E){var R=T*this.stride;h[R+bh]===e&&S.push(h[R+Ci]>1?Hg(h,R,this.clusterProps):this.points[h[R+Ti]])}if(S.length===0)throw new Error(o);return S}getLeaves(e,t,i){t=t||10,i=i||0;var o=[];return this._appendLeaves(o,e,t,i,0),o}getTile(e,t,i){var o=this.trees[this._limitZoom(e)],l=Math.pow(2,e),{extent:h,radius:d}=this.options,g=d/h,v=(i-g)/l,E=(i+1+g)/l,S={features:[]};return this._addTileFeatures(o.range((t-g)/l,v,(t+1+g)/l,E),o.data,t,i,l,S),t===0&&this._addTileFeatures(o.range(1-g/l,v,1,E),o.data,l,i,l,S),t===l-1&&this._addTileFeatures(o.range(0,v,g/l,E),o.data,-1,i,l,S),S.features.length?S:null}getClusterExpansionZoom(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var i=this.getChildren(e);if(t++,i.length!==1)break;e=i[0].properties.cluster_id}return t}_appendLeaves(e,t,i,o,l){var h=this.getChildren(t);for(var d of h){var g=d.properties;if(g&&g.cluster?l+g.point_count<=o?l+=g.point_count:l=this._appendLeaves(e,g.cluster_id,i,o,l):l<o?l++:e.push(d),e.length===i)break}return l}_createTree(e){for(var t=new _f(e.length/this.stride|0,this.options.nodeSize,Float32Array),i=0;i<e.length;i+=this.stride)t.add(e[i],e[i+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,i,o,l,h){for(var d of e){var g=d*this.stride,v=t[g+Ci]>1,E=void 0,S=void 0,T=void 0;if(v)E=Yv(t,g,this.clusterProps),S=t[g],T=t[g+1];else{var R=this.points[t[g+Ti]];E=R.properties;var[M,j]=R.geometry.coordinates;S=Xl(M),T=Yl(j)}var N={type:1,geometry:[[Math.round(this.options.extent*(S*l-i)),Math.round(this.options.extent*(T*l-o))]],tags:E},Y=void 0;v||this.options.generateId?Y=t[g+Ti]:Y=this.points[t[g+Ti]].id,Y!==void 0&&(N.id=Y),h.features.push(N)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){for(var{radius:i,extent:o,reduce:l,minPoints:h}=this.options,d=i/(o*Math.pow(2,t)),g=e.data,v=[],E=this.stride,S=0;S<g.length;S+=E)if(!(g[S+hs]<=t)){g[S+hs]=t;var T=g[S],R=g[S+1],M=e.within(g[S],g[S+1],d),j=g[S+Ci],N=j;for(var Y of M){var Z=Y*E;g[Z+hs]>t&&(N+=g[Z+Ci])}if(N>j&&N>=h){var le=T*j,K=R*j,H=void 0,q=-1,k=((S/E|0)<<5)+(t+1)+this.points.length;for(var I of M){var C=I*E;if(!(g[C+hs]<=t)){g[C+hs]=t;var A=g[C+Ci];le+=g[C]*A,K+=g[C+1]*A,g[C+bh]=k,l&&(H||(H=this._map(g,S,!0),q=this.clusterProps.length,this.clusterProps.push(H)),l(H,this._map(g,C)))}}g[S+bh]=k,v.push(le/N,K/N,1/0,k,-1,N),l&&v.push(q)}else{for(var D=0;D<E;D++)v.push(g[S+D]);if(N>1)for(var b of M){var P=b*E;if(!(g[P+hs]<=t)){g[P+hs]=t;for(var pe=0;pe<E;pe++)v.push(g[P+pe])}}}}return v}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,i){if(e[t+Ci]>1){var o=this.clusterProps[e[t+Xv]];return i?Object.assign({},o):o}var l=this.points[e[t+Ti]].properties,h=this.options.map(l);return i&&h===l?Object.assign({},h):h}}function Hg(r,e,t){return{type:"Feature",id:r[e+Ti],properties:Yv(r,e,t),geometry:{type:"Point",coordinates:[o0(r[e]),a0(r[e+1])]}}}function Yv(r,e,t){var i=r[e+Ci],o=i>=1e4?"".concat(Math.round(i/1e3),"k"):i>=1e3?"".concat(Math.round(i/100)/10,"k"):i,l=r[e+Xv],h=l===-1?{}:Object.assign({},t[l]);return Object.assign(h,{cluster:!0,cluster_id:r[e+Ti],point_count:i,point_count_abbreviated:o})}function Xl(r){return r/360+.5}function Yl(r){var e=Math.sin(r*Math.PI/180),t=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return t<0?0:t>1?1:t}function o0(r){return(r-.5)*360}function a0(r){var e=(180-r*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function l0(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}class Sn{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class qh{constructor(e){var{markers:t,position:i}=e;this.markers=t,i&&(i instanceof google.maps.LatLng?this._position=i:this._position=new google.maps.LatLng(i))}get bounds(){if(!(this.markers.length===0&&!this._position)){var e=new google.maps.LatLngBounds(this._position,this._position);for(var t of this.markers)e.extend(Sn.getPosition(t));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>Sn.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(Sn.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class u0{constructor(e){var{maxZoom:t=16}=e;this.maxZoom=t}noop(e){var{markers:t}=e;return c0(t)}}var c0=r=>{var e=r.map(t=>new qh({position:Sn.getPosition(t),markers:[t]}));return e};class h0 extends u0{constructor(e){var{maxZoom:t,radius:i=60}=e,o=l0(e,["maxZoom","radius"]);super({maxZoom:t}),this.state={zoom:-1},this.superCluster=new s0(Object.assign({maxZoom:this.maxZoom,radius:i},o))}calculate(e){var t=!1,i={zoom:e.map.getZoom()};if(!Ug(e.markers,this.markers)){t=!0,this.markers=[...e.markers];var o=this.markers.map(l=>{var h=Sn.getPosition(l),d=[h.lng(),h.lat()];return{type:"Feature",geometry:{type:"Point",coordinates:d},properties:{marker:l}}});this.superCluster.load(o)}return t||(this.state.zoom<=this.maxZoom||i.zoom<=this.maxZoom)&&(t=!Ug(this.state,i)),this.state=i,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster(e){var{map:t}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map(i=>this.transformCluster(i))}transformCluster(e){var{geometry:{coordinates:[t,i]},properties:o}=e;if(o.cluster)return new qh({markers:this.superCluster.getLeaves(o.cluster_id,1/0).map(h=>h.properties.marker),position:{lat:i,lng:t}});var l=o.marker;return new qh({markers:[l],position:Sn.getPosition(l)})}}class f0{constructor(e,t){this.markers={sum:e.length};var i=t.map(l=>l.count),o=i.reduce((l,h)=>l+h,0);this.clusters={count:t.length,markers:{mean:o/t.length,sum:o,min:Math.min(...i),max:Math.max(...i)}}}}class d0{render(e,t,i){var{count:o,position:l}=e,h=o>Math.max(10,t.clusters.markers.mean)?"#ff0000":"#0000ff",d='<svg fill="'.concat(h,`" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">`).concat(o,`</text>
</svg>`),g="Cluster of ".concat(o," markers"),v=Number(google.maps.Marker.MAX_ZINDEX)+o;if(Sn.isAdvancedMarkerAvailable(i)){var E=new DOMParser,S=E.parseFromString(d,"image/svg+xml").documentElement;S.setAttribute("transform","translate(0 25)");var T={map:i,position:l,zIndex:v,title:g,content:S};return new google.maps.marker.AdvancedMarkerElement(T)}var R={position:l,zIndex:v,title:g,icon:{url:"data:image/svg+xml;base64,".concat(btoa(d)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(R)}}function p0(r,e){for(var t in e.prototype)r.prototype[t]=e.prototype[t]}class Ef{constructor(){p0(Ef,google.maps.OverlayView)}}var va;(function(r){r.CLUSTERING_BEGIN="clusteringbegin",r.CLUSTERING_END="clusteringend",r.CLUSTER_CLICK="click"})(va||(va={}));var g0=(r,e,t)=>{t.fitBounds(e.bounds)};class m0 extends Ef{constructor(e){var{map:t,markers:i=[],algorithmOptions:o={},algorithm:l=new h0(o),renderer:h=new d0,onClusterClick:d=g0}=e;super(),this.markers=[...i],this.clusters=[],this.algorithm=l,this.renderer=h,this.onClusterClick=d,t&&this.setMap(t)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach(i=>{this.addMarker(i,!0)}),t||this.render()}removeMarker(e,t){var i=this.markers.indexOf(e);return i===-1?!1:(Sn.setMap(e,null),this.markers.splice(i,1),t||this.render(),!0)}removeMarkers(e,t){var i=!1;return e.forEach(o=>{i=this.removeMarker(o,!0)||i}),i&&!t&&this.render(),i}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,va.CLUSTERING_BEGIN,this);var{clusters:t,changed:i}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(i||i==null){var o=new Set;for(var l of t)l.markers.length==1&&o.add(l.markers[0]);var h=[];for(var d of this.clusters)d.marker!=null&&(d.markers.length==1?o.has(d.marker)||Sn.setMap(d.marker,null):h.push(d.marker));this.clusters=t,this.renderClusters(),requestAnimationFrame(()=>h.forEach(g=>Sn.setMap(g,null)))}google.maps.event.trigger(this,va.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>Sn.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){var e=new f0(this.markers,this.clusters),t=this.getMap();this.clusters.forEach(i=>{i.markers.length===1?i.marker=i.markers[0]:(i.marker=this.renderer.render(i,e,t),i.markers.forEach(o=>Sn.setMap(o,null)),this.onClusterClick&&i.marker.addListener("click",o=>{google.maps.event.trigger(this,va.CLUSTER_CLICK,i),this.onClusterClick(o,i,t)})),Sn.setMap(i.marker,t)})}}function Wg(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,i)}return t}function qg(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wg(Object(t),!0).forEach(function(i){X(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Wg(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function v0(r){var e=aw(),[t,i]=y.useState(null);return y.useEffect(()=>{if(e&&t===null){var o=new m0(qg(qg({},r),{},{map:e}));i(o)}},[e]),t}function y0(r){var{children:e,options:t}=r,i=v0(t);return i!==null?e(i):null}y.memo(y0);var Kg={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},Gg={options(r,e){r.setOptions(e)},position(r,e){r.setPosition(e)},zIndex(r,e){r.setZIndex(e)}};function _0(r){var{children:e,anchor:t,options:i,position:o,zIndex:l,onCloseClick:h,onDomReady:d,onContentChanged:g,onPositionChanged:v,onZindexChanged:E,onLoad:S,onUnmount:T}=r,R=y.useContext(je),[M,j]=y.useState(null),[N,Y]=y.useState(null),[Z,le]=y.useState(null),[K,H]=y.useState(null),[q,k]=y.useState(null),[I,C]=y.useState(null),A=y.useRef(null);return y.useEffect(()=>{M!==null&&(M.close(),t?M.open(R,t):M.getPosition()&&M.open(R))},[R,M,t]),y.useEffect(()=>{i&&M!==null&&M.setOptions(i)},[M,i]),y.useEffect(()=>{o&&M!==null&&M.setPosition(o)},[o]),y.useEffect(()=>{typeof l=="number"&&M!==null&&M.setZIndex(l)},[l]),y.useEffect(()=>{M&&h&&(N!==null&&google.maps.event.removeListener(N),Y(google.maps.event.addListener(M,"closeclick",h)))},[h]),y.useEffect(()=>{M&&d&&(Z!==null&&google.maps.event.removeListener(Z),le(google.maps.event.addListener(M,"domready",d)))},[d]),y.useEffect(()=>{M&&g&&(K!==null&&google.maps.event.removeListener(K),H(google.maps.event.addListener(M,"content_changed",g)))},[g]),y.useEffect(()=>{M&&v&&(q!==null&&google.maps.event.removeListener(q),k(google.maps.event.addListener(M,"position_changed",v)))},[v]),y.useEffect(()=>{M&&E&&(I!==null&&google.maps.event.removeListener(I),C(google.maps.event.addListener(M,"zindex_changed",E)))},[E]),y.useEffect(()=>{var D=new google.maps.InfoWindow(i);return j(D),A.current=document.createElement("div"),h&&Y(google.maps.event.addListener(D,"closeclick",h)),d&&le(google.maps.event.addListener(D,"domready",d)),g&&H(google.maps.event.addListener(D,"content_changed",g)),v&&k(google.maps.event.addListener(D,"position_changed",v)),E&&C(google.maps.event.addListener(D,"zindex_changed",E)),D.setContent(A.current),o&&D.setPosition(o),l&&D.setZIndex(l),t?D.open(R,t):D.getPosition()?D.open(R):At(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),S&&S(D),()=>{N&&google.maps.event.removeListener(N),K&&google.maps.event.removeListener(K),Z&&google.maps.event.removeListener(Z),q&&google.maps.event.removeListener(q),I&&google.maps.event.removeListener(I),T&&T(D),D.close()}},[]),A.current?Eo.createPortal(y.Children.only(e),A.current):null}y.memo(_0);class E0 extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"containerElement",null),X(this,"state",{infoWindow:null}),X(this,"open",(e,t)=>{t?e.open(this.context,t):e.getPosition()?e.open(this.context):At(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),X(this,"setInfoWindowCallback",()=>{this.state.infoWindow!==null&&this.containerElement!==null&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=ze({updaterMap:Gg,eventMap:Kg,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({infoWindow:e}),this.setInfoWindowCallback)}componentDidUpdate(e){this.state.infoWindow!==null&&($e(this.registeredEvents),this.registeredEvents=ze({updaterMap:Gg,eventMap:Kg,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){this.state.infoWindow!==null&&($e(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?Eo.createPortal(y.Children.only(this.props.children),this.containerElement):null}}X(E0,"contextType",je);function Qg(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,i)}return t}function pu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Qg(Object(t),!0).forEach(function(i){X(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Qg(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}var Zg={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},Xg={draggable(r,e){r.setDraggable(e)},editable(r,e){r.setEditable(e)},map(r,e){r.setMap(e)},options(r,e){r.setOptions(e)},path(r,e){r.setPath(e)},visible(r,e){r.setVisible(e)}},w0={};function S0(r){var{options:e,draggable:t,editable:i,visible:o,path:l,onDblClick:h,onDragEnd:d,onDragStart:g,onMouseDown:v,onMouseMove:E,onMouseOut:S,onMouseOver:T,onMouseUp:R,onRightClick:M,onClick:j,onDrag:N,onLoad:Y,onUnmount:Z}=r,le=y.useContext(je),[K,H]=y.useState(null),[q,k]=y.useState(null),[I,C]=y.useState(null),[A,D]=y.useState(null),[b,P]=y.useState(null),[pe,Se]=y.useState(null),[Pe,Le]=y.useState(null),[J,he]=y.useState(null),[ie,V]=y.useState(null),[G,re]=y.useState(null),[ge,$]=y.useState(null),[Ce,Ie]=y.useState(null);return y.useEffect(()=>{K!==null&&K.setMap(le)},[le]),y.useEffect(()=>{typeof e<"u"&&K!==null&&K.setOptions(e)},[K,e]),y.useEffect(()=>{typeof t<"u"&&K!==null&&K.setDraggable(t)},[K,t]),y.useEffect(()=>{typeof i<"u"&&K!==null&&K.setEditable(i)},[K,i]),y.useEffect(()=>{typeof o<"u"&&K!==null&&K.setVisible(o)},[K,o]),y.useEffect(()=>{typeof l<"u"&&K!==null&&K.setPath(l)},[K,l]),y.useEffect(()=>{K&&h&&(q!==null&&google.maps.event.removeListener(q),k(google.maps.event.addListener(K,"dblclick",h)))},[h]),y.useEffect(()=>{K&&d&&(I!==null&&google.maps.event.removeListener(I),C(google.maps.event.addListener(K,"dragend",d)))},[d]),y.useEffect(()=>{K&&g&&(A!==null&&google.maps.event.removeListener(A),D(google.maps.event.addListener(K,"dragstart",g)))},[g]),y.useEffect(()=>{K&&v&&(b!==null&&google.maps.event.removeListener(b),P(google.maps.event.addListener(K,"mousedown",v)))},[v]),y.useEffect(()=>{K&&E&&(pe!==null&&google.maps.event.removeListener(pe),Se(google.maps.event.addListener(K,"mousemove",E)))},[E]),y.useEffect(()=>{K&&S&&(Pe!==null&&google.maps.event.removeListener(Pe),Le(google.maps.event.addListener(K,"mouseout",S)))},[S]),y.useEffect(()=>{K&&T&&(J!==null&&google.maps.event.removeListener(J),he(google.maps.event.addListener(K,"mouseover",T)))},[T]),y.useEffect(()=>{K&&R&&(ie!==null&&google.maps.event.removeListener(ie),V(google.maps.event.addListener(K,"mouseup",R)))},[R]),y.useEffect(()=>{K&&M&&(G!==null&&google.maps.event.removeListener(G),re(google.maps.event.addListener(K,"rightclick",M)))},[M]),y.useEffect(()=>{K&&j&&(ge!==null&&google.maps.event.removeListener(ge),$(google.maps.event.addListener(K,"click",j)))},[j]),y.useEffect(()=>{K&&N&&(Ce!==null&&google.maps.event.removeListener(Ce),Ie(google.maps.event.addListener(K,"drag",N)))},[N]),y.useEffect(()=>{var de=new google.maps.Polyline(pu(pu({},e||w0),{},{map:le}));return l&&de.setPath(l),typeof o<"u"&&de.setVisible(o),typeof i<"u"&&de.setEditable(i),typeof t<"u"&&de.setDraggable(t),h&&k(google.maps.event.addListener(de,"dblclick",h)),d&&C(google.maps.event.addListener(de,"dragend",d)),g&&D(google.maps.event.addListener(de,"dragstart",g)),v&&P(google.maps.event.addListener(de,"mousedown",v)),E&&Se(google.maps.event.addListener(de,"mousemove",E)),S&&Le(google.maps.event.addListener(de,"mouseout",S)),T&&he(google.maps.event.addListener(de,"mouseover",T)),R&&V(google.maps.event.addListener(de,"mouseup",R)),M&&re(google.maps.event.addListener(de,"rightclick",M)),j&&$(google.maps.event.addListener(de,"click",j)),N&&Ie(google.maps.event.addListener(de,"drag",N)),H(de),Y&&Y(de),()=>{q!==null&&google.maps.event.removeListener(q),I!==null&&google.maps.event.removeListener(I),A!==null&&google.maps.event.removeListener(A),b!==null&&google.maps.event.removeListener(b),pe!==null&&google.maps.event.removeListener(pe),Pe!==null&&google.maps.event.removeListener(Pe),J!==null&&google.maps.event.removeListener(J),ie!==null&&google.maps.event.removeListener(ie),G!==null&&google.maps.event.removeListener(G),ge!==null&&google.maps.event.removeListener(ge),Z&&Z(de),de.setMap(null)}},[]),null}y.memo(S0);class C0 extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"state",{polyline:null}),X(this,"setPolylineCallback",()=>{this.state.polyline!==null&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var e=new google.maps.Polyline(pu(pu({},this.props.options),{},{map:this.context}));this.registeredEvents=ze({updaterMap:Xg,eventMap:Zg,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{polyline:e}},this.setPolylineCallback)}componentDidUpdate(e){this.state.polyline!==null&&($e(this.registeredEvents),this.registeredEvents=ze({updaterMap:Xg,eventMap:Zg,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),$e(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}X(C0,"contextType",je);function Yg(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,i)}return t}function Jg(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Yg(Object(t),!0).forEach(function(i){X(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Yg(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}var em={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},tm={draggable(r,e){r.setDraggable(e)},editable(r,e){r.setEditable(e)},map(r,e){r.setMap(e)},options(r,e){r.setOptions(e)},path(r,e){r.setPath(e)},paths(r,e){r.setPaths(e)},visible(r,e){r.setVisible(e)}};function T0(r){var{options:e,draggable:t,editable:i,visible:o,path:l,paths:h,onDblClick:d,onDragEnd:g,onDragStart:v,onMouseDown:E,onMouseMove:S,onMouseOut:T,onMouseOver:R,onMouseUp:M,onRightClick:j,onClick:N,onDrag:Y,onLoad:Z,onUnmount:le,onEdit:K}=r,H=y.useContext(je),[q,k]=y.useState(null),[I,C]=y.useState(null),[A,D]=y.useState(null),[b,P]=y.useState(null),[pe,Se]=y.useState(null),[Pe,Le]=y.useState(null),[J,he]=y.useState(null),[ie,V]=y.useState(null),[G,re]=y.useState(null),[ge,$]=y.useState(null),[Ce,Ie]=y.useState(null),[de,te]=y.useState(null);return y.useEffect(()=>{q!==null&&q.setMap(H)},[H]),y.useEffect(()=>{typeof e<"u"&&q!==null&&q.setOptions(e)},[q,e]),y.useEffect(()=>{typeof t<"u"&&q!==null&&q.setDraggable(t)},[q,t]),y.useEffect(()=>{typeof i<"u"&&q!==null&&q.setEditable(i)},[q,i]),y.useEffect(()=>{typeof o<"u"&&q!==null&&q.setVisible(o)},[q,o]),y.useEffect(()=>{typeof l<"u"&&q!==null&&q.setPath(l)},[q,l]),y.useEffect(()=>{typeof h<"u"&&q!==null&&q.setPaths(h)},[q,h]),y.useEffect(()=>{q&&typeof d=="function"&&(I!==null&&google.maps.event.removeListener(I),C(google.maps.event.addListener(q,"dblclick",d)))},[d]),y.useEffect(()=>{q&&(google.maps.event.addListener(q.getPath(),"insert_at",()=>{K==null||K(q)}),google.maps.event.addListener(q.getPath(),"set_at",()=>{K==null||K(q)}),google.maps.event.addListener(q.getPath(),"remove_at",()=>{K==null||K(q)}))},[q,K]),y.useEffect(()=>{q&&typeof g=="function"&&(A!==null&&google.maps.event.removeListener(A),D(google.maps.event.addListener(q,"dragend",g)))},[g]),y.useEffect(()=>{q&&typeof v=="function"&&(b!==null&&google.maps.event.removeListener(b),P(google.maps.event.addListener(q,"dragstart",v)))},[v]),y.useEffect(()=>{q&&typeof E=="function"&&(pe!==null&&google.maps.event.removeListener(pe),Se(google.maps.event.addListener(q,"mousedown",E)))},[E]),y.useEffect(()=>{q&&typeof S=="function"&&(Pe!==null&&google.maps.event.removeListener(Pe),Le(google.maps.event.addListener(q,"mousemove",S)))},[S]),y.useEffect(()=>{q&&typeof T=="function"&&(J!==null&&google.maps.event.removeListener(J),he(google.maps.event.addListener(q,"mouseout",T)))},[T]),y.useEffect(()=>{q&&typeof R=="function"&&(ie!==null&&google.maps.event.removeListener(ie),V(google.maps.event.addListener(q,"mouseover",R)))},[R]),y.useEffect(()=>{q&&typeof M=="function"&&(G!==null&&google.maps.event.removeListener(G),re(google.maps.event.addListener(q,"mouseup",M)))},[M]),y.useEffect(()=>{q&&typeof j=="function"&&(ge!==null&&google.maps.event.removeListener(ge),$(google.maps.event.addListener(q,"rightclick",j)))},[j]),y.useEffect(()=>{q&&typeof N=="function"&&(Ce!==null&&google.maps.event.removeListener(Ce),Ie(google.maps.event.addListener(q,"click",N)))},[N]),y.useEffect(()=>{q&&typeof Y=="function"&&(de!==null&&google.maps.event.removeListener(de),te(google.maps.event.addListener(q,"drag",Y)))},[Y]),y.useEffect(()=>{var ee=new google.maps.Polygon(Jg(Jg({},e),{},{map:H}));return l&&ee.setPath(l),h&&ee.setPaths(h),typeof o<"u"&&ee.setVisible(o),typeof i<"u"&&ee.setEditable(i),typeof t<"u"&&ee.setDraggable(t),d&&C(google.maps.event.addListener(ee,"dblclick",d)),g&&D(google.maps.event.addListener(ee,"dragend",g)),v&&P(google.maps.event.addListener(ee,"dragstart",v)),E&&Se(google.maps.event.addListener(ee,"mousedown",E)),S&&Le(google.maps.event.addListener(ee,"mousemove",S)),T&&he(google.maps.event.addListener(ee,"mouseout",T)),R&&V(google.maps.event.addListener(ee,"mouseover",R)),M&&re(google.maps.event.addListener(ee,"mouseup",M)),j&&$(google.maps.event.addListener(ee,"rightclick",j)),N&&Ie(google.maps.event.addListener(ee,"click",N)),Y&&te(google.maps.event.addListener(ee,"drag",Y)),k(ee),Z&&Z(ee),()=>{I!==null&&google.maps.event.removeListener(I),A!==null&&google.maps.event.removeListener(A),b!==null&&google.maps.event.removeListener(b),pe!==null&&google.maps.event.removeListener(pe),Pe!==null&&google.maps.event.removeListener(Pe),J!==null&&google.maps.event.removeListener(J),ie!==null&&google.maps.event.removeListener(ie),G!==null&&google.maps.event.removeListener(G),ge!==null&&google.maps.event.removeListener(ge),Ce!==null&&google.maps.event.removeListener(Ce),le&&le(ee),ee.setMap(null)}},[]),null}y.memo(T0);class L0 extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=ze({updaterMap:tm,eventMap:em,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&($e(this.registeredEvents),this.registeredEvents=ze({updaterMap:tm,eventMap:em,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),$e(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}X(L0,"contextType",je);function nm(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,i)}return t}function gu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?nm(Object(t),!0).forEach(function(i){X(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):nm(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}var rm={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},im={bounds(r,e){r.setBounds(e)},draggable(r,e){r.setDraggable(e)},editable(r,e){r.setEditable(e)},map(r,e){r.setMap(e)},options(r,e){r.setOptions(e)},visible(r,e){r.setVisible(e)}};function I0(r){var{options:e,bounds:t,draggable:i,editable:o,visible:l,onDblClick:h,onDragEnd:d,onDragStart:g,onMouseDown:v,onMouseMove:E,onMouseOut:S,onMouseOver:T,onMouseUp:R,onRightClick:M,onClick:j,onDrag:N,onBoundsChanged:Y,onLoad:Z,onUnmount:le}=r,K=y.useContext(je),[H,q]=y.useState(null),[k,I]=y.useState(null),[C,A]=y.useState(null),[D,b]=y.useState(null),[P,pe]=y.useState(null),[Se,Pe]=y.useState(null),[Le,J]=y.useState(null),[he,ie]=y.useState(null),[V,G]=y.useState(null),[re,ge]=y.useState(null),[$,Ce]=y.useState(null),[Ie,de]=y.useState(null),[te,ee]=y.useState(null);return y.useEffect(()=>{H!==null&&H.setMap(K)},[K]),y.useEffect(()=>{typeof e<"u"&&H!==null&&H.setOptions(e)},[H,e]),y.useEffect(()=>{typeof i<"u"&&H!==null&&H.setDraggable(i)},[H,i]),y.useEffect(()=>{typeof o<"u"&&H!==null&&H.setEditable(o)},[H,o]),y.useEffect(()=>{typeof l<"u"&&H!==null&&H.setVisible(l)},[H,l]),y.useEffect(()=>{typeof t<"u"&&H!==null&&H.setBounds(t)},[H,t]),y.useEffect(()=>{H&&h&&(k!==null&&google.maps.event.removeListener(k),I(google.maps.event.addListener(H,"dblclick",h)))},[h]),y.useEffect(()=>{H&&d&&(C!==null&&google.maps.event.removeListener(C),A(google.maps.event.addListener(H,"dragend",d)))},[d]),y.useEffect(()=>{H&&g&&(D!==null&&google.maps.event.removeListener(D),b(google.maps.event.addListener(H,"dragstart",g)))},[g]),y.useEffect(()=>{H&&v&&(P!==null&&google.maps.event.removeListener(P),pe(google.maps.event.addListener(H,"mousedown",v)))},[v]),y.useEffect(()=>{H&&E&&(Se!==null&&google.maps.event.removeListener(Se),Pe(google.maps.event.addListener(H,"mousemove",E)))},[E]),y.useEffect(()=>{H&&S&&(Le!==null&&google.maps.event.removeListener(Le),J(google.maps.event.addListener(H,"mouseout",S)))},[S]),y.useEffect(()=>{H&&T&&(he!==null&&google.maps.event.removeListener(he),ie(google.maps.event.addListener(H,"mouseover",T)))},[T]),y.useEffect(()=>{H&&R&&(V!==null&&google.maps.event.removeListener(V),G(google.maps.event.addListener(H,"mouseup",R)))},[R]),y.useEffect(()=>{H&&M&&(re!==null&&google.maps.event.removeListener(re),ge(google.maps.event.addListener(H,"rightclick",M)))},[M]),y.useEffect(()=>{H&&j&&($!==null&&google.maps.event.removeListener($),Ce(google.maps.event.addListener(H,"click",j)))},[j]),y.useEffect(()=>{H&&N&&(Ie!==null&&google.maps.event.removeListener(Ie),de(google.maps.event.addListener(H,"drag",N)))},[N]),y.useEffect(()=>{H&&Y&&(te!==null&&google.maps.event.removeListener(te),ee(google.maps.event.addListener(H,"bounds_changed",Y)))},[Y]),y.useEffect(()=>{var ye=new google.maps.Rectangle(gu(gu({},e),{},{map:K}));return typeof l<"u"&&ye.setVisible(l),typeof o<"u"&&ye.setEditable(o),typeof i<"u"&&ye.setDraggable(i),typeof t<"u"&&ye.setBounds(t),h&&I(google.maps.event.addListener(ye,"dblclick",h)),d&&A(google.maps.event.addListener(ye,"dragend",d)),g&&b(google.maps.event.addListener(ye,"dragstart",g)),v&&pe(google.maps.event.addListener(ye,"mousedown",v)),E&&Pe(google.maps.event.addListener(ye,"mousemove",E)),S&&J(google.maps.event.addListener(ye,"mouseout",S)),T&&ie(google.maps.event.addListener(ye,"mouseover",T)),R&&G(google.maps.event.addListener(ye,"mouseup",R)),M&&ge(google.maps.event.addListener(ye,"rightclick",M)),j&&Ce(google.maps.event.addListener(ye,"click",j)),N&&de(google.maps.event.addListener(ye,"drag",N)),Y&&ee(google.maps.event.addListener(ye,"bounds_changed",Y)),q(ye),Z&&Z(ye),()=>{k!==null&&google.maps.event.removeListener(k),C!==null&&google.maps.event.removeListener(C),D!==null&&google.maps.event.removeListener(D),P!==null&&google.maps.event.removeListener(P),Se!==null&&google.maps.event.removeListener(Se),Le!==null&&google.maps.event.removeListener(Le),he!==null&&google.maps.event.removeListener(he),V!==null&&google.maps.event.removeListener(V),re!==null&&google.maps.event.removeListener(re),$!==null&&google.maps.event.removeListener($),Ie!==null&&google.maps.event.removeListener(Ie),te!==null&&google.maps.event.removeListener(te),le&&le(ye),ye.setMap(null)}},[]),null}y.memo(I0);class k0 extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"state",{rectangle:null}),X(this,"setRectangleCallback",()=>{this.state.rectangle!==null&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var e=new google.maps.Rectangle(gu(gu({},this.props.options),{},{map:this.context}));this.registeredEvents=ze({updaterMap:im,eventMap:rm,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{rectangle:e}},this.setRectangleCallback)}componentDidUpdate(e){this.state.rectangle!==null&&($e(this.registeredEvents),this.registeredEvents=ze({updaterMap:im,eventMap:rm,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),$e(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}X(k0,"contextType",je);function sm(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,i)}return t}function mu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sm(Object(t),!0).forEach(function(i){X(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):sm(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}var om={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},am={center(r,e){r.setCenter(e)},draggable(r,e){r.setDraggable(e)},editable(r,e){r.setEditable(e)},map(r,e){r.setMap(e)},options(r,e){r.setOptions(e)},radius(r,e){r.setRadius(e)},visible(r,e){r.setVisible(e)}},P0={};function A0(r){var{options:e,center:t,radius:i,draggable:o,editable:l,visible:h,onDblClick:d,onDragEnd:g,onDragStart:v,onMouseDown:E,onMouseMove:S,onMouseOut:T,onMouseOver:R,onMouseUp:M,onRightClick:j,onClick:N,onDrag:Y,onCenterChanged:Z,onRadiusChanged:le,onLoad:K,onUnmount:H}=r,q=y.useContext(je),[k,I]=y.useState(null),[C,A]=y.useState(null),[D,b]=y.useState(null),[P,pe]=y.useState(null),[Se,Pe]=y.useState(null),[Le,J]=y.useState(null),[he,ie]=y.useState(null),[V,G]=y.useState(null),[re,ge]=y.useState(null),[$,Ce]=y.useState(null),[Ie,de]=y.useState(null),[te,ee]=y.useState(null),[ye,Be]=y.useState(null),[Xe,ot]=y.useState(null);return y.useEffect(()=>{k!==null&&k.setMap(q)},[q]),y.useEffect(()=>{typeof e<"u"&&k!==null&&k.setOptions(e)},[k,e]),y.useEffect(()=>{typeof o<"u"&&k!==null&&k.setDraggable(o)},[k,o]),y.useEffect(()=>{typeof l<"u"&&k!==null&&k.setEditable(l)},[k,l]),y.useEffect(()=>{typeof h<"u"&&k!==null&&k.setVisible(h)},[k,h]),y.useEffect(()=>{typeof i=="number"&&k!==null&&k.setRadius(i)},[k,i]),y.useEffect(()=>{typeof t<"u"&&k!==null&&k.setCenter(t)},[k,t]),y.useEffect(()=>{k&&d&&(C!==null&&google.maps.event.removeListener(C),A(google.maps.event.addListener(k,"dblclick",d)))},[d]),y.useEffect(()=>{k&&g&&(D!==null&&google.maps.event.removeListener(D),b(google.maps.event.addListener(k,"dragend",g)))},[g]),y.useEffect(()=>{k&&v&&(P!==null&&google.maps.event.removeListener(P),pe(google.maps.event.addListener(k,"dragstart",v)))},[v]),y.useEffect(()=>{k&&E&&(Se!==null&&google.maps.event.removeListener(Se),Pe(google.maps.event.addListener(k,"mousedown",E)))},[E]),y.useEffect(()=>{k&&S&&(Le!==null&&google.maps.event.removeListener(Le),J(google.maps.event.addListener(k,"mousemove",S)))},[S]),y.useEffect(()=>{k&&T&&(he!==null&&google.maps.event.removeListener(he),ie(google.maps.event.addListener(k,"mouseout",T)))},[T]),y.useEffect(()=>{k&&R&&(V!==null&&google.maps.event.removeListener(V),G(google.maps.event.addListener(k,"mouseover",R)))},[R]),y.useEffect(()=>{k&&M&&(re!==null&&google.maps.event.removeListener(re),ge(google.maps.event.addListener(k,"mouseup",M)))},[M]),y.useEffect(()=>{k&&j&&($!==null&&google.maps.event.removeListener($),Ce(google.maps.event.addListener(k,"rightclick",j)))},[j]),y.useEffect(()=>{k&&N&&(Ie!==null&&google.maps.event.removeListener(Ie),de(google.maps.event.addListener(k,"click",N)))},[N]),y.useEffect(()=>{k&&Y&&(te!==null&&google.maps.event.removeListener(te),ee(google.maps.event.addListener(k,"drag",Y)))},[Y]),y.useEffect(()=>{k&&Z&&(ye!==null&&google.maps.event.removeListener(ye),Be(google.maps.event.addListener(k,"center_changed",Z)))},[N]),y.useEffect(()=>{k&&le&&(Xe!==null&&google.maps.event.removeListener(Xe),ot(google.maps.event.addListener(k,"radius_changed",le)))},[le]),y.useEffect(()=>{var Ne=new google.maps.Circle(mu(mu({},e||P0),{},{map:q}));return typeof i=="number"&&Ne.setRadius(i),typeof t<"u"&&Ne.setCenter(t),typeof i=="number"&&Ne.setRadius(i),typeof h<"u"&&Ne.setVisible(h),typeof l<"u"&&Ne.setEditable(l),typeof o<"u"&&Ne.setDraggable(o),d&&A(google.maps.event.addListener(Ne,"dblclick",d)),g&&b(google.maps.event.addListener(Ne,"dragend",g)),v&&pe(google.maps.event.addListener(Ne,"dragstart",v)),E&&Pe(google.maps.event.addListener(Ne,"mousedown",E)),S&&J(google.maps.event.addListener(Ne,"mousemove",S)),T&&ie(google.maps.event.addListener(Ne,"mouseout",T)),R&&G(google.maps.event.addListener(Ne,"mouseover",R)),M&&ge(google.maps.event.addListener(Ne,"mouseup",M)),j&&Ce(google.maps.event.addListener(Ne,"rightclick",j)),N&&de(google.maps.event.addListener(Ne,"click",N)),Y&&ee(google.maps.event.addListener(Ne,"drag",Y)),Z&&Be(google.maps.event.addListener(Ne,"center_changed",Z)),le&&ot(google.maps.event.addListener(Ne,"radius_changed",le)),I(Ne),K&&K(Ne),()=>{C!==null&&google.maps.event.removeListener(C),D!==null&&google.maps.event.removeListener(D),P!==null&&google.maps.event.removeListener(P),Se!==null&&google.maps.event.removeListener(Se),Le!==null&&google.maps.event.removeListener(Le),he!==null&&google.maps.event.removeListener(he),V!==null&&google.maps.event.removeListener(V),re!==null&&google.maps.event.removeListener(re),$!==null&&google.maps.event.removeListener($),Ie!==null&&google.maps.event.removeListener(Ie),ye!==null&&google.maps.event.removeListener(ye),Xe!==null&&google.maps.event.removeListener(Xe),H&&H(Ne),Ne.setMap(null)}},[]),null}y.memo(A0);class x0 extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"state",{circle:null}),X(this,"setCircleCallback",()=>{this.state.circle!==null&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var e=new google.maps.Circle(mu(mu({},this.props.options),{},{map:this.context}));this.registeredEvents=ze({updaterMap:am,eventMap:om,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{circle:e}},this.setCircleCallback)}componentDidUpdate(e){this.state.circle!==null&&($e(this.registeredEvents),this.registeredEvents=ze({updaterMap:am,eventMap:om,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){if(this.state.circle!==null){var e;this.props.onUnmount&&this.props.onUnmount(this.state.circle),$e(this.registeredEvents),(e=this.state.circle)===null||e===void 0||e.setMap(null)}}render(){return null}}X(x0,"contextType",je);function lm(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,i)}return t}function vu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lm(Object(t),!0).forEach(function(i){X(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):lm(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}var um={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},cm={add(r,e){r.add(e)},addgeojson(r,e,t){r.addGeoJson(e,t)},contains(r,e){r.contains(e)},foreach(r,e){r.forEach(e)},loadgeojson(r,e,t,i){r.loadGeoJson(e,t,i)},overridestyle(r,e,t){r.overrideStyle(e,t)},remove(r,e){r.remove(e)},revertstyle(r,e){r.revertStyle(e)},controlposition(r,e){r.setControlPosition(e)},controls(r,e){r.setControls(e)},drawingmode(r,e){r.setDrawingMode(e)},map(r,e){r.setMap(e)},style(r,e){r.setStyle(e)},togeojson(r,e){r.toGeoJson(e)}};function R0(r){var{options:e,onClick:t,onDblClick:i,onMouseDown:o,onMouseMove:l,onMouseOut:h,onMouseOver:d,onMouseUp:g,onRightClick:v,onAddFeature:E,onRemoveFeature:S,onRemoveProperty:T,onSetGeometry:R,onSetProperty:M,onLoad:j,onUnmount:N}=r,Y=y.useContext(je),[Z,le]=y.useState(null),[K,H]=y.useState(null),[q,k]=y.useState(null),[I,C]=y.useState(null),[A,D]=y.useState(null),[b,P]=y.useState(null),[pe,Se]=y.useState(null),[Pe,Le]=y.useState(null),[J,he]=y.useState(null),[ie,V]=y.useState(null),[G,re]=y.useState(null),[ge,$]=y.useState(null),[Ce,Ie]=y.useState(null),[de,te]=y.useState(null);return y.useEffect(()=>{Z!==null&&Z.setMap(Y)},[Y]),y.useEffect(()=>{Z&&i&&(K!==null&&google.maps.event.removeListener(K),H(google.maps.event.addListener(Z,"dblclick",i)))},[i]),y.useEffect(()=>{Z&&o&&(q!==null&&google.maps.event.removeListener(q),k(google.maps.event.addListener(Z,"mousedown",o)))},[o]),y.useEffect(()=>{Z&&l&&(I!==null&&google.maps.event.removeListener(I),C(google.maps.event.addListener(Z,"mousemove",l)))},[l]),y.useEffect(()=>{Z&&h&&(A!==null&&google.maps.event.removeListener(A),D(google.maps.event.addListener(Z,"mouseout",h)))},[h]),y.useEffect(()=>{Z&&d&&(b!==null&&google.maps.event.removeListener(b),P(google.maps.event.addListener(Z,"mouseover",d)))},[d]),y.useEffect(()=>{Z&&g&&(pe!==null&&google.maps.event.removeListener(pe),Se(google.maps.event.addListener(Z,"mouseup",g)))},[g]),y.useEffect(()=>{Z&&v&&(Pe!==null&&google.maps.event.removeListener(Pe),Le(google.maps.event.addListener(Z,"rightclick",v)))},[v]),y.useEffect(()=>{Z&&t&&(J!==null&&google.maps.event.removeListener(J),he(google.maps.event.addListener(Z,"click",t)))},[t]),y.useEffect(()=>{Z&&E&&(ie!==null&&google.maps.event.removeListener(ie),V(google.maps.event.addListener(Z,"addfeature",E)))},[E]),y.useEffect(()=>{Z&&S&&(G!==null&&google.maps.event.removeListener(G),re(google.maps.event.addListener(Z,"removefeature",S)))},[S]),y.useEffect(()=>{Z&&T&&(ge!==null&&google.maps.event.removeListener(ge),$(google.maps.event.addListener(Z,"removeproperty",T)))},[T]),y.useEffect(()=>{Z&&R&&(Ce!==null&&google.maps.event.removeListener(Ce),Ie(google.maps.event.addListener(Z,"setgeometry",R)))},[R]),y.useEffect(()=>{Z&&M&&(de!==null&&google.maps.event.removeListener(de),te(google.maps.event.addListener(Z,"setproperty",M)))},[M]),y.useEffect(()=>{if(Y!==null){var ee=new google.maps.Data(vu(vu({},e),{},{map:Y}));i&&H(google.maps.event.addListener(ee,"dblclick",i)),o&&k(google.maps.event.addListener(ee,"mousedown",o)),l&&C(google.maps.event.addListener(ee,"mousemove",l)),h&&D(google.maps.event.addListener(ee,"mouseout",h)),d&&P(google.maps.event.addListener(ee,"mouseover",d)),g&&Se(google.maps.event.addListener(ee,"mouseup",g)),v&&Le(google.maps.event.addListener(ee,"rightclick",v)),t&&he(google.maps.event.addListener(ee,"click",t)),E&&V(google.maps.event.addListener(ee,"addfeature",E)),S&&re(google.maps.event.addListener(ee,"removefeature",S)),T&&$(google.maps.event.addListener(ee,"removeproperty",T)),R&&Ie(google.maps.event.addListener(ee,"setgeometry",R)),M&&te(google.maps.event.addListener(ee,"setproperty",M)),le(ee),j&&j(ee)}return()=>{Z&&(K!==null&&google.maps.event.removeListener(K),q!==null&&google.maps.event.removeListener(q),I!==null&&google.maps.event.removeListener(I),A!==null&&google.maps.event.removeListener(A),b!==null&&google.maps.event.removeListener(b),pe!==null&&google.maps.event.removeListener(pe),Pe!==null&&google.maps.event.removeListener(Pe),J!==null&&google.maps.event.removeListener(J),ie!==null&&google.maps.event.removeListener(ie),G!==null&&google.maps.event.removeListener(G),ge!==null&&google.maps.event.removeListener(ge),Ce!==null&&google.maps.event.removeListener(Ce),de!==null&&google.maps.event.removeListener(de),N&&N(Z),Z.setMap(null))}},[]),null}y.memo(R0);class M0 extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"state",{data:null}),X(this,"setDataCallback",()=>{this.state.data!==null&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(this.context!==null){var e=new google.maps.Data(vu(vu({},this.props.options),{},{map:this.context}));this.registeredEvents=ze({updaterMap:cm,eventMap:um,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({data:e}),this.setDataCallback)}}componentDidUpdate(e){this.state.data!==null&&($e(this.registeredEvents),this.registeredEvents=ze({updaterMap:cm,eventMap:um,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),$e(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}X(M0,"contextType",je);function hm(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,i)}return t}function fm(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hm(Object(t),!0).forEach(function(i){X(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):hm(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}var dm={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},pm={options(r,e){r.setOptions(e)},url(r,e){r.setUrl(e)},zIndex(r,e){r.setZIndex(e)}};class D0 extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"state",{kmlLayer:null}),X(this,"setKmlLayerCallback",()=>{this.state.kmlLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var e=new google.maps.KmlLayer(fm(fm({},this.props.options),{},{map:this.context}));this.registeredEvents=ze({updaterMap:pm,eventMap:dm,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{kmlLayer:e}},this.setKmlLayerCallback)}componentDidUpdate(e){this.state.kmlLayer!==null&&($e(this.registeredEvents),this.registeredEvents=ze({updaterMap:pm,eventMap:dm,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),$e(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}X(D0,"contextType",je);function Jv(r,e){return typeof e=="function"?e(r.offsetWidth,r.offsetHeight):{x:0,y:0}}function b0(r,e){return new e(r.lat,r.lng)}function O0(r,e){return new e(new google.maps.LatLng(r.ne.lat,r.ne.lng),new google.maps.LatLng(r.sw.lat,r.sw.lng))}function V0(r,e,t){return r instanceof e?r:t(r,e)}function N0(r,e,t){return r instanceof e?r:t(r,e)}function F0(r,e,t){var i=r&&r.fromLatLngToDivPixel(t.getNorthEast()),o=r&&r.fromLatLngToDivPixel(t.getSouthWest());return i&&o?{left:"".concat(o.x+e.x,"px"),top:"".concat(i.y+e.y,"px"),width:"".concat(i.x-o.x-e.x,"px"),height:"".concat(o.y-i.y-e.y,"px")}:{left:"-9999px",top:"-9999px"}}function j0(r,e,t){var i=r&&r.fromLatLngToDivPixel(t);if(i){var{x:o,y:l}=i;return{left:"".concat(o+e.x,"px"),top:"".concat(l+e.y,"px")}}return{left:"-9999px",top:"-9999px"}}function ey(r,e,t,i){return t!==void 0?F0(r,e,N0(t,google.maps.LatLngBounds,O0)):j0(r,e,V0(i,google.maps.LatLng,b0))}function U0(r,e){return r.left===e.left&&r.top===e.top&&r.width===e.height&&r.height===e.height}function gm(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,i)}return t}function z0(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gm(Object(t),!0).forEach(function(i){X(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):gm(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function B0(r,e,t,i,o){class l extends google.maps.OverlayView{constructor(d,g,v,E){super(),this.container=d,this.pane=g,this.position=v,this.bounds=E}onAdd(){var d,g=(d=this.getPanes())===null||d===void 0?void 0:d[this.pane];g==null||g.appendChild(this.container)}draw(){var d=this.getProjection(),g=z0({},this.container?Jv(this.container,o):{x:0,y:0}),v=ey(d,g,this.bounds,this.position);for(var[E,S]of Object.entries(v))this.container.style[E]=S}onRemove(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)}}return new l(r,e,t,i)}function mm(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,i)}return t}function $0(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?mm(Object(t),!0).forEach(function(i){X(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):mm(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function vm(r){if(!r)return"";var e=r instanceof google.maps.LatLng?r:new google.maps.LatLng(r.lat,r.lng);return e+""}function ym(r){if(!r)return"";var e=r instanceof google.maps.LatLngBounds?r:new google.maps.LatLngBounds(new google.maps.LatLng(r.south,r.east),new google.maps.LatLng(r.north,r.west));return e+""}function H0(r){var{position:e,bounds:t,mapPaneName:i,zIndex:o,onLoad:l,onUnmount:h,getPixelPositionOffset:d,children:g}=r,v=y.useContext(je),E=y.useMemo(()=>{var T=document.createElement("div");return T.style.position="absolute",T},[]),S=y.useMemo(()=>B0(E,i,e,t,d),[E,i,e,t]);return y.useEffect(()=>(l==null||l(S),S==null||S.setMap(v),()=>{h==null||h(S),S==null||S.setMap(null)}),[v,S]),y.useEffect(()=>{E.style.zIndex="".concat(o)},[o,E]),Eo.createPortal(g,E)}y.memo(H0);class wo extends y.PureComponent{constructor(e){super(e),X(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),X(this,"updatePane",()=>{var i=this.props.mapPaneName,o=this.overlayView.getPanes();At(!!i,"OverlayView requires props.mapPaneName but got %s",i),o?this.setState({paneEl:o[i]}):this.setState({paneEl:null})}),X(this,"onAdd",()=>{var i,o;this.updatePane(),(i=(o=this.props).onLoad)===null||i===void 0||i.call(o,this.overlayView)}),X(this,"onPositionElement",()=>{var i=this.overlayView.getProjection(),o=$0({x:0,y:0},this.containerRef.current?Jv(this.containerRef.current,this.props.getPixelPositionOffset):{}),l=ey(i,o,this.props.bounds,this.props.position);if(!U0(l,{left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height})){var h,d,g,v;this.setState({containerStyle:{top:(h=l.top)!==null&&h!==void 0?h:0,left:(d=l.left)!==null&&d!==void 0?d:0,width:(g=l.width)!==null&&g!==void 0?g:0,height:(v=l.height)!==null&&v!==void 0?v:0,position:"absolute"}})}}),X(this,"draw",()=>{this.onPositionElement()}),X(this,"onRemove",()=>{var i,o;this.setState(()=>({paneEl:null})),(i=(o=this.props).onUnmount)===null||i===void 0||i.call(o,this.overlayView)}),this.containerRef=y.createRef();var t=new google.maps.OverlayView;t.onAdd=this.onAdd,t.draw=this.draw,t.onRemove=this.onRemove,this.overlayView=t}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var t=vm(e.position),i=vm(this.props.position),o=ym(e.bounds),l=ym(this.props.bounds);(t!==i||o!==l)&&this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var e=this.state.paneEl;return e?Eo.createPortal(Ae.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:y.Children.only(this.props.children)}),e):null}}X(wo,"FLOAT_PANE","floatPane");X(wo,"MAP_PANE","mapPane");X(wo,"MARKER_LAYER","markerLayer");X(wo,"OVERLAY_LAYER","overlayLayer");X(wo,"OVERLAY_MOUSE_TARGET","overlayMouseTarget");X(wo,"contextType",je);function W0(){}function _m(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,i)}return t}function Em(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_m(Object(t),!0).forEach(function(i){X(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):_m(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}var wm={onDblClick:"dblclick",onClick:"click"},Sm={opacity(r,e){r.setOpacity(e)}};function q0(r){var{url:e,bounds:t,options:i,visible:o}=r,l=y.useContext(je),h=new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.west),new google.maps.LatLng(t.north,t.east)),d=y.useMemo(()=>new google.maps.GroundOverlay(e,h,i),[]);return y.useEffect(()=>{d!==null&&d.setMap(l)},[l]),y.useEffect(()=>{typeof e<"u"&&d!==null&&(d.set("url",e),d.setMap(l))},[d,e]),y.useEffect(()=>{typeof o<"u"&&d!==null&&d.setOpacity(o?1:0)},[d,o]),y.useEffect(()=>{var g=new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.west),new google.maps.LatLng(t.north,t.east));typeof t<"u"&&d!==null&&(d.set("bounds",g),d.setMap(l))},[d,t]),null}y.memo(q0);class ty extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"state",{groundOverlay:null}),X(this,"setGroundOverlayCallback",()=>{this.state.groundOverlay!==null&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){At(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,Em(Em({},this.props.options),{},{map:this.context}));this.registeredEvents=ze({updaterMap:Sm,eventMap:wm,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{groundOverlay:e}},this.setGroundOverlayCallback)}componentDidUpdate(e){this.state.groundOverlay!==null&&($e(this.registeredEvents),this.registeredEvents=ze({updaterMap:Sm,eventMap:wm,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}X(ty,"defaultProps",{onLoad:W0});X(ty,"contextType",je);function Cm(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,i)}return t}function yu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Cm(Object(t),!0).forEach(function(i){X(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Cm(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}var Tm={},Lm={data(r,e){r.setData(e)},map(r,e){r.setMap(e)},options(r,e){r.setOptions(e)}};function K0(r){var{data:e,onLoad:t,onUnmount:i,options:o}=r,l=y.useContext(je),[h,d]=y.useState(null);return y.useEffect(()=>{google.maps.visualization||At(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),y.useEffect(()=>{At(!!e,"data property is required in HeatmapLayer %s",e)},[e]),y.useEffect(()=>{h!==null&&h.setMap(l)},[l]),y.useEffect(()=>{o&&h!==null&&h.setOptions(o)},[h,o]),y.useEffect(()=>{var g=new google.maps.visualization.HeatmapLayer(yu(yu({},o),{},{data:e,map:l}));return d(g),t&&t(g),()=>{h!==null&&(i&&i(h),h.setMap(null))}},[]),null}y.memo(K0);class G0 extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"state",{heatmapLayer:null}),X(this,"setHeatmapLayerCallback",()=>{this.state.heatmapLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){At(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),At(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(yu(yu({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=ze({updaterMap:Lm,eventMap:Tm,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{heatmapLayer:e}},this.setHeatmapLayerCallback)}componentDidUpdate(e){$e(this.registeredEvents),this.registeredEvents=ze({updaterMap:Lm,eventMap:Tm,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),$e(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}X(G0,"contextType",je);var Im={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},km={register(r,e,t){r.registerPanoProvider(e,t)},links(r,e){r.setLinks(e)},motionTracking(r,e){r.setMotionTracking(e)},options(r,e){r.setOptions(e)},pano(r,e){r.setPano(e)},position(r,e){r.setPosition(e)},pov(r,e){r.setPov(e)},visible(r,e){r.setVisible(e)},zoom(r,e){r.setZoom(e)}};class Q0 extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"state",{streetViewPanorama:null}),X(this,"setStreetViewPanoramaCallback",()=>{this.state.streetViewPanorama!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var e,t,i=(e=(t=this.context)===null||t===void 0?void 0:t.getStreetView())!==null&&e!==void 0?e:null;this.registeredEvents=ze({updaterMap:km,eventMap:Im,prevProps:{},nextProps:this.props,instance:i}),this.setState(()=>({streetViewPanorama:i}),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){this.state.streetViewPanorama!==null&&($e(this.registeredEvents),this.registeredEvents=ze({updaterMap:km,eventMap:Im,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),$e(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}X(Q0,"contextType",je);class Z0 extends y.PureComponent{constructor(){super(...arguments),X(this,"state",{streetViewService:null}),X(this,"setStreetViewServiceCallback",()=>{this.state.streetViewService!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var e=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:e}},this.setStreetViewServiceCallback)}componentWillUnmount(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}X(Z0,"contextType",je);var Pm={onDirectionsChanged:"directions_changed"},Am={directions(r,e){r.setDirections(e)},map(r,e){r.setMap(e)},options(r,e){r.setOptions(e)},panel(r,e){r.setPanel(e)},routeIndex(r,e){r.setRouteIndex(e)}};class X0 extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"state",{directionsRenderer:null}),X(this,"setDirectionsRendererCallback",()=>{this.state.directionsRenderer!==null&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=ze({updaterMap:Am,eventMap:Pm,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{directionsRenderer:e}},this.setDirectionsRendererCallback)}componentDidUpdate(e){this.state.directionsRenderer!==null&&($e(this.registeredEvents),this.registeredEvents=ze({updaterMap:Am,eventMap:Pm,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),$e(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}X(X0,"contextType",je);var xm={onPlacesChanged:"places_changed"},Rm={bounds(r,e){r.setBounds(e)}};class Y0 extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"containerElement",y.createRef()),X(this,"state",{searchBox:null}),X(this,"setSearchBoxCallback",()=>{this.state.searchBox!==null&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(At(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){var e=this.containerElement.current.querySelector("input");if(e!==null){var t=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=ze({updaterMap:Rm,eventMap:xm,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{searchBox:t}},this.setSearchBoxCallback)}}}componentDidUpdate(e){this.state.searchBox!==null&&($e(this.registeredEvents),this.registeredEvents=ze({updaterMap:Rm,eventMap:xm,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),$e(this.registeredEvents))}render(){return Ae.jsx("div",{ref:this.containerElement,children:y.Children.only(this.props.children)})}}X(Y0,"contextType",je);var Mm={onPlaceChanged:"place_changed"},Dm={bounds(r,e){r.setBounds(e)},restrictions(r,e){r.setComponentRestrictions(e)},fields(r,e){r.setFields(e)},options(r,e){r.setOptions(e)},types(r,e){r.setTypes(e)}};class ny extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"containerElement",y.createRef()),X(this,"state",{autocomplete:null}),X(this,"setAutocompleteCallback",()=>{this.state.autocomplete!==null&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){var e;At(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var t=(e=this.containerElement.current)===null||e===void 0?void 0:e.querySelector("input");if(t){var i=new google.maps.places.Autocomplete(t,this.props.options);this.registeredEvents=ze({updaterMap:Dm,eventMap:Mm,prevProps:{},nextProps:this.props,instance:i}),this.setState(()=>({autocomplete:i}),this.setAutocompleteCallback)}}componentDidUpdate(e){$e(this.registeredEvents),this.registeredEvents=ze({updaterMap:Dm,eventMap:Mm,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){this.state.autocomplete!==null&&$e(this.registeredEvents)}render(){return Ae.jsx("div",{ref:this.containerElement,className:this.props.className,children:y.Children.only(this.props.children)})}}X(ny,"defaultProps",{className:""});X(ny,"contextType",je);const J0=()=>{};var bm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},eS=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],d=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},iy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,d=h?r[o+1]:0,g=o+2<r.length,v=g?r[o+2]:0,E=l>>2,S=(l&3)<<4|d>>4;let T=(d&15)<<2|v>>6,R=v&63;g||(R=64,h||(T=64)),i.push(t[E],t[S],t[T],t[R])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(ry(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):eS(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],d=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const S=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||d==null||v==null||S==null)throw new tS;const T=l<<2|d>>4;if(i.push(T),v!==64){const R=d<<4&240|v>>2;if(i.push(R),S!==64){const M=v<<6&192|S;i.push(M)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class tS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nS=function(r){const e=ry(r);return iy.encodeByteArray(e,!0)},_u=function(r){return nS(r).replace(/\./g,"")},rS=function(r){try{return iy.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS=()=>iS().__FIREBASE_DEFAULTS__,oS=()=>{if(typeof process>"u"||typeof bm>"u")return;const r=bm.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},aS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&rS(r[1]);return e&&JSON.parse(e)},wf=()=>{try{return J0()||sS()||oS()||aS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},lS=r=>{var e,t;return(t=(e=wf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},uS=r=>{const e=lS(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},sy=()=>{var r;return(r=wf())===null||r===void 0?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[_u(JSON.stringify(t)),_u(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dS(){var r;const e=(r=wf())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pS(){return!dS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gS(){try{return typeof indexedDB=="object"}catch{return!1}}function mS(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="FirebaseError";class So extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=vS,Object.setPrototypeOf(this,So.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oy.prototype.create)}}class oy{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?yS(l,i):"Error",d=`${this.serviceName}: ${h} (${o}).`;return new So(o,d,i)}}function yS(r,e){return r.replace(_S,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const _S=/\{\$([^}]+)}/g;function Eu(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(Om(l)&&Om(h)){if(!Eu(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Om(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(r){return r&&r._delegate?r._delegate:r}class Ta{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new cS;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SS(e))try{this.getOrInitializeService({instanceIdentifier:ds})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ds){return this.instances.has(e)}getOptions(e=ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:wS(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ds){return this.component?this.component.multipleInstances?e:ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wS(r){return r===ds?void 0:r}function SS(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ES(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Qe||(Qe={}));const TS={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},LS=Qe.INFO,IS={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},kS=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=IS[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ay{constructor(e){this.name=e,this._logLevel=LS,this._logHandler=kS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const PS=(r,e)=>e.some(t=>r instanceof t);let Vm,Nm;function AS(){return Vm||(Vm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xS(){return Nm||(Nm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ly=new WeakMap,Kh=new WeakMap,uy=new WeakMap,Oh=new WeakMap,Sf=new WeakMap;function RS(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(ki(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&ly.set(t,r)}).catch(()=>{}),Sf.set(e,r),e}function MS(r){if(Kh.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Kh.set(r,e)}let Gh={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Kh.get(r);if(e==="objectStoreNames")return r.objectStoreNames||uy.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ki(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function DS(r){Gh=r(Gh)}function bS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Vh(this),e,...t);return uy.set(i,e.sort?e.sort():[e]),ki(i)}:xS().includes(r)?function(...e){return r.apply(Vh(this),e),ki(ly.get(this))}:function(...e){return ki(r.apply(Vh(this),e))}}function OS(r){return typeof r=="function"?bS(r):(r instanceof IDBTransaction&&MS(r),PS(r,AS())?new Proxy(r,Gh):r)}function ki(r){if(r instanceof IDBRequest)return RS(r);if(Oh.has(r))return Oh.get(r);const e=OS(r);return e!==r&&(Oh.set(r,e),Sf.set(e,r)),e}const Vh=r=>Sf.get(r);function VS(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),d=ki(h);return i&&h.addEventListener("upgradeneeded",g=>{i(ki(h.result),g.oldVersion,g.newVersion,ki(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),d.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),d}const NS=["get","getKey","getAll","getAllKeys","count"],FS=["put","add","delete","clear"],Nh=new Map;function Fm(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Nh.get(e))return Nh.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=FS.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||NS.includes(t)))return;const l=async function(h,...d){const g=this.transaction(h,o?"readwrite":"readonly");let v=g.store;return i&&(v=v.index(d.shift())),(await Promise.all([v[t](...d),o&&g.done]))[0]};return Nh.set(e,l),l}DS(r=>({...r,get:(e,t,i)=>Fm(e,t)||r.get(e,t,i),has:(e,t)=>!!Fm(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(US(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function US(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qh="@firebase/app",jm="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr=new ay("@firebase/app"),zS="@firebase/app-compat",BS="@firebase/analytics-compat",$S="@firebase/analytics",HS="@firebase/app-check-compat",WS="@firebase/app-check",qS="@firebase/auth",KS="@firebase/auth-compat",GS="@firebase/database",QS="@firebase/data-connect",ZS="@firebase/database-compat",XS="@firebase/functions",YS="@firebase/functions-compat",JS="@firebase/installations",eC="@firebase/installations-compat",tC="@firebase/messaging",nC="@firebase/messaging-compat",rC="@firebase/performance",iC="@firebase/performance-compat",sC="@firebase/remote-config",oC="@firebase/remote-config-compat",aC="@firebase/storage",lC="@firebase/storage-compat",uC="@firebase/firestore",cC="@firebase/vertexai",hC="@firebase/firestore-compat",fC="firebase",dC="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh="[DEFAULT]",pC={[Qh]:"fire-core",[zS]:"fire-core-compat",[$S]:"fire-analytics",[BS]:"fire-analytics-compat",[WS]:"fire-app-check",[HS]:"fire-app-check-compat",[qS]:"fire-auth",[KS]:"fire-auth-compat",[GS]:"fire-rtdb",[QS]:"fire-data-connect",[ZS]:"fire-rtdb-compat",[XS]:"fire-fn",[YS]:"fire-fn-compat",[JS]:"fire-iid",[eC]:"fire-iid-compat",[tC]:"fire-fcm",[nC]:"fire-fcm-compat",[rC]:"fire-perf",[iC]:"fire-perf-compat",[sC]:"fire-rc",[oC]:"fire-rc-compat",[aC]:"fire-gcs",[lC]:"fire-gcs-compat",[uC]:"fire-fst",[hC]:"fire-fst-compat",[cC]:"fire-vertex","fire-js":"fire-js",[fC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu=new Map,gC=new Map,Xh=new Map;function Um(r,e){try{r.container.addComponent(e)}catch(t){qr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Su(r){const e=r.name;if(Xh.has(e))return qr.debug(`There were multiple attempts to register component ${e}.`),!1;Xh.set(e,r);for(const t of wu.values())Um(t,r);for(const t of gC.values())Um(t,r);return!0}function mC(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function vC(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pi=new oy("app","Firebase",yC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ta("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=dC;function cy(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Zh,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw Pi.create("bad-app-name",{appName:String(o)});if(t||(t=sy()),!t)throw Pi.create("no-options");const l=wu.get(o);if(l){if(Eu(t,l.options)&&Eu(i,l.config))return l;throw Pi.create("duplicate-app",{appName:o})}const h=new CS(o);for(const g of Xh.values())h.addComponent(g);const d=new _C(t,i,h);return wu.set(o,d),d}function wC(r=Zh){const e=wu.get(r);if(!e&&r===Zh&&sy())return cy();if(!e)throw Pi.create("no-app",{appName:r});return e}function co(r,e,t){var i;let o=(i=pC[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const d=[`Unable to register library "${o}" with version "${e}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&d.push("and"),h&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qr.warn(d.join(" "));return}Su(new Ta(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="firebase-heartbeat-database",CC=1,La="firebase-heartbeat-store";let Fh=null;function hy(){return Fh||(Fh=VS(SC,CC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(La)}catch(t){console.warn(t)}}}}).catch(r=>{throw Pi.create("idb-open",{originalErrorMessage:r.message})})),Fh}async function TC(r){try{const t=(await hy()).transaction(La),i=await t.objectStore(La).get(fy(r));return await t.done,i}catch(e){if(e instanceof So)qr.warn(e.message);else{const t=Pi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qr.warn(t.message)}}}async function zm(r,e){try{const i=(await hy()).transaction(La,"readwrite");await i.objectStore(La).put(e,fy(r)),await i.done}catch(t){if(t instanceof So)qr.warn(t.message);else{const i=Pi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});qr.warn(i.message)}}}function fy(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=1024,IC=30;class kC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new AC(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Bm();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>IC){const h=xC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){qr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Bm(),{heartbeatsToSend:i,unsentEntries:o}=PC(this._heartbeatsCache.heartbeats),l=_u(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return qr.warn(t),""}}}function Bm(){return new Date().toISOString().substring(0,10)}function PC(r,e=LC){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),$m(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),$m(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class AC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gS()?mS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await TC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return zm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return zm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function $m(r){return _u(JSON.stringify({version:2,heartbeats:r})).length}function xC(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(r){Su(new Ta("platform-logger",e=>new jS(e),"PRIVATE")),Su(new Ta("heartbeat",e=>new kC(e),"PRIVATE")),co(Qh,jm,r),co(Qh,jm,"esm2017"),co("fire-js","")}RC("");var Hm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ai,dy;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,I){function C(){}C.prototype=I.prototype,k.D=I.prototype,k.prototype=new C,k.prototype.constructor=k,k.C=function(A,D,b){for(var P=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)P[pe-2]=arguments[pe];return I.prototype[D].apply(A,P)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,I,C){C||(C=0);var A=Array(16);if(typeof I=="string")for(var D=0;16>D;++D)A[D]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(D=0;16>D;++D)A[D]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=k.g[0],C=k.g[1],D=k.g[2];var b=k.g[3],P=I+(b^C&(D^b))+A[0]+3614090360&4294967295;I=C+(P<<7&4294967295|P>>>25),P=b+(D^I&(C^D))+A[1]+3905402710&4294967295,b=I+(P<<12&4294967295|P>>>20),P=D+(C^b&(I^C))+A[2]+606105819&4294967295,D=b+(P<<17&4294967295|P>>>15),P=C+(I^D&(b^I))+A[3]+3250441966&4294967295,C=D+(P<<22&4294967295|P>>>10),P=I+(b^C&(D^b))+A[4]+4118548399&4294967295,I=C+(P<<7&4294967295|P>>>25),P=b+(D^I&(C^D))+A[5]+1200080426&4294967295,b=I+(P<<12&4294967295|P>>>20),P=D+(C^b&(I^C))+A[6]+2821735955&4294967295,D=b+(P<<17&4294967295|P>>>15),P=C+(I^D&(b^I))+A[7]+4249261313&4294967295,C=D+(P<<22&4294967295|P>>>10),P=I+(b^C&(D^b))+A[8]+1770035416&4294967295,I=C+(P<<7&4294967295|P>>>25),P=b+(D^I&(C^D))+A[9]+2336552879&4294967295,b=I+(P<<12&4294967295|P>>>20),P=D+(C^b&(I^C))+A[10]+4294925233&4294967295,D=b+(P<<17&4294967295|P>>>15),P=C+(I^D&(b^I))+A[11]+2304563134&4294967295,C=D+(P<<22&4294967295|P>>>10),P=I+(b^C&(D^b))+A[12]+1804603682&4294967295,I=C+(P<<7&4294967295|P>>>25),P=b+(D^I&(C^D))+A[13]+4254626195&4294967295,b=I+(P<<12&4294967295|P>>>20),P=D+(C^b&(I^C))+A[14]+2792965006&4294967295,D=b+(P<<17&4294967295|P>>>15),P=C+(I^D&(b^I))+A[15]+1236535329&4294967295,C=D+(P<<22&4294967295|P>>>10),P=I+(D^b&(C^D))+A[1]+4129170786&4294967295,I=C+(P<<5&4294967295|P>>>27),P=b+(C^D&(I^C))+A[6]+3225465664&4294967295,b=I+(P<<9&4294967295|P>>>23),P=D+(I^C&(b^I))+A[11]+643717713&4294967295,D=b+(P<<14&4294967295|P>>>18),P=C+(b^I&(D^b))+A[0]+3921069994&4294967295,C=D+(P<<20&4294967295|P>>>12),P=I+(D^b&(C^D))+A[5]+3593408605&4294967295,I=C+(P<<5&4294967295|P>>>27),P=b+(C^D&(I^C))+A[10]+38016083&4294967295,b=I+(P<<9&4294967295|P>>>23),P=D+(I^C&(b^I))+A[15]+3634488961&4294967295,D=b+(P<<14&4294967295|P>>>18),P=C+(b^I&(D^b))+A[4]+3889429448&4294967295,C=D+(P<<20&4294967295|P>>>12),P=I+(D^b&(C^D))+A[9]+568446438&4294967295,I=C+(P<<5&4294967295|P>>>27),P=b+(C^D&(I^C))+A[14]+3275163606&4294967295,b=I+(P<<9&4294967295|P>>>23),P=D+(I^C&(b^I))+A[3]+4107603335&4294967295,D=b+(P<<14&4294967295|P>>>18),P=C+(b^I&(D^b))+A[8]+1163531501&4294967295,C=D+(P<<20&4294967295|P>>>12),P=I+(D^b&(C^D))+A[13]+2850285829&4294967295,I=C+(P<<5&4294967295|P>>>27),P=b+(C^D&(I^C))+A[2]+4243563512&4294967295,b=I+(P<<9&4294967295|P>>>23),P=D+(I^C&(b^I))+A[7]+1735328473&4294967295,D=b+(P<<14&4294967295|P>>>18),P=C+(b^I&(D^b))+A[12]+2368359562&4294967295,C=D+(P<<20&4294967295|P>>>12),P=I+(C^D^b)+A[5]+4294588738&4294967295,I=C+(P<<4&4294967295|P>>>28),P=b+(I^C^D)+A[8]+2272392833&4294967295,b=I+(P<<11&4294967295|P>>>21),P=D+(b^I^C)+A[11]+1839030562&4294967295,D=b+(P<<16&4294967295|P>>>16),P=C+(D^b^I)+A[14]+4259657740&4294967295,C=D+(P<<23&4294967295|P>>>9),P=I+(C^D^b)+A[1]+2763975236&4294967295,I=C+(P<<4&4294967295|P>>>28),P=b+(I^C^D)+A[4]+1272893353&4294967295,b=I+(P<<11&4294967295|P>>>21),P=D+(b^I^C)+A[7]+4139469664&4294967295,D=b+(P<<16&4294967295|P>>>16),P=C+(D^b^I)+A[10]+3200236656&4294967295,C=D+(P<<23&4294967295|P>>>9),P=I+(C^D^b)+A[13]+681279174&4294967295,I=C+(P<<4&4294967295|P>>>28),P=b+(I^C^D)+A[0]+3936430074&4294967295,b=I+(P<<11&4294967295|P>>>21),P=D+(b^I^C)+A[3]+3572445317&4294967295,D=b+(P<<16&4294967295|P>>>16),P=C+(D^b^I)+A[6]+76029189&4294967295,C=D+(P<<23&4294967295|P>>>9),P=I+(C^D^b)+A[9]+3654602809&4294967295,I=C+(P<<4&4294967295|P>>>28),P=b+(I^C^D)+A[12]+3873151461&4294967295,b=I+(P<<11&4294967295|P>>>21),P=D+(b^I^C)+A[15]+530742520&4294967295,D=b+(P<<16&4294967295|P>>>16),P=C+(D^b^I)+A[2]+3299628645&4294967295,C=D+(P<<23&4294967295|P>>>9),P=I+(D^(C|~b))+A[0]+4096336452&4294967295,I=C+(P<<6&4294967295|P>>>26),P=b+(C^(I|~D))+A[7]+1126891415&4294967295,b=I+(P<<10&4294967295|P>>>22),P=D+(I^(b|~C))+A[14]+2878612391&4294967295,D=b+(P<<15&4294967295|P>>>17),P=C+(b^(D|~I))+A[5]+4237533241&4294967295,C=D+(P<<21&4294967295|P>>>11),P=I+(D^(C|~b))+A[12]+1700485571&4294967295,I=C+(P<<6&4294967295|P>>>26),P=b+(C^(I|~D))+A[3]+2399980690&4294967295,b=I+(P<<10&4294967295|P>>>22),P=D+(I^(b|~C))+A[10]+4293915773&4294967295,D=b+(P<<15&4294967295|P>>>17),P=C+(b^(D|~I))+A[1]+2240044497&4294967295,C=D+(P<<21&4294967295|P>>>11),P=I+(D^(C|~b))+A[8]+1873313359&4294967295,I=C+(P<<6&4294967295|P>>>26),P=b+(C^(I|~D))+A[15]+4264355552&4294967295,b=I+(P<<10&4294967295|P>>>22),P=D+(I^(b|~C))+A[6]+2734768916&4294967295,D=b+(P<<15&4294967295|P>>>17),P=C+(b^(D|~I))+A[13]+1309151649&4294967295,C=D+(P<<21&4294967295|P>>>11),P=I+(D^(C|~b))+A[4]+4149444226&4294967295,I=C+(P<<6&4294967295|P>>>26),P=b+(C^(I|~D))+A[11]+3174756917&4294967295,b=I+(P<<10&4294967295|P>>>22),P=D+(I^(b|~C))+A[2]+718787259&4294967295,D=b+(P<<15&4294967295|P>>>17),P=C+(b^(D|~I))+A[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+(D+(P<<21&4294967295|P>>>11))&4294967295,k.g[2]=k.g[2]+D&4294967295,k.g[3]=k.g[3]+b&4294967295}i.prototype.u=function(k,I){I===void 0&&(I=k.length);for(var C=I-this.blockSize,A=this.B,D=this.h,b=0;b<I;){if(D==0)for(;b<=C;)o(this,k,b),b+=this.blockSize;if(typeof k=="string"){for(;b<I;)if(A[D++]=k.charCodeAt(b++),D==this.blockSize){o(this,A),D=0;break}}else for(;b<I;)if(A[D++]=k[b++],D==this.blockSize){o(this,A),D=0;break}}this.h=D,this.o+=I},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;var C=8*this.o;for(I=k.length-8;I<k.length;++I)k[I]=C&255,C/=256;for(this.u(k),k=Array(16),I=C=0;4>I;++I)for(var A=0;32>A;A+=8)k[C++]=this.g[I]>>>A&255;return k};function l(k,I){var C=d;return Object.prototype.hasOwnProperty.call(C,k)?C[k]:C[k]=I(k)}function h(k,I){this.h=I;for(var C=[],A=!0,D=k.length-1;0<=D;D--){var b=k[D]|0;A&&b==I||(C[D]=b,A=!1)}this.g=C}var d={};function g(k){return-128<=k&&128>k?l(k,function(I){return new h([I|0],0>I?-1:0)}):new h([k|0],0>k?-1:0)}function v(k){if(isNaN(k)||!isFinite(k))return S;if(0>k)return N(v(-k));for(var I=[],C=1,A=0;k>=C;A++)I[A]=k/C|0,C*=4294967296;return new h(I,0)}function E(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return N(E(k.substring(1),I));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=v(Math.pow(I,8)),A=S,D=0;D<k.length;D+=8){var b=Math.min(8,k.length-D),P=parseInt(k.substring(D,D+b),I);8>b?(b=v(Math.pow(I,b)),A=A.j(b).add(v(P))):(A=A.j(C),A=A.add(v(P)))}return A}var S=g(0),T=g(1),R=g(16777216);r=h.prototype,r.m=function(){if(j(this))return-N(this).m();for(var k=0,I=1,C=0;C<this.g.length;C++){var A=this.i(C);k+=(0<=A?A:4294967296+A)*I,I*=4294967296}return k},r.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(M(this))return"0";if(j(this))return"-"+N(this).toString(k);for(var I=v(Math.pow(k,6)),C=this,A="";;){var D=K(C,I).g;C=Y(C,D.j(I));var b=((0<C.g.length?C.g[0]:C.h)>>>0).toString(k);if(C=D,M(C))return b+A;for(;6>b.length;)b="0"+b;A=b+A}},r.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function M(k){if(k.h!=0)return!1;for(var I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function j(k){return k.h==-1}r.l=function(k){return k=Y(this,k),j(k)?-1:M(k)?0:1};function N(k){for(var I=k.g.length,C=[],A=0;A<I;A++)C[A]=~k.g[A];return new h(C,~k.h).add(T)}r.abs=function(){return j(this)?N(this):this},r.add=function(k){for(var I=Math.max(this.g.length,k.g.length),C=[],A=0,D=0;D<=I;D++){var b=A+(this.i(D)&65535)+(k.i(D)&65535),P=(b>>>16)+(this.i(D)>>>16)+(k.i(D)>>>16);A=P>>>16,b&=65535,P&=65535,C[D]=P<<16|b}return new h(C,C[C.length-1]&-2147483648?-1:0)};function Y(k,I){return k.add(N(I))}r.j=function(k){if(M(this)||M(k))return S;if(j(this))return j(k)?N(this).j(N(k)):N(N(this).j(k));if(j(k))return N(this.j(N(k)));if(0>this.l(R)&&0>k.l(R))return v(this.m()*k.m());for(var I=this.g.length+k.g.length,C=[],A=0;A<2*I;A++)C[A]=0;for(A=0;A<this.g.length;A++)for(var D=0;D<k.g.length;D++){var b=this.i(A)>>>16,P=this.i(A)&65535,pe=k.i(D)>>>16,Se=k.i(D)&65535;C[2*A+2*D]+=P*Se,Z(C,2*A+2*D),C[2*A+2*D+1]+=b*Se,Z(C,2*A+2*D+1),C[2*A+2*D+1]+=P*pe,Z(C,2*A+2*D+1),C[2*A+2*D+2]+=b*pe,Z(C,2*A+2*D+2)}for(A=0;A<I;A++)C[A]=C[2*A+1]<<16|C[2*A];for(A=I;A<2*I;A++)C[A]=0;return new h(C,0)};function Z(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function le(k,I){this.g=k,this.h=I}function K(k,I){if(M(I))throw Error("division by zero");if(M(k))return new le(S,S);if(j(k))return I=K(N(k),I),new le(N(I.g),N(I.h));if(j(I))return I=K(k,N(I)),new le(N(I.g),I.h);if(30<k.g.length){if(j(k)||j(I))throw Error("slowDivide_ only works with positive integers.");for(var C=T,A=I;0>=A.l(k);)C=H(C),A=H(A);var D=q(C,1),b=q(A,1);for(A=q(A,2),C=q(C,2);!M(A);){var P=b.add(A);0>=P.l(k)&&(D=D.add(C),b=P),A=q(A,1),C=q(C,1)}return I=Y(k,D.j(I)),new le(D,I)}for(D=S;0<=k.l(I);){for(C=Math.max(1,Math.floor(k.m()/I.m())),A=Math.ceil(Math.log(C)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),b=v(C),P=b.j(I);j(P)||0<P.l(k);)C-=A,b=v(C),P=b.j(I);M(b)&&(b=T),D=D.add(b),k=Y(k,P)}return new le(D,k)}r.A=function(k){return K(this,k).h},r.and=function(k){for(var I=Math.max(this.g.length,k.g.length),C=[],A=0;A<I;A++)C[A]=this.i(A)&k.i(A);return new h(C,this.h&k.h)},r.or=function(k){for(var I=Math.max(this.g.length,k.g.length),C=[],A=0;A<I;A++)C[A]=this.i(A)|k.i(A);return new h(C,this.h|k.h)},r.xor=function(k){for(var I=Math.max(this.g.length,k.g.length),C=[],A=0;A<I;A++)C[A]=this.i(A)^k.i(A);return new h(C,this.h^k.h)};function H(k){for(var I=k.g.length+1,C=[],A=0;A<I;A++)C[A]=k.i(A)<<1|k.i(A-1)>>>31;return new h(C,k.h)}function q(k,I){var C=I>>5;I%=32;for(var A=k.g.length-C,D=[],b=0;b<A;b++)D[b]=0<I?k.i(b+C)>>>I|k.i(b+C+1)<<32-I:k.i(b+C);return new h(D,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,dy=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=E,Ai=h}).apply(typeof Hm<"u"?Hm:typeof self<"u"?self:typeof window<"u"?window:{});var Jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var py,da,gy,iu,Yh,my,vy,yy;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,_){return u==Array.prototype||u==Object.prototype||(u[p]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jl=="object"&&Jl];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,p){if(p)e:{var _=i;u=u.split(".");for(var L=0;L<u.length-1;L++){var U=u[L];if(!(U in _))break e;_=_[U]}u=u[u.length-1],L=_[u],p=p(L),p!=L&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}function l(u,p){u instanceof String&&(u+="");var _=0,L=!1,U={next:function(){if(!L&&_<u.length){var Q=_++;return{value:p(Q,u[Q]),done:!1}}return L=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}o("Array.prototype.values",function(u){return u||function(){return l(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},d=this||self;function g(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function v(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function E(u,p,_){return u.call.apply(u.bind,arguments)}function S(u,p,_){if(!u)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,L),u.apply(p,U)}}return function(){return u.apply(p,arguments)}}function T(u,p,_){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:S,T.apply(null,arguments)}function R(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var L=_.slice();return L.push.apply(L,arguments),u.apply(this,L)}}function M(u,p){function _(){}_.prototype=p.prototype,u.aa=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(L,U,Q){for(var fe=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)fe[tt-2]=arguments[tt];return p.prototype[U].apply(L,fe)}}function j(u){const p=u.length;if(0<p){const _=Array(p);for(let L=0;L<p;L++)_[L]=u[L];return _}return[]}function N(u,p){for(let _=1;_<arguments.length;_++){const L=arguments[_];if(g(L)){const U=u.length||0,Q=L.length||0;u.length=U+Q;for(let fe=0;fe<Q;fe++)u[U+fe]=L[fe]}else u.push(L)}}class Y{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function Z(u){return/^[\s\xa0]*$/.test(u)}function le(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function K(u){return K[" "](u),u}K[" "]=function(){};var H=le().indexOf("Gecko")!=-1&&!(le().toLowerCase().indexOf("webkit")!=-1&&le().indexOf("Edge")==-1)&&!(le().indexOf("Trident")!=-1||le().indexOf("MSIE")!=-1)&&le().indexOf("Edge")==-1;function q(u,p,_){for(const L in u)p.call(_,u[L],L,u)}function k(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function I(u){const p={};for(const _ in u)p[_]=u[_];return p}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,p){let _,L;for(let U=1;U<arguments.length;U++){L=arguments[U];for(_ in L)u[_]=L[_];for(let Q=0;Q<C.length;Q++)_=C[Q],Object.prototype.hasOwnProperty.call(L,_)&&(u[_]=L[_])}}function D(u){var p=1;u=u.split(":");const _=[];for(;0<p&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function b(u){d.setTimeout(()=>{throw u},0)}function P(){var u=he;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class pe{constructor(){this.h=this.g=null}add(p,_){const L=Se.get();L.set(p,_),this.h?this.h.next=L:this.g=L,this.h=L}}var Se=new Y(()=>new Pe,u=>u.reset());class Pe{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,J=!1,he=new pe,ie=()=>{const u=d.Promise.resolve(void 0);Le=()=>{u.then(V)}};var V=()=>{for(var u;u=P();){try{u.h.call(u.g)}catch(_){b(_)}var p=Se;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}J=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var ge=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};d.addEventListener("test",_,p),d.removeEventListener("test",_,p)}catch{}return u}();function $(u,p){if(re.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,L=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(H){e:{try{K(p.nodeName);var U=!0;break e}catch{}U=!1}U||(p=null)}}else _=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement);this.relatedTarget=p,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ce[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&$.aa.h.call(this)}}M($,re);var Ce={2:"touch",3:"pen",4:"mouse"};$.prototype.h=function(){$.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ie="closure_listenable_"+(1e6*Math.random()|0),de=0;function te(u,p,_,L,U){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!L,this.ha=U,this.key=++de,this.da=this.fa=!1}function ee(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ye(u){this.src=u,this.g={},this.h=0}ye.prototype.add=function(u,p,_,L,U){var Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);var fe=Xe(u,p,L,U);return-1<fe?(p=u[fe],_||(p.fa=!1)):(p=new te(p,this.src,Q,!!L,U),p.fa=_,u.push(p)),p};function Be(u,p){var _=p.type;if(_ in u.g){var L=u.g[_],U=Array.prototype.indexOf.call(L,p,void 0),Q;(Q=0<=U)&&Array.prototype.splice.call(L,U,1),Q&&(ee(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Xe(u,p,_,L){for(var U=0;U<u.length;++U){var Q=u[U];if(!Q.da&&Q.listener==p&&Q.capture==!!_&&Q.ha==L)return U}return-1}var ot="closure_lm_"+(1e6*Math.random()|0),Ne={};function Qt(u,p,_,L,U){if(Array.isArray(p)){for(var Q=0;Q<p.length;Q++)Qt(u,p[Q],_,L,U);return null}return _=Xr(_),u&&u[Ie]?u.K(p,_,v(L)?!!L.capture:!1,U):or(u,p,_,!1,L,U)}function or(u,p,_,L,U,Q){if(!p)throw Error("Invalid event type");var fe=v(U)?!!U.capture:!!U,tt=Un(u);if(tt||(u[ot]=tt=new ye(u)),_=tt.add(p,_,L,fe,Q),_.proxy)return _;if(L=Ui(),_.proxy=L,L.src=u,L.listener=_,u.addEventListener)ge||(U=fe),U===void 0&&(U=!1),u.addEventListener(p.toString(),L,U);else if(u.attachEvent)u.attachEvent(tn(p.toString()),L);else if(u.addListener&&u.removeListener)u.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ui(){function u(_){return p.call(u.src,u.listener,_)}const p=Zr;return u}function jn(u,p,_,L,U){if(Array.isArray(p))for(var Q=0;Q<p.length;Q++)jn(u,p[Q],_,L,U);else L=v(L)?!!L.capture:!!L,_=Xr(_),u&&u[Ie]?(u=u.i,p=String(p).toString(),p in u.g&&(Q=u.g[p],_=Xe(Q,_,L,U),-1<_&&(ee(Q[_]),Array.prototype.splice.call(Q,_,1),Q.length==0&&(delete u.g[p],u.h--)))):u&&(u=Un(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Xe(p,_,L,U)),(_=-1<u?p[u]:null)&&Ln(_))}function Ln(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Ie])Be(p.i,u);else{var _=u.type,L=u.proxy;p.removeEventListener?p.removeEventListener(_,L,u.capture):p.detachEvent?p.detachEvent(tn(_),L):p.addListener&&p.removeListener&&p.removeListener(L),(_=Un(p))?(Be(_,u),_.h==0&&(_.src=null,p[ot]=null)):ee(u)}}}function tn(u){return u in Ne?Ne[u]:Ne[u]="on"+u}function Zr(u,p){if(u.da)u=!0;else{p=new $(p,this);var _=u.listener,L=u.ha||u.src;u.fa&&Ln(u),u=_.call(L,p)}return u}function Un(u){return u=u[ot],u instanceof ye?u:null}var xr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xr(u){return typeof u=="function"?u:(u[xr]||(u[xr]=function(p){return u.handleEvent(p)}),u[xr])}function mt(){G.call(this),this.i=new ye(this),this.M=this,this.F=null}M(mt,G),mt.prototype[Ie]=!0,mt.prototype.removeEventListener=function(u,p,_,L){jn(this,u,p,_,L)};function ut(u,p){var _,L=u.F;if(L)for(_=[];L;L=L.F)_.push(L);if(u=u.M,L=p.type||p,typeof p=="string")p=new re(p,u);else if(p instanceof re)p.target=p.target||u;else{var U=p;p=new re(L,u),A(p,U)}if(U=!0,_)for(var Q=_.length-1;0<=Q;Q--){var fe=p.g=_[Q];U=In(fe,L,!0,p)&&U}if(fe=p.g=u,U=In(fe,L,!0,p)&&U,U=In(fe,L,!1,p)&&U,_)for(Q=0;Q<_.length;Q++)fe=p.g=_[Q],U=In(fe,L,!1,p)&&U}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var _=u.g[p],L=0;L<_.length;L++)ee(_[L]);delete u.g[p],u.h--}}this.F=null},mt.prototype.K=function(u,p,_,L){return this.i.add(String(u),p,!1,_,L)},mt.prototype.L=function(u,p,_,L){return this.i.add(String(u),p,!0,_,L)};function In(u,p,_,L){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var U=!0,Q=0;Q<p.length;++Q){var fe=p[Q];if(fe&&!fe.da&&fe.capture==_){var tt=fe.listener,Ct=fe.ha||fe.src;fe.fa&&Be(u.i,fe),U=tt.call(Ct,L)!==!1&&U}}return U&&!L.defaultPrevented}function ar(u,p,_){if(typeof u=="function")_&&(u=T(u,_));else if(u&&typeof u.handleEvent=="function")u=T(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:d.setTimeout(u,p||0)}function zn(u){u.g=ar(()=>{u.g=null,u.i&&(u.i=!1,zn(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class kn extends G{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:zn(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lr(u){G.call(this),this.h=u,this.g={}}M(lr,G);var ur=[];function Yr(u){q(u.g,function(p,_){this.g.hasOwnProperty(_)&&Ln(p)},u),u.g={}}lr.prototype.N=function(){lr.aa.N.call(this),Yr(this)},lr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cr=d.JSON.stringify,Jr=d.JSON.parse,hr=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function fr(){}fr.prototype.h=null;function Bn(u){return u.h||(u.h=u.i())}function Rr(){}var Zt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dn(){re.call(this,"d")}M(dn,re);function $n(){re.call(this,"c")}M($n,re);var pn={},dr=null;function pr(){return dr=dr||new mt}pn.La="serverreachability";function gr(u){re.call(this,pn.La,u)}M(gr,re);function Pn(u){const p=pr();ut(p,new gr(p))}pn.STAT_EVENT="statevent";function zi(u,p){re.call(this,pn.STAT_EVENT,u),this.stat=p}M(zi,re);function nt(u){const p=pr();ut(p,new zi(p,u))}pn.Ma="timingevent";function De(u,p){re.call(this,pn.Ma,u),this.size=p}M(De,re);function Hn(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},p)}function Bi(){this.g=!0}Bi.prototype.xa=function(){this.g=!1};function $i(u,p,_,L,U,Q){u.info(function(){if(u.g)if(Q)for(var fe="",tt=Q.split("&"),Ct=0;Ct<tt.length;Ct++){var Ke=tt[Ct].split("=");if(1<Ke.length){var xt=Ke[0];Ke=Ke[1];var Et=xt.split("_");fe=2<=Et.length&&Et[1]=="type"?fe+(xt+"="+Ke+"&"):fe+(xt+"=redacted&")}}else fe=null;else fe=Q;return"XMLHTTP REQ ("+L+") [attempt "+U+"]: "+p+`
`+_+`
`+fe})}function Es(u,p,_,L,U,Q,fe){u.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+U+"]: "+p+`
`+_+`
`+Q+" "+fe})}function Wn(u,p,_,L){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Yu(u,_)+(L?" "+L:"")})}function Po(u,p){u.info(function(){return"TIMEOUT: "+p})}Bi.prototype.info=function(){};function Yu(u,p){if(!u.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var L=_[u];if(!(2>L.length)){var U=L[1];if(Array.isArray(U)&&!(1>U.length)){var Q=U[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var fe=1;fe<U.length;fe++)U[fe]=""}}}}return cr(_)}catch{return p}}var ws={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Va={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qn;function Hi(){}M(Hi,fr),Hi.prototype.g=function(){return new XMLHttpRequest},Hi.prototype.i=function(){return{}},qn=new Hi;function Kn(u,p,_,L){this.j=u,this.i=p,this.l=_,this.R=L||1,this.U=new lr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Na}function Na(){this.i=null,this.g="",this.h=!1}var Ao={},Ss={};function Cs(u,p,_){u.L=1,u.v=ii(mn(p)),u.m=_,u.P=!0,xo(u,null)}function xo(u,p){u.F=Date.now(),it(u),u.A=mn(u.v);var _=u.A,L=u.R;Array.isArray(L)||(L=[String(L)]),oi(_.i,"t",L),u.C=0,_=u.j.J,u.h=new Na,u.g=tl(u.j,_?p:null,!u.m),0<u.O&&(u.M=new kn(T(u.Y,u,u.g),u.O)),p=u.U,_=u.g,L=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(ur[0]=U.toString()),U=ur);for(var Q=0;Q<U.length;Q++){var fe=Qt(_,U[Q],L||p.handleEvent,!1,p.h||p);if(!fe)break;p.g[fe.key]=fe}p=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Pn(),$i(u.i,u.u,u.A,u.l,u.R,u.m)}Kn.prototype.ca=function(u){u=u.target;const p=this.M;p&&rn(u)==3?p.j():this.Y(u)},Kn.prototype.Y=function(u){try{if(u==this.g)e:{const Et=rn(this.g);var p=this.g.Ba();const Rn=this.g.Z();if(!(3>Et)&&(Et!=3||this.g&&(this.h.h||this.g.oa()||Vo(this.g)))){this.J||Et!=4||p==7||(p==8||0>=Rn?Pn(3):Pn(2)),Wi(this);var _=this.g.Z();this.X=_;t:if(Fa(this)){var L=Vo(this.g);u="";var U=L.length,Q=rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){An(this),ei(this);var fe="";break t}this.h.i=new d.TextDecoder}for(p=0;p<U;p++)this.h.h=!0,u+=this.h.i.decode(L[p],{stream:!(Q&&p==U-1)});L.length=0,this.h.g+=u,this.C=0,fe=this.h.g}else fe=this.g.oa();if(this.o=_==200,Es(this.i,this.u,this.A,this.l,this.R,Et,_),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,Ct=this.g;if((tt=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(tt)){var Ke=tt;break t}}Ke=null}if(_=Ke)Wn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ro(this,_);else{this.o=!1,this.s=3,nt(12),An(this),ei(this);break e}}if(this.P){_=!0;let yn;for(;!this.J&&this.C<fe.length;)if(yn=Ju(this,fe),yn==Ss){Et==4&&(this.s=4,nt(14),_=!1),Wn(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==Ao){this.s=4,nt(15),Wn(this.i,this.l,fe,"[Invalid Chunk]"),_=!1;break}else Wn(this.i,this.l,yn,null),Ro(this,yn);if(Fa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Et!=4||fe.length!=0||this.h.h||(this.s=1,nt(16),_=!1),this.o=this.o&&_,!_)Wn(this.i,this.l,fe,"[Invalid Chunked Response]"),An(this),ei(this);else if(0<fe.length&&!this.W){this.W=!0;var xt=this.j;xt.g==this&&xt.ba&&!xt.M&&(xt.j.info("Great, no buffering proxy detected. Bytes received: "+fe.length),Fo(xt),xt.M=!0,nt(11))}}else Wn(this.i,this.l,fe,null),Ro(this,fe);Et==4&&An(this),this.o&&!this.J&&(Et==4?bs(this.j,this):(this.o=!1,it(this)))}else As(this.g),_==400&&0<fe.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),An(this),ei(this)}}}catch{}finally{}};function Fa(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ju(u,p){var _=u.C,L=p.indexOf(`
`,_);return L==-1?Ss:(_=Number(p.substring(_,L)),isNaN(_)?Ao:(L+=1,L+_>p.length?Ss:(p=p.slice(L,L+_),u.C=L+_,p)))}Kn.prototype.cancel=function(){this.J=!0,An(this)};function it(u){u.S=Date.now()+u.I,ja(u,u.I)}function ja(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Hn(T(u.ba,u),p)}function Wi(u){u.B&&(d.clearTimeout(u.B),u.B=null)}Kn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Po(this.i,this.A),this.L!=2&&(Pn(),nt(17)),An(this),this.s=2,ei(this)):ja(this,this.S-u)};function ei(u){u.j.G==0||u.J||bs(u.j,u)}function An(u){Wi(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Yr(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Ro(u,p){try{var _=u.j;if(_.G!=0&&(_.g==u||Xt(_.h,u))){if(!u.K&&Xt(_.h,u)&&_.G==3){try{var L=_.Da.g.parse(p)}catch{L=null}if(Array.isArray(L)&&L.length==3){var U=L;if(U[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Ds(_),Yn(_);else break e;Ms(_),nt(18)}}else _.za=U[1],0<_.za-_.T&&37500>U[2]&&_.F&&_.v==0&&!_.C&&(_.C=Hn(T(_.Za,_),6e3));if(1>=za(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Vr(_,11)}else if((u.K||_.g==u)&&Ds(_),!Z(p))for(U=_.Da.g.parse(p),p=0;p<U.length;p++){let Ke=U[p];if(_.T=Ke[0],Ke=Ke[1],_.G==2)if(Ke[0]=="c"){_.K=Ke[1],_.ia=Ke[2];const xt=Ke[3];xt!=null&&(_.la=xt,_.j.info("VER="+_.la));const Et=Ke[4];Et!=null&&(_.Aa=Et,_.j.info("SVER="+_.Aa));const Rn=Ke[5];Rn!=null&&typeof Rn=="number"&&0<Rn&&(L=1.5*Rn,_.L=L,_.j.info("backChannelRequestTimeoutMs_="+L)),L=_;const yn=u.g;if(yn){const Yi=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yi){var Q=L.h;Q.g||Yi.indexOf("spdy")==-1&&Yi.indexOf("quic")==-1&&Yi.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Mo(Q,Q.h),Q.h=null))}if(L.D){const Vs=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;Vs&&(L.ya=Vs,rt(L.I,L.D,Vs))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),L=_;var fe=u;if(L.qa=el(L,L.J?L.ia:null,L.W),fe.K){Ba(L.h,fe);var tt=fe,Ct=L.L;Ct&&(tt.I=Ct),tt.B&&(Wi(tt),it(tt)),L.g=fe}else Xi(L);0<_.i.length&&_r(_)}else Ke[0]!="stop"&&Ke[0]!="close"||Vr(_,7);else _.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Vr(_,7):Vt(_):Ke[0]!="noop"&&_.l&&_.l.ta(Ke),_.v=0)}}Pn(4)}catch{}}var Ua=class{constructor(u,p){this.g=u,this.map=p}};function qi(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function za(u){return u.h?1:u.g?u.g.size:0}function Xt(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Mo(u,p){u.g?u.g.add(p):u.h=p}function Ba(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}qi.prototype.cancel=function(){if(this.i=$a(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function $a(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.D);return p}return j(u.i)}function Ts(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var p=[],_=u.length,L=0;L<_;L++)p.push(u[L]);return p}p=[],_=0;for(L in u)p[_++]=u[L];return p}function Ls(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var p=[];u=u.length;for(var _=0;_<u;_++)p.push(_);return p}p=[],_=0;for(const L in u)p[_++]=L;return p}}}function ti(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var _=Ls(u),L=Ts(u),U=L.length,Q=0;Q<U;Q++)p.call(void 0,L[Q],_&&_[Q],u)}var Ki=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ec(u,p){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var L=u[_].indexOf("="),U=null;if(0<=L){var Q=u[_].substring(0,L);U=u[_].substring(L+1)}else Q=u[_];p(Q,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Mr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Mr){this.h=u.h,Gi(this,u.j),this.o=u.o,this.g=u.g,ni(this,u.s),this.l=u.l;var p=u.i,_=new mr;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),ri(this,_),this.m=u.m}else u&&(p=String(u).match(Ki))?(this.h=!1,Gi(this,p[1]||"",!0),this.o=We(p[2]||""),this.g=We(p[3]||"",!0),ni(this,p[4]),this.l=We(p[5]||"",!0),ri(this,p[6]||"",!0),this.m=We(p[7]||"")):(this.h=!1,this.i=new mr(null,this.h))}Mr.prototype.toString=function(){var u=[],p=this.j;p&&u.push(si(p,Is,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(si(p,Is,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(si(_,_.charAt(0)=="/"?qa:Wa,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",si(_,Do)),u.join("")};function mn(u){return new Mr(u)}function Gi(u,p,_){u.j=_?We(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function ni(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function ri(u,p,_){p instanceof mr?(u.i=p,vr(u.i,u.h)):(_||(p=si(p,Ka)),u.i=new mr(p,u.h))}function rt(u,p,_){u.i.set(p,_)}function ii(u){return rt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function We(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function si(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,Ha),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ha(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Is=/[#\/\?@]/g,Wa=/[#\?:]/g,qa=/[#\?]/g,Ka=/[#\?@]/g,Do=/#/g;function mr(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Ot(u){u.g||(u.g=new Map,u.h=0,u.i&&ec(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}r=mr.prototype,r.add=function(u,p){Ot(this),this.i=null,u=xn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function Gn(u,p){Ot(u),p=xn(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Qn(u,p){return Ot(u),p=xn(u,p),u.g.has(p)}r.forEach=function(u,p){Ot(this),this.g.forEach(function(_,L){_.forEach(function(U){u.call(p,U,L,this)},this)},this)},r.na=function(){Ot(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let L=0;L<p.length;L++){const U=u[L];for(let Q=0;Q<U.length;Q++)_.push(p[L])}return _},r.V=function(u){Ot(this);let p=[];if(typeof u=="string")Qn(this,u)&&(p=p.concat(this.g.get(xn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)p=p.concat(u[_])}return p},r.set=function(u,p){return Ot(this),this.i=null,u=xn(this,u),Qn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function oi(u,p,_){Gn(u,p),0<_.length&&(u.i=null,u.g.set(xn(u,p),j(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var L=p[_];const Q=encodeURIComponent(String(L)),fe=this.V(L);for(L=0;L<fe.length;L++){var U=Q;fe[L]!==""&&(U+="="+encodeURIComponent(String(fe[L]))),u.push(U)}}return this.i=u.join("&")};function xn(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function vr(u,p){p&&!u.j&&(Ot(u),u.i=null,u.g.forEach(function(_,L){var U=L.toLowerCase();L!=U&&(Gn(this,L),oi(this,U,_))},u)),u.j=p}function tc(u,p){const _=new Bi;if(d.Image){const L=new Image;L.onload=R(nn,_,"TestLoadImage: loaded",!0,p,L),L.onerror=R(nn,_,"TestLoadImage: error",!1,p,L),L.onabort=R(nn,_,"TestLoadImage: abort",!1,p,L),L.ontimeout=R(nn,_,"TestLoadImage: timeout",!1,p,L),d.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=u}else p(!1)}function Ga(u,p){const _=new Bi,L=new AbortController,U=setTimeout(()=>{L.abort(),nn(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:L.signal}).then(Q=>{clearTimeout(U),Q.ok?nn(_,"TestPingServer: ok",!0,p):nn(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(U),nn(_,"TestPingServer: error",!1,p)})}function nn(u,p,_,L,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),L(_)}catch{}}function nc(){this.g=new hr}function Qa(u,p,_){const L=_||"";try{ti(u,function(U,Q){let fe=U;v(U)&&(fe=cr(U)),p.push(L+Q+"="+encodeURIComponent(fe))})}catch(U){throw p.push(L+"type="+encodeURIComponent("_badmap")),U}}function Dr(u){this.l=u.Ub||null,this.j=u.eb||!1}M(Dr,fr),Dr.prototype.g=function(){return new Qi(this.l,this.j)},Dr.prototype.i=function(u){return function(){return u}}({});function Qi(u,p){mt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Qi,mt),r=Qi.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Xn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||d).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Xn(this)),this.g&&(this.readyState=3,Xn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Za(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Za(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Zn(this):Xn(this),this.readyState==3&&Za(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Zn(this))},r.Qa=function(u){this.g&&(this.response=u,Zn(this))},r.ga=function(){this.g&&Zn(this)};function Zn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Xn(u)}r.setRequestHeader=function(u,p){this.u.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function Xn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function br(u){let p="";return q(u,function(_,L){p+=L,p+=":",p+=_,p+=`\r
`}),p}function ai(u,p,_){e:{for(L in _){var L=!1;break e}L=!0}L||(_=br(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):rt(u,p,_))}function ct(u){mt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(ct,mt);var rc=/^https?$/i,bo=["POST","PUT"];r=ct.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,p,_,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qn.g(),this.v=this.o?Bn(this.o):Bn(qn),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(Q){Zi(this,Q);return}if(u=_||"",_=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var U in L)_.set(U,L[U]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const Q of L.keys())_.set(Q,L.get(Q));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(_.keys()).find(Q=>Q.toLowerCase()=="content-type"),U=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(bo,p,void 0))||L||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,fe]of _)this.g.setRequestHeader(Q,fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ps(this),this.u=!0,this.g.send(u),this.u=!1}catch(Q){Zi(this,Q)}};function Zi(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,ks(u),vn(u)}function ks(u){u.A||(u.A=!0,ut(u,"complete"),ut(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ut(this,"complete"),ut(this,"abort"),vn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vn(this,!0)),ct.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Oo(this):this.bb())},r.bb=function(){Oo(this)};function Oo(u){if(u.h&&typeof h<"u"&&(!u.v[1]||rn(u)!=4||u.Z()!=2)){if(u.u&&rn(u)==4)ar(u.Ea,0,u);else if(ut(u,"readystatechange"),rn(u)==4){u.h=!1;try{const fe=u.Z();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var L;if(L=fe===0){var U=String(u.D).match(Ki)[1]||null;!U&&d.self&&d.self.location&&(U=d.self.location.protocol.slice(0,-1)),L=!rc.test(U?U.toLowerCase():"")}_=L}if(_)ut(u,"complete"),ut(u,"success");else{u.m=6;try{var Q=2<rn(u)?u.g.statusText:""}catch{Q=""}u.l=Q+" ["+u.Z()+"]",ks(u)}}finally{vn(u)}}}}function vn(u,p){if(u.g){Ps(u);const _=u.g,L=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||ut(u,"ready");try{_.onreadystatechange=L}catch{}}}function Ps(u){u.I&&(d.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function rn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Jr(p)}};function Vo(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function As(u){const p={};u=(u.g&&2<=rn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<u.length;L++){if(Z(u[L]))continue;var _=D(u[L]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Q=p[U]||[];p[U]=Q,Q.push(_)}k(p,function(L){return L.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yr(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function No(u){this.Aa=0,this.i=[],this.j=new Bi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yr("baseRetryDelayMs",5e3,u),this.cb=yr("retryDelaySeedMs",1e4,u),this.Wa=yr("forwardChannelMaxRetries",2,u),this.wa=yr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new qi(u&&u.concurrentRequestLimit),this.Da=new nc,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=No.prototype,r.la=8,r.G=1,r.connect=function(u,p,_,L){nt(0),this.W=u,this.H=p||{},_&&L!==void 0&&(this.H.OSID=_,this.H.OAID=L),this.F=this.X,this.I=el(this,null,this.W),_r(this)};function Vt(u){if(xs(u),u.G==3){var p=u.U++,_=mn(u.I);if(rt(_,"SID",u.K),rt(_,"RID",p),rt(_,"TYPE","terminate"),Or(u,_),p=new Kn(u,u.j,p),p.L=2,p.v=ii(mn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=p.v,_=!0),_||(p.g=tl(p.j,null),p.g.ea(p.v)),p.F=Date.now(),it(p)}Ja(u)}function Yn(u){u.g&&(Fo(u),u.g.cancel(),u.g=null)}function xs(u){Yn(u),u.u&&(d.clearTimeout(u.u),u.u=null),Ds(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function _r(u){if(!gn(u.h)&&!u.s){u.s=!0;var p=u.Ga;Le||ie(),J||(Le(),J=!0),he.add(p,u),u.B=0}}function ic(u,p){return za(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Hn(T(u.Ga,u,p),Ya(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new Kn(this,this.j,u);let Q=this.o;if(this.S&&(Q?(Q=I(Q),A(Q,this.S)):Q=this.S),this.m!==null||this.O||(U.H=Q,Q=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var L=this.i[_];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(p+=L,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=li(this,U,p),_=mn(this.I),rt(_,"RID",u),rt(_,"CVER",22),this.D&&rt(_,"X-HTTP-Session-Id",this.D),Or(this,_),Q&&(this.O?p="headers="+encodeURIComponent(String(br(Q)))+"&"+p:this.m&&ai(_,this.m,Q)),Mo(this.h,U),this.Ua&&rt(_,"TYPE","init"),this.P?(rt(_,"$req",p),rt(_,"SID","null"),U.T=!0,Cs(U,_,null)):Cs(U,_,p),this.G=2}}else this.G==3&&(u?Rs(this,u):this.i.length==0||gn(this.h)||Rs(this))};function Rs(u,p){var _;p?_=p.l:_=u.U++;const L=mn(u.I);rt(L,"SID",u.K),rt(L,"RID",_),rt(L,"AID",u.T),Or(u,L),u.m&&u.o&&ai(L,u.m,u.o),_=new Kn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),p&&(u.i=p.D.concat(u.i)),p=li(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Mo(u.h,_),Cs(_,L,p)}function Or(u,p){u.H&&q(u.H,function(_,L){rt(p,L,_)}),u.l&&ti({},function(_,L){rt(p,L,_)})}function li(u,p,_){_=Math.min(u.i.length,_);var L=u.l?T(u.l.Na,u.l,u):null;e:{var U=u.i;let Q=-1;for(;;){const fe=["count="+_];Q==-1?0<_?(Q=U[0].g,fe.push("ofs="+Q)):Q=0:fe.push("ofs="+Q);let tt=!0;for(let Ct=0;Ct<_;Ct++){let Ke=U[Ct].g;const xt=U[Ct].map;if(Ke-=Q,0>Ke)Q=Math.max(0,U[Ct].g-100),tt=!1;else try{Qa(xt,fe,"req"+Ke+"_")}catch{L&&L(xt)}}if(tt){L=fe.join("&");break e}}}return u=u.i.splice(0,_),p.D=u,L}function Xi(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;Le||ie(),J||(Le(),J=!0),he.add(p,u),u.v=0}}function Ms(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Hn(T(u.Fa,u),Ya(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Xa(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Hn(T(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),Yn(this),Xa(this))};function Fo(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function Xa(u){u.g=new Kn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=mn(u.qa);rt(p,"RID","rpc"),rt(p,"SID",u.K),rt(p,"AID",u.T),rt(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&rt(p,"TO",u.ja),rt(p,"TYPE","xmlhttp"),Or(u,p),u.m&&u.o&&ai(p,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=ii(mn(p)),_.m=null,_.P=!0,xo(_,u)}r.Za=function(){this.C!=null&&(this.C=null,Yn(this),Ms(this),nt(19))};function Ds(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function bs(u,p){var _=null;if(u.g==p){Ds(u),Fo(u),u.g=null;var L=2}else if(Xt(u.h,p))_=p.D,Ba(u.h,p),L=1;else return;if(u.G!=0){if(p.o)if(L==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var U=u.B;L=pr(),ut(L,new De(L,_)),_r(u)}else Xi(u);else if(U=p.s,U==3||U==0&&0<p.X||!(L==1&&ic(u,p)||L==2&&Ms(u)))switch(_&&0<_.length&&(p=u.h,p.i=p.i.concat(_)),U){case 1:Vr(u,5);break;case 4:Vr(u,10);break;case 3:Vr(u,6);break;default:Vr(u,2)}}}function Ya(u,p){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*p}function Vr(u,p){if(u.j.info("Error code "+p),p==2){var _=T(u.fb,u),L=u.Xa;const U=!L;L=new Mr(L||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Gi(L,"https"),ii(L),U?tc(L.toString(),_):Ga(L.toString(),_)}else nt(2);u.G=0,u.l&&u.l.sa(p),Ja(u),xs(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function Ja(u){if(u.G=0,u.ka=[],u.l){const p=$a(u.h);(p.length!=0||u.i.length!=0)&&(N(u.ka,p),N(u.ka,u.i),u.h.i.length=0,j(u.i),u.i.length=0),u.l.ra()}}function el(u,p,_){var L=_ instanceof Mr?mn(_):new Mr(_);if(L.g!="")p&&(L.g=p+"."+L.g),ni(L,L.s);else{var U=d.location;L=U.protocol,p=p?p+"."+U.hostname:U.hostname,U=+U.port;var Q=new Mr(null);L&&Gi(Q,L),p&&(Q.g=p),U&&ni(Q,U),_&&(Q.l=_),L=Q}return _=u.D,p=u.ya,_&&p&&rt(L,_,p),rt(L,"VER",u.la),Or(u,L),L}function tl(u,p,_){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new ct(new Dr({eb:_})):new ct(u.pa),p.Ha(u.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function jo(){}r=jo.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Os(){}Os.prototype.g=function(u,p){return new Yt(u,p)};function Yt(u,p){mt.call(this),this.g=new No(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!Z(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!Z(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Er(this)}M(Yt,mt),Yt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){Vt(this.g)},Yt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=cr(u),u=_);p.i.push(new Ua(p.Ya++,u)),p.G==3&&_r(p)},Yt.prototype.N=function(){this.g.l=null,delete this.j,Vt(this.g),delete this.g,Yt.aa.N.call(this)};function nl(u){dn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}M(nl,dn);function rl(){$n.call(this),this.status=1}M(rl,$n);function Er(u){this.g=u}M(Er,jo),Er.prototype.ua=function(){ut(this.g,"a")},Er.prototype.ta=function(u){ut(this.g,new nl(u))},Er.prototype.sa=function(u){ut(this.g,new rl)},Er.prototype.ra=function(){ut(this.g,"b")},Os.prototype.createWebChannel=Os.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,yy=function(){return new Os},vy=function(){return pr()},my=pn,Yh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ws.NO_ERROR=0,ws.TIMEOUT=8,ws.HTTP_ERROR=6,iu=ws,Va.COMPLETE="complete",gy=Va,Rr.EventType=Zt,Zt.OPEN="a",Zt.CLOSE="b",Zt.ERROR="c",Zt.MESSAGE="d",mt.prototype.listen=mt.prototype.K,da=Rr,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,py=ct}).apply(typeof Jl<"u"?Jl:typeof self<"u"?self:typeof window<"u"?window:{});const Wm="@firebase/firestore",qm="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kt.UNAUTHENTICATED=new Kt(null),Kt.GOOGLE_CREDENTIALS=new Kt("google-credentials-uid"),Kt.FIRST_PARTY=new Kt("first-party-uid"),Kt.MOCK_USER=new Kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Co="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new ay("@firebase/firestore");function ro(){return ms.logLevel}function ve(r,...e){if(ms.logLevel<=Qe.DEBUG){const t=e.map(Cf);ms.debug(`Firestore (${Co}): ${r}`,...t)}}function Kr(r,...e){if(ms.logLevel<=Qe.ERROR){const t=e.map(Cf);ms.error(`Firestore (${Co}): ${r}`,...t)}}function fo(r,...e){if(ms.logLevel<=Qe.WARN){const t=e.map(Cf);ms.warn(`Firestore (${Co}): ${r}`,...t)}}function Cf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(r="Unexpected state"){const e=`FIRESTORE (${Co}) INTERNAL ASSERTION FAILED: `+r;throw Kr(e),new Error(e)}function et(r,e){r||be()}function Fe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends So{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class MC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Kt.UNAUTHENTICATED))}shutdown(){}}class DC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class bC{constructor(e){this.t=e,this.currentUser=Kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){et(this.o===void 0);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Wr,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const g=l;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},d=g=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>d(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Wr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(et(typeof i.accessToken=="string"),new _y(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string"),new Kt(e)}}class OC{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Kt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class VC{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new OC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Km{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NC{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,vC(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){et(this.o===void 0);const i=l=>{l.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.R;return this.R=l.token,ve("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const o=l=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Km(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(et(typeof t.token=="string"),this.R=t.token,new Km(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=FC(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function qe(r,e){return r<e?-1:r>e?1:0}function po(r,e,t){return r.length===e.length&&r.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm=-62135596800,Qm=1e6;class kt{static now(){return kt.fromMillis(Date.now())}static fromDate(e){return kt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Qm);return new kt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Gm)throw new ke(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qm}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Gm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new kt(0,0))}static max(){return new Ve(new kt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm="__name__";class Lr{constructor(e,t,i){t===void 0?t=0:t>e.length&&be(),i===void 0?i=e.length-t:i>e.length-t&&be(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Lr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Lr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Lr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Math.sign(e.length-t.length)}static compareSegments(e,t){const i=Lr.isNumericId(e),o=Lr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Lr.extractNumericId(e).compare(Lr.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ai.fromString(e.substring(4,e.length-2))}}class ft extends Lr{construct(e,t,i){return new ft(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ke(ae.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new ft(t)}static emptyPath(){return new ft([])}}const jC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ut extends Lr{construct(e,t,i){return new Ut(e,t,i)}static isValidIdentifier(e){return jC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ut.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Zm}static keyField(){return new Ut([Zm])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ke(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ke(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ke(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else d==="`"?(h=!h,o++):d!=="."||h?(i+=d,o++):(l(),o++)}if(l(),h)throw new ke(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ut(t)}static emptyPath(){return new Ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(ft.fromString(e))}static fromName(e){return new Me(ft.fromString(e).popFirst(5))}static empty(){return new Me(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new ft(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia=-1;function UC(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Ve.fromTimestamp(i===1e9?new kt(t+1,0):new kt(t,i));return new Mi(o,Me.empty(),e)}function zC(r){return new Mi(r.readTime,r.key,Ia)}class Mi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Mi(Ve.min(),Me.empty(),Ia)}static max(){return new Mi(Ve.max(),Me.empty(),Ia)}}function BC(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Me.comparator(r.documentKey,e.documentKey),t!==0?t:qe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(r){if(r.code!==ae.FAILED_PRECONDITION||r.message!==$C)throw r;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,i)=>{t(e)})}static reject(e){return new ne((t,i)=>{i(e)})}static waitFor(e){return new ne((t,i)=>{let o=0,l=0,h=!1;e.forEach(d=>{++o,d.next(()=>{++l,h&&l===o&&t()},g=>i(g))}),h=!0,l===o&&t()})}static or(e){let t=ne.resolve(!1);for(const i of e)t=t.next(o=>o?ne.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,l)=>{i.push(t.call(this,o,l))}),this.waitFor(i)}static mapArray(e,t){return new ne((i,o)=>{const l=e.length,h=new Array(l);let d=0;for(let g=0;g<l;g++){const v=g;t(e[v]).next(E=>{h[v]=E,++d,d===l&&i(h)},E=>o(E))}})}static doWhile(e,t){return new ne((i,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):i()};l()})}}function WC(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Lo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.oe(i),this._e=i=>t.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Ou.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf=-1;function Vu(r){return r==null}function Cu(r){return r===0&&1/r==-1/0}function qC(r){return typeof r=="number"&&Number.isInteger(r)&&!Cu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="";function KC(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Xm(e)),e=GC(r.get(t),e);return Xm(e)}function GC(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case wy:t+="";break;default:t+=l}}return t}function Xm(r){return r+wy+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Fi(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Sy(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t){this.comparator=e,this.root=t||jt.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eu(this.root,e,this.comparator,!1)}getReverseIterator(){return new eu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eu(this.root,e,this.comparator,!0)}}class eu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??jt.RED,this.left=o??jt.EMPTY,this.right=l??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new jt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return jt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw be();const e=this.left.check();if(e!==this.right.check())throw be();return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw be()}get value(){throw be()}get color(){throw be()}get left(){throw be()}get right(){throw be()}copy(e,t,i,o,l){return this}insert(e,t,i){return new jt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Jm(this.data.getIterator())}getIteratorFrom(e){return new Jm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pt(this.comparator);return t.data=e,t}}class Jm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new Cn([])}unionWith(e){let t=new Pt(Ut.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Cn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return po(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Cy("Invalid base64 string: "+l):l}}(e);return new zt(t)}static fromUint8Array(e){const t=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zt.EMPTY_BYTE_STRING=new zt("");const QC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Di(r){if(et(!!r),typeof r=="string"){let e=0;const t=QC.exec(r);if(et(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:_t(r.seconds),nanos:_t(r.nanos)}}function _t(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function bi(r){return typeof r=="string"?zt.fromBase64String(r):zt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="server_timestamp",Ly="__type__",Iy="__previous_value__",ky="__local_write_time__";function Lf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Ly])===null||t===void 0?void 0:t.stringValue)===Ty}function Nu(r){const e=r.mapValue.fields[Iy];return Lf(e)?Nu(e):e}function ka(r){const e=Di(r.mapValue.fields[ky].timestampValue);return new kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,t,i,o,l,h,d,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=v}}const Tu="(default)";class Pa{constructor(e,t){this.projectId=e,this.database=t||Tu}static empty(){return new Pa("","")}get isDefaultDatabase(){return this.database===Tu}isEqual(e){return e instanceof Pa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="__type__",XC="__max__",tu={mapValue:{}},Ay="__vector__",Lu="value";function Oi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Lf(r)?4:JC(r)?9007199254740991:YC(r)?10:11:be()}function Pr(r,e){if(r===e)return!0;const t=Oi(r);if(t!==Oi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ka(r).isEqual(ka(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Di(o.timestampValue),d=Di(l.timestampValue);return h.seconds===d.seconds&&h.nanos===d.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return bi(o.bytesValue).isEqual(bi(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return _t(o.geoPointValue.latitude)===_t(l.geoPointValue.latitude)&&_t(o.geoPointValue.longitude)===_t(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return _t(o.integerValue)===_t(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=_t(o.doubleValue),d=_t(l.doubleValue);return h===d?Cu(h)===Cu(d):isNaN(h)&&isNaN(d)}return!1}(r,e);case 9:return po(r.arrayValue.values||[],e.arrayValue.values||[],Pr);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},d=l.mapValue.fields||{};if(Ym(h)!==Ym(d))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(d[g]===void 0||!Pr(h[g],d[g])))return!1;return!0}(r,e);default:return be()}}function Aa(r,e){return(r.values||[]).find(t=>Pr(t,e))!==void 0}function go(r,e){if(r===e)return 0;const t=Oi(r),i=Oi(e);if(t!==i)return qe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(r.booleanValue,e.booleanValue);case 2:return function(l,h){const d=_t(l.integerValue||l.doubleValue),g=_t(h.integerValue||h.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(r,e);case 3:return ev(r.timestampValue,e.timestampValue);case 4:return ev(ka(r),ka(e));case 5:return qe(r.stringValue,e.stringValue);case 6:return function(l,h){const d=bi(l),g=bi(h);return d.compareTo(g)}(r.bytesValue,e.bytesValue);case 7:return function(l,h){const d=l.split("/"),g=h.split("/");for(let v=0;v<d.length&&v<g.length;v++){const E=qe(d[v],g[v]);if(E!==0)return E}return qe(d.length,g.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,h){const d=qe(_t(l.latitude),_t(h.latitude));return d!==0?d:qe(_t(l.longitude),_t(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return tv(r.arrayValue,e.arrayValue);case 10:return function(l,h){var d,g,v,E;const S=l.fields||{},T=h.fields||{},R=(d=S[Lu])===null||d===void 0?void 0:d.arrayValue,M=(g=T[Lu])===null||g===void 0?void 0:g.arrayValue,j=qe(((v=R==null?void 0:R.values)===null||v===void 0?void 0:v.length)||0,((E=M==null?void 0:M.values)===null||E===void 0?void 0:E.length)||0);return j!==0?j:tv(R,M)}(r.mapValue,e.mapValue);case 11:return function(l,h){if(l===tu.mapValue&&h===tu.mapValue)return 0;if(l===tu.mapValue)return 1;if(h===tu.mapValue)return-1;const d=l.fields||{},g=Object.keys(d),v=h.fields||{},E=Object.keys(v);g.sort(),E.sort();for(let S=0;S<g.length&&S<E.length;++S){const T=qe(g[S],E[S]);if(T!==0)return T;const R=go(d[g[S]],v[E[S]]);if(R!==0)return R}return qe(g.length,E.length)}(r.mapValue,e.mapValue);default:throw be()}}function ev(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return qe(r,e);const t=Di(r),i=Di(e),o=qe(t.seconds,i.seconds);return o!==0?o:qe(t.nanos,i.nanos)}function tv(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=go(t[o],i[o]);if(l)return l}return qe(t.length,i.length)}function mo(r){return Jh(r)}function Jh(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const i=Di(t);return`time(${i.seconds},${i.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return bi(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return Me.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Jh(l);return i+"]"}(r.arrayValue):"mapValue"in r?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${Jh(t.fields[h])}`;return o+"}"}(r.mapValue):be()}function su(r){switch(Oi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nu(r);return e?16+su(e):16;case 5:return 2*r.stringValue.length;case 6:return bi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,l)=>o+su(l),0)}(r.arrayValue);case 10:case 11:return function(i){let o=0;return Fi(i.fields,(l,h)=>{o+=l.length+su(h)}),o}(r.mapValue);default:throw be()}}function ef(r){return!!r&&"integerValue"in r}function If(r){return!!r&&"arrayValue"in r}function nv(r){return!!r&&"nullValue"in r}function rv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ou(r){return!!r&&"mapValue"in r}function YC(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Py])===null||t===void 0?void 0:t.stringValue)===Ay}function ya(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Fi(r.mapValue.fields,(t,i)=>e.mapValue.fields[t]=ya(i)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ya(r.arrayValue.values[t]);return e}return Object.assign({},r)}function JC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===XC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ou(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ya(t)}setAll(e){let t=Ut.emptyPath(),i={},o=[];e.forEach((h,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=d.popLast()}h?i[d.lastSegment()]=ya(h):o.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());ou(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];ou(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Fi(t,(o,l)=>e[o]=l);for(const o of i)delete e[o]}clone(){return new fn(ya(this.value))}}function xy(r){const e=[];return Fi(r.fields,(t,i)=>{const o=new Ut([t]);if(ou(i)){const l=xy(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,t,i,o,l,h,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=d}static newInvalidDocument(e){return new Gt(e,0,Ve.min(),Ve.min(),Ve.min(),fn.empty(),0)}static newFoundDocument(e,t,i,o){return new Gt(e,1,t,Ve.min(),i,o,0)}static newNoDocument(e,t){return new Gt(e,2,t,Ve.min(),Ve.min(),fn.empty(),0)}static newUnknownDocument(e,t){return new Gt(e,3,t,Ve.min(),Ve.min(),fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,t){this.position=e,this.inclusive=t}}function iv(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=Me.comparator(Me.fromName(h.referenceValue),t.key):i=go(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function sv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Pr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,t="asc"){this.field=e,this.dir=t}}function eT(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{}class It extends Ry{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new nT(e,t,i):t==="array-contains"?new sT(e,i):t==="in"?new oT(e,i):t==="not-in"?new aT(e,i):t==="array-contains-any"?new lT(e,i):new It(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new rT(e,i):new iT(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(go(t,this.value)):t!==null&&Oi(this.value)===Oi(t)&&this.matchesComparison(go(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ar extends Ry{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Ar(e,t)}matches(e){return My(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function My(r){return r.op==="and"}function Dy(r){return tT(r)&&My(r)}function tT(r){for(const e of r.filters)if(e instanceof Ar)return!1;return!0}function tf(r){if(r instanceof It)return r.field.canonicalString()+r.op.toString()+mo(r.value);if(Dy(r))return r.filters.map(e=>tf(e)).join(",");{const e=r.filters.map(t=>tf(t)).join(",");return`${r.op}(${e})`}}function by(r,e){return r instanceof It?function(i,o){return o instanceof It&&i.op===o.op&&i.field.isEqual(o.field)&&Pr(i.value,o.value)}(r,e):r instanceof Ar?function(i,o){return o instanceof Ar&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,h,d)=>l&&by(h,o.filters[d]),!0):!1}(r,e):void be()}function Oy(r){return r instanceof It?function(t){return`${t.field.canonicalString()} ${t.op} ${mo(t.value)}`}(r):r instanceof Ar?function(t){return t.op.toString()+" {"+t.getFilters().map(Oy).join(" ,")+"}"}(r):"Filter"}class nT extends It{constructor(e,t,i){super(e,t,i),this.key=Me.fromName(i.referenceValue)}matches(e){const t=Me.comparator(e.key,this.key);return this.matchesComparison(t)}}class rT extends It{constructor(e,t){super(e,"in",t),this.keys=Vy("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class iT extends It{constructor(e,t){super(e,"not-in",t),this.keys=Vy("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Vy(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Me.fromName(i.referenceValue))}class sT extends It{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return If(t)&&Aa(t.arrayValue,this.value)}}class oT extends It{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Aa(this.value.arrayValue,t)}}class aT extends It{constructor(e,t){super(e,"not-in",t)}matches(e){if(Aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Aa(this.value.arrayValue,t)}}class lT extends It{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!If(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Aa(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,t=null,i=[],o=[],l=null,h=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=d,this.le=null}}function ov(r,e=null,t=[],i=[],o=null,l=null,h=null){return new uT(r,e,t,i,o,l,h)}function kf(r){const e=Fe(r);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>tf(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Vu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>mo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>mo(i)).join(",")),e.le=t}return e.le}function Pf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!eT(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!by(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!sv(r.startAt,e.startAt)&&sv(r.endAt,e.endAt)}function nf(r){return Me.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,t=null,i=[],o=[],l=null,h="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=d,this.endAt=g,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function cT(r,e,t,i,o,l,h,d){return new Fu(r,e,t,i,o,l,h,d)}function Af(r){return new Fu(r)}function av(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function hT(r){return r.collectionGroup!==null}function _a(r){const e=Fe(r);if(e.he===null){e.he=[];const t=new Set;for(const l of e.explicitOrderBy)e.he.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let d=new Pt(Ut.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(v=>{v.isInequality()&&(d=d.add(v.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.he.push(new ku(l,i))}),t.has(Ut.keyField().canonicalString())||e.he.push(new ku(Ut.keyField(),i))}return e.he}function Ir(r){const e=Fe(r);return e.Pe||(e.Pe=fT(e,_a(r))),e.Pe}function fT(r,e){if(r.limitType==="F")return ov(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new ku(o.field,l)});const t=r.endAt?new Iu(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Iu(r.startAt.position,r.startAt.inclusive):null;return ov(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function rf(r,e,t){return new Fu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function ju(r,e){return Pf(Ir(r),Ir(e))&&r.limitType===e.limitType}function Ny(r){return`${kf(Ir(r))}|lt:${r.limitType}`}function io(r){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>Oy(o)).join(", ")}]`),Vu(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>mo(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>mo(o)).join(",")),`Target(${i})`}(Ir(r))}; limitType=${r.limitType})`}function Uu(r,e){return e.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Me.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(r,e)&&function(i,o){for(const l of _a(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(i,o){return!(i.startAt&&!function(h,d,g){const v=iv(h,d,g);return h.inclusive?v<=0:v<0}(i.startAt,_a(i),o)||i.endAt&&!function(h,d,g){const v=iv(h,d,g);return h.inclusive?v>=0:v>0}(i.endAt,_a(i),o))}(r,e)}function dT(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Fy(r){return(e,t)=>{let i=!1;for(const o of _a(r)){const l=pT(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function pT(r,e,t){const i=r.field.isKeyField()?Me.comparator(e.key,t.key):function(l,h,d){const g=h.data.field(l),v=d.data.field(l);return g!==null&&v!==null?go(g,v):be()}(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return be()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Fi(this.inner,(t,i)=>{for(const[o,l]of i)e(o,l)})}isEmpty(){return Sy(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=new gt(Me.comparator);function Gr(){return gT}const jy=new gt(Me.comparator);function pa(...r){let e=jy;for(const t of r)e=e.insert(t.key,t);return e}function Uy(r){let e=jy;return r.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function gs(){return Ea()}function zy(){return Ea()}function Ea(){return new ys(r=>r.toString(),(r,e)=>r.isEqual(e))}const mT=new gt(Me.comparator),vT=new Pt(Me.comparator);function He(...r){let e=vT;for(const t of r)e=e.add(t);return e}const yT=new Pt(qe);function _T(){return yT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cu(e)?"-0":e}}function By(r){return{integerValue:""+r}}function ET(r,e){return qC(e)?By(e):xf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(){this._=void 0}}function wT(r,e,t){return r instanceof Pu?function(o,l){const h={fields:{[Ly]:{stringValue:Ty},[ky]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Lf(l)&&(l=Nu(l)),l&&(h.fields[Iy]=l),{mapValue:h}}(t,e):r instanceof xa?Hy(r,e):r instanceof Ra?Wy(r,e):function(o,l){const h=$y(o,l),d=lv(h)+lv(o.Ie);return ef(h)&&ef(o.Ie)?By(d):xf(o.serializer,d)}(r,e)}function ST(r,e,t){return r instanceof xa?Hy(r,e):r instanceof Ra?Wy(r,e):t}function $y(r,e){return r instanceof Au?function(i){return ef(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class Pu extends zu{}class xa extends zu{constructor(e){super(),this.elements=e}}function Hy(r,e){const t=qy(e);for(const i of r.elements)t.some(o=>Pr(o,i))||t.push(i);return{arrayValue:{values:t}}}class Ra extends zu{constructor(e){super(),this.elements=e}}function Wy(r,e){let t=qy(e);for(const i of r.elements)t=t.filter(o=>!Pr(o,i));return{arrayValue:{values:t}}}class Au extends zu{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function lv(r){return _t(r.integerValue||r.doubleValue)}function qy(r){return If(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function CT(r,e){return r.field.isEqual(e.field)&&function(i,o){return i instanceof xa&&o instanceof xa||i instanceof Ra&&o instanceof Ra?po(i.elements,o.elements,Pr):i instanceof Au&&o instanceof Au?Pr(i.Ie,o.Ie):i instanceof Pu&&o instanceof Pu}(r.transform,e.transform)}class TT{constructor(e,t){this.version=e,this.transformResults=t}}class sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function au(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Bu{}function Ky(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Rf(r.key,sr.none()):new Ma(r.key,r.data,sr.none());{const t=r.data,i=fn.empty();let o=new Pt(Ut.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new ji(r.key,i,new Cn(o.toArray()),sr.none())}}function LT(r,e,t){r instanceof Ma?function(o,l,h){const d=o.value.clone(),g=cv(o.fieldTransforms,l,h.transformResults);d.setAll(g),l.convertToFoundDocument(h.version,d).setHasCommittedMutations()}(r,e,t):r instanceof ji?function(o,l,h){if(!au(o.precondition,l))return void l.convertToUnknownDocument(h.version);const d=cv(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(Gy(o)),g.setAll(d),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(r,e,t):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function wa(r,e,t,i){return r instanceof Ma?function(l,h,d,g){if(!au(l.precondition,h))return d;const v=l.value.clone(),E=hv(l.fieldTransforms,g,h);return v.setAll(E),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null}(r,e,t,i):r instanceof ji?function(l,h,d,g){if(!au(l.precondition,h))return d;const v=hv(l.fieldTransforms,g,h),E=h.data;return E.setAll(Gy(l)),E.setAll(v),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(S=>S.field))}(r,e,t,i):function(l,h,d){return au(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):d}(r,e,t)}function IT(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=$y(i.transform,o||null);l!=null&&(t===null&&(t=fn.empty()),t.set(i.field,l))}return t||null}function uv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&po(i,o,(l,h)=>CT(l,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ma extends Bu{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ji extends Bu{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Gy(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}}),e}function cv(r,e,t){const i=new Map;et(r.length===t.length);for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,d=e.data.field(l.field);i.set(l.field,ST(h,d,t[o]))}return i}function hv(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,wT(l,h,e))}return i}class Rf extends Bu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kT extends Bu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&LT(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=wa(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=wa(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=zy();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let d=this.applyToLocalView(h,l.mutatedFields);d=t.has(o.key)?null:d;const g=Ky(h,d);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Ve.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),He())}isEqual(e){return this.batchId===e.batchId&&po(this.mutations,e.mutations,(t,i)=>uv(t,i))&&po(this.baseMutations,e.baseMutations,(t,i)=>uv(t,i))}}class Mf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){et(e.mutations.length===i.length);let o=function(){return mT}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new Mf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,Ge;function RT(r){switch(r){case ae.OK:return be();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return be()}}function Qy(r){if(r===void 0)return Kr("GRPC error has no .code"),ae.UNKNOWN;switch(r){case St.OK:return ae.OK;case St.CANCELLED:return ae.CANCELLED;case St.UNKNOWN:return ae.UNKNOWN;case St.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case St.INTERNAL:return ae.INTERNAL;case St.UNAVAILABLE:return ae.UNAVAILABLE;case St.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case St.NOT_FOUND:return ae.NOT_FOUND;case St.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case St.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case St.ABORTED:return ae.ABORTED;case St.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case St.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case St.DATA_LOSS:return ae.DATA_LOSS;default:return be()}}(Ge=St||(St={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT=new Ai([4294967295,4294967295],0);function fv(r){const e=MT().encode(r),t=new dy;return t.update(e),new Uint8Array(t.digest())}function dv(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ai([t,i],0),new Ai([o,l],0)]}class Df{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ga(`Invalid padding: ${t}`);if(i<0)throw new ga(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ga(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ga(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Ai.fromNumber(this.Ee)}Ae(e,t,i){let o=e.add(t.multiply(Ai.fromNumber(i)));return o.compare(DT)===1&&(o=new Ai([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=fv(e),[i,o]=dv(t);for(let l=0;l<this.hashCount;l++){const h=this.Ae(i,o,l);if(!this.Re(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Df(l,o,t);return i.forEach(d=>h.insert(d)),h}insert(e){if(this.Ee===0)return;const t=fv(e),[i,o]=dv(t);for(let l=0;l<this.hashCount;l++){const h=this.Ae(i,o,l);this.Ve(h)}}Ve(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ga extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Da.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new $u(Ve.min(),o,new gt(qe),Gr(),He())}}class Da{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Da(i,t,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,t,i,o){this.me=e,this.removedTargetIds=t,this.key=i,this.fe=o}}class Zy{constructor(e,t){this.targetId=e,this.ge=t}}class Xy{constructor(e,t,i=zt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class pv{constructor(){this.pe=0,this.ye=gv(),this.we=zt.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=He(),t=He(),i=He();return this.ye.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:be()}}),new Da(this.we,this.be,e,t,i)}Me(){this.Se=!1,this.ye=gv()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,et(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class bT{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Gr(),this.$e=nu(),this.Ke=nu(),this.Ue=new gt(qe)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const i=this.He(t);switch(e.state){case 0:this.Je(t)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(t);break;case 3:this.Je(t)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),i.Ce(e.resumeToken));break;default:be()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((i,o)=>{this.Je(o)&&t(o)})}Ze(e){const t=e.targetId,i=e.ge.count,o=this.Xe(t);if(o){const l=o.target;if(nf(l))if(i===0){const h=new Me(l.path);this.ze(t,h,Gt.newNoDocument(h,Ve.min()))}else et(i===1);else{const h=this.et(t);if(h!==i){const d=this.tt(e),g=d?this.nt(d,e,h):1;if(g!==0){this.Ye(t);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,v)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,d;try{h=bi(i).toUint8Array()}catch(g){if(g instanceof Cy)return fo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new Df(h,o,l)}catch(g){return fo(g instanceof ga?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.Ee===0?null:d}nt(e,t,i){return t.ge.count===i-this.st(e,t.targetId)?0:2}st(e,t){const i=this.ke.getRemoteKeysForTarget(t);let o=0;return i.forEach(l=>{const h=this.ke.it(),d=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.ze(t,l,null),o++)}),o}ot(e){const t=new Map;this.qe.forEach((l,h)=>{const d=this.Xe(h);if(d){if(l.current&&nf(d.target)){const g=new Me(d.target.path);this._t(g).has(h)||this.ut(h,g)||this.ze(h,g,Gt.newNoDocument(g,e))}l.ve&&(t.set(h,l.Fe()),l.Me())}});let i=He();this.Ke.forEach((l,h)=>{let d=!0;h.forEachWhile(g=>{const v=this.Xe(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(l))}),this.Qe.forEach((l,h)=>h.setReadTime(e));const o=new $u(e,t,this.Ue,this.Qe,i);return this.Qe=Gr(),this.$e=nu(),this.Ke=nu(),this.Ue=new gt(qe),o}Ge(e,t){if(!this.Je(e))return;const i=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,i),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,i){if(!this.Je(e))return;const o=this.He(e);this.ut(e,t)?o.xe(t,1):o.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),i&&(this.Qe=this.Qe.insert(t,i))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new pv,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new Pt(qe),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Pt(qe),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new pv),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function nu(){return new gt(Me.comparator)}function gv(){return new gt(Me.comparator)}const OT={asc:"ASCENDING",desc:"DESCENDING"},VT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NT={and:"AND",or:"OR"};class FT{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sf(r,e){return r.useProto3Json||Vu(e)?e:{value:e}}function xu(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Yy(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function jT(r,e){return xu(r,e.toTimestamp())}function kr(r){return et(!!r),Ve.fromTimestamp(function(t){const i=Di(t);return new kt(i.seconds,i.nanos)}(r))}function bf(r,e){return of(r,e).canonicalString()}function of(r,e){const t=function(o){return new ft(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function Jy(r){const e=ft.fromString(r);return et(i_(e)),e}function af(r,e){return bf(r.databaseId,e.path)}function jh(r,e){const t=Jy(e);if(t.get(1)!==r.databaseId.projectId)throw new ke(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ke(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Me(t_(t))}function e_(r,e){return bf(r.databaseId,e)}function UT(r){const e=Jy(r);return e.length===4?ft.emptyPath():t_(e)}function lf(r){return new ft(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function t_(r){return et(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function mv(r,e,t){return{name:af(r,e),fields:t.value.mapValue.fields}}function zT(r,e){let t;if("targetChange"in e){e.targetChange;const i=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:be()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(v,E){return v.useProto3Json?(et(E===void 0||typeof E=="string"),zt.fromBase64String(E||"")):(et(E===void 0||E instanceof Buffer||E instanceof Uint8Array),zt.fromUint8Array(E||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,d=h&&function(v){const E=v.code===void 0?ae.UNKNOWN:Qy(v.code);return new ke(E,v.message||"")}(h);t=new Xy(i,o,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=jh(r,i.document.name),l=kr(i.document.updateTime),h=i.document.createTime?kr(i.document.createTime):Ve.min(),d=new fn({mapValue:{fields:i.document.fields}}),g=Gt.newFoundDocument(o,l,h,d),v=i.targetIds||[],E=i.removedTargetIds||[];t=new lu(v,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=jh(r,i.document),l=i.readTime?kr(i.readTime):Ve.min(),h=Gt.newNoDocument(o,l),d=i.removedTargetIds||[];t=new lu([],d,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=jh(r,i.document),l=i.removedTargetIds||[];t=new lu([],l,o,null)}else{if(!("filter"in e))return be();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new xT(o,l),d=i.targetId;t=new Zy(d,h)}}return t}function BT(r,e){let t;if(e instanceof Ma)t={update:mv(r,e.key,e.value)};else if(e instanceof Rf)t={delete:af(r,e.key)};else if(e instanceof ji)t={update:mv(r,e.key,e.data),updateMask:XT(e.fieldMask)};else{if(!(e instanceof kT))return be();t={verify:af(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,h){const d=h.transform;if(d instanceof Pu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof xa)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ra)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Au)return{fieldPath:h.field.canonicalString(),increment:d.Ie};throw be()}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:jT(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:be()}(r,e.precondition)),t}function $T(r,e){return r&&r.length>0?(et(e!==void 0),r.map(t=>function(o,l){let h=o.updateTime?kr(o.updateTime):kr(l);return h.isEqual(Ve.min())&&(h=kr(l)),new TT(h,o.transformResults||[])}(t,e))):[]}function HT(r,e){return{documents:[e_(r,e.path)]}}function WT(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=e_(r,o);const l=function(v){if(v.length!==0)return r_(Ar.create(v,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(v){if(v.length!==0)return v.map(E=>function(T){return{field:so(T.field),direction:GT(T.dir)}}(E))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const d=sf(r,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{ht:t,parent:o}}function qT(r){let e=UT(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){et(i===1);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=function(S){const T=n_(S);return T instanceof Ar&&Dy(T)?T.getFilters():[T]}(t.where));let h=[];t.orderBy&&(h=function(S){return S.map(T=>function(M){return new ku(oo(M.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(T))}(t.orderBy));let d=null;t.limit&&(d=function(S){let T;return T=typeof S=="object"?S.value:S,Vu(T)?null:T}(t.limit));let g=null;t.startAt&&(g=function(S){const T=!!S.before,R=S.values||[];return new Iu(R,T)}(t.startAt));let v=null;return t.endAt&&(v=function(S){const T=!S.before,R=S.values||[];return new Iu(R,T)}(t.endAt)),cT(e,o,h,l,d,"F",g,v)}function KT(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function n_(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=oo(t.unaryFilter.field);return It.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=oo(t.unaryFilter.field);return It.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=oo(t.unaryFilter.field);return It.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=oo(t.unaryFilter.field);return It.create(h,"!=",{nullValue:"NULL_VALUE"});default:return be()}}(r):r.fieldFilter!==void 0?function(t){return It.create(oo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return be()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Ar.create(t.compositeFilter.filters.map(i=>n_(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return be()}}(t.compositeFilter.op))}(r):be()}function GT(r){return OT[r]}function QT(r){return VT[r]}function ZT(r){return NT[r]}function so(r){return{fieldPath:r.canonicalString()}}function oo(r){return Ut.fromServerFormat(r.fieldPath)}function r_(r){return r instanceof It?function(t){if(t.op==="=="){if(rv(t.value))return{unaryFilter:{field:so(t.field),op:"IS_NAN"}};if(nv(t.value))return{unaryFilter:{field:so(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(rv(t.value))return{unaryFilter:{field:so(t.field),op:"IS_NOT_NAN"}};if(nv(t.value))return{unaryFilter:{field:so(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:so(t.field),op:QT(t.op),value:t.value}}}(r):r instanceof Ar?function(t){const i=t.getFilters().map(o=>r_(o));return i.length===1?i[0]:{compositeFilter:{op:ZT(t.op),filters:i}}}(r):be()}function XT(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function i_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,t,i,o,l=Ve.min(),h=Ve.min(),d=zt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(e){return new Ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e){this.Tt=e}}function JT(r){const e=qT({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?rf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(){this.Tn=new tL}addToCollectionParentIndex(e,t){return this.Tn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(Mi.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(Mi.min())}updateCollectionGroup(e,t,i){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class tL{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Pt(ft.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Pt(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},s_=41943040;class hn{static withCacheSize(e){return new hn(e,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(s_,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new vo(0)}static Un(){return new vo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="LruGarbageCollector",nL=1048576;function _v([r,e],[t,i]){const o=qe(r,t);return o===0?qe(e,i):o}class rL{constructor(e){this.Hn=e,this.buffer=new Pt(_v),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();_v(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class iL{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ve(yv,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Lo(t)?ve(yv,"Ignoring IndexedDB error during garbage collection: ",t):await To(t)}await this.er(3e5)})}}class sL{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(Ou.ae);const i=new rL(t);return this.tr.forEachTarget(e,o=>i.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>i.Zn(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.tr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(vv)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vv):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let i,o,l,h,d,g,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,h=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(i=S,d=Date.now(),this.removeTargets(e,i,t))).next(S=>(l=S,g=Date.now(),this.removeOrphanedDocuments(e,i))).next(S=>(v=Date.now(),ro()<=Qe.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(d-h)+`ms
	Removed ${l} targets in `+(g-d)+`ms
	Removed ${S} documents in `+(v-g)+`ms
Total Duration: ${v-E}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:S})))}}function oL(r,e){return new sL(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(){this.changes=new ys(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ne.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&wa(i.mutation,o,Cn.empty(),kt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,He()).next(()=>i))}getLocalViewOfDocuments(e,t,i=He()){const o=gs();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(l=>{let h=pa();return l.forEach((d,g)=>{h=h.insert(d,g.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const i=gs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,He()))}populateOverlays(e,t,i){const o=[];return i.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,d)=>{t.set(h,d)})})}computeViews(e,t,i,o){let l=Gr();const h=Ea(),d=function(){return Ea()}();return t.forEach((g,v)=>{const E=i.get(v.key);o.has(v.key)&&(E===void 0||E.mutation instanceof ji)?l=l.insert(v.key,v):E!==void 0?(h.set(v.key,E.mutation.getFieldMask()),wa(E.mutation,v,E.mutation.getFieldMask(),kt.now())):h.set(v.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,l).next(g=>(g.forEach((v,E)=>h.set(v,E)),t.forEach((v,E)=>{var S;return d.set(v,new lL(E,(S=h.get(v))!==null&&S!==void 0?S:null))}),d))}recalculateAndSaveOverlays(e,t){const i=Ea();let o=new gt((h,d)=>h-d),l=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const d of h)d.keys().forEach(g=>{const v=t.get(g);if(v===null)return;let E=i.get(g)||Cn.empty();E=d.applyToLocalView(v,E),i.set(g,E);const S=(o.get(d.batchId)||He()).add(g);o=o.insert(d.batchId,S)})}).next(()=>{const h=[],d=o.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),v=g.key,E=g.value,S=zy();E.forEach(T=>{if(!l.has(T)){const R=Ky(t.get(T),i.get(T));R!==null&&S.set(T,R),l=l.add(T)}}),h.push(this.documentOverlayCache.saveOverlays(e,v,S))}return ne.waitFor(h)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(h){return Me.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):hT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):ne.resolve(gs());let d=Ia,g=l;return h.next(v=>ne.forEach(v,(E,S)=>(d<S.largestBatchId&&(d=S.largestBatchId),l.get(E)?ne.resolve():this.remoteDocumentCache.getEntry(e,E).next(T=>{g=g.insert(E,T)}))).next(()=>this.populateOverlays(e,v,l)).next(()=>this.computeViews(e,g,v,He())).next(E=>({batchId:d,changes:Uy(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Me(t)).next(i=>{let o=pa();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=pa();return this.indexManager.getCollectionParents(e,l).next(d=>ne.forEach(d,g=>{const v=function(S,T){return new Fu(T,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)}(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next(E=>{E.forEach((S,T)=>{h=h.insert(S,T)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o))).next(h=>{l.forEach((g,v)=>{const E=v.getKey();h.get(E)===null&&(h=h.insert(E,Gt.newInvalidDocument(E)))});let d=pa();return h.forEach((g,v)=>{const E=l.get(g);E!==void 0&&wa(E.mutation,v,Cn.empty(),kt.now()),Uu(t,v)&&(d=d.insert(g,v))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ne.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:kr(o.createTime)}}(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(o){return{name:o.name,query:JT(o.bundledQuery),readTime:kr(o.readTime)}}(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(){this.overlays=new gt(Me.comparator),this.Rr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const i=gs();return ne.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,l)=>{this.Et(e,t,l)}),ne.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Rr.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(i)),ne.resolve()}getOverlaysForCollection(e,t,i){const o=gs(),l=t.length+1,h=new Me(t.child("")),d=this.overlays.getIteratorFrom(h);for(;d.hasNext();){const g=d.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&g.largestBatchId>i&&o.set(g.getKey(),g)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new gt((v,E)=>v-E);const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let E=l.get(v.largestBatchId);E===null&&(E=gs(),l=l.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const d=gs(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,E)=>d.set(v,E)),!(d.size()>=o)););return ne.resolve(d)}Et(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.Rr.get(o.largestBatchId).delete(i.key);this.Rr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new AT(t,i));let l=this.Rr.get(t);l===void 0&&(l=He(),this.Rr.set(t,l)),this.Rr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(){this.sessionToken=zt.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(){this.Vr=new Pt(bt.mr),this.gr=new Pt(bt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const i=new bt(e,t);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.wr(new bt(e,t))}br(e,t){e.forEach(i=>this.removeReference(i,t))}Sr(e){const t=new Me(new ft([])),i=new bt(t,e),o=new bt(t,e+1),l=[];return this.gr.forEachInRange([i,o],h=>{this.wr(h),l.push(h.key)}),l}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Me(new ft([])),i=new bt(t,e),o=new bt(t,e+1);let l=He();return this.gr.forEachInRange([i,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new bt(e,0),i=this.Vr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class bt{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Me.comparator(e.key,t.key)||qe(e.Cr,t.Cr)}static pr(e,t){return qe(e.Cr,t.Cr)||Me.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Pt(bt.mr)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new PT(l,t,i,o);this.mutationQueue.push(h);for(const d of o)this.Mr=this.Mr.add(new bt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ne.resolve(h)}lookupMutationBatch(e,t){return ne.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Nr(i),l=o<0?0:o;return ne.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Tf:this.Fr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new bt(t,0),o=new bt(t,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([i,o],h=>{const d=this.Or(h.Cr);l.push(d)}),ne.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Pt(qe);return t.forEach(o=>{const l=new bt(o,0),h=new bt(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,h],d=>{i=i.add(d.Cr)})}),ne.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Me.isDocumentKey(l)||(l=l.child(""));const h=new bt(new Me(l),0);let d=new Pt(qe);return this.Mr.forEachWhile(g=>{const v=g.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(d=d.add(g.Cr)),!0)},h),ne.resolve(this.Br(d))}Br(e){const t=[];return e.forEach(i=>{const o=this.Or(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){et(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return ne.forEach(t.mutations,o=>{const l=new bt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,t){const i=new bt(t,0),o=this.Mr.firstAfterOrEqual(i);return ne.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e){this.kr=e,this.docs=function(){return new gt(Me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.kr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ne.resolve(i?i.document.mutableCopy():Gt.newInvalidDocument(t))}getEntries(e,t){let i=Gr();return t.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Gt.newInvalidDocument(o))}),ne.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Gr();const h=t.path,d=new Me(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:v,value:{document:E}}=g.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||BC(zC(E),i)<=0||(o.has(E.key)||Uu(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return ne.resolve(l)}getAllFromCollectionGroup(e,t,i,o){be()}qr(e,t){return ne.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new gL(this)}getSize(e){return ne.resolve(this.size)}}class gL extends aL{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(i)}),ne.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e){this.persistence=e,this.Qr=new ys(t=>kf(t),Pf),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Of,this.targetCount=0,this.Ur=vo.Kn()}forEachTarget(e,t){return this.Qr.forEach((i,o)=>t(o)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.$r&&(this.$r=t),ne.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new vo(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.zn(t),ne.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.Qr.forEach((h,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.Qr.delete(h),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),ne.waitFor(l).next(()=>o)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const i=this.Qr.get(t)||null;return ne.resolve(i)}addMatchingKeys(e,t,i){return this.Kr.yr(t,i),ne.resolve()}removeMatchingKeys(e,t,i){this.Kr.br(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),ne.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Kr.vr(t);return ne.resolve(i)}containsKey(e,t){return ne.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Ou(0),this.zr=!1,this.zr=!0,this.jr=new fL,this.referenceDelegate=e(this),this.Hr=new mL(this),this.indexManager=new eL,this.remoteDocumentCache=function(o){return new pL(o)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new YT(t),this.Yr=new cL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Wr[e.toKey()];return i||(i=new dL(t,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,i){ve("MemoryPersistence","Starting transaction:",e);const o=new vL(this.Gr.next());return this.referenceDelegate.Zr(),i(o).next(l=>this.referenceDelegate.Xr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}ei(e,t){return ne.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,t)))}}class vL extends HC{constructor(e){super(),this.currentSequenceNumber=e}}class Vf{constructor(e){this.persistence=e,this.ti=new Of,this.ni=null}static ri(e){return new Vf(e)}get ii(){if(this.ni)return this.ni;throw be()}addReference(e,t,i){return this.ti.addReference(i,t),this.ii.delete(i.toString()),ne.resolve()}removeReference(e,t,i){return this.ti.removeReference(i,t),this.ii.add(i.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ne.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(o=>this.ii.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.ii.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.ii,i=>{const o=Me.fromPath(i);return this.si(e,o).next(l=>{l||t.removeEntry(o,Ve.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(i=>{i?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ne.or([()=>ne.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Ru{constructor(e,t){this.persistence=e,this.oi=new ys(i=>KC(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=oL(this,t)}static ri(e,t){return new Ru(e,t)}Zr(){}Xr(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}sr(e){let t=0;return this.rr(e,i=>{t++}).next(()=>t)}rr(e,t){return ne.forEach(this.oi,(i,o)=>this.ar(e,i,o).next(l=>l?ne.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.qr(e,h=>this.ar(e,h,t).next(d=>{d||(i++,l.removeEntry(h,Ve.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ne.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=su(e.data.value)),t}ar(e,t,i){return ne.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.oi.get(t);return ne.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Hi=i,this.Ji=o}static Yi(e,t){let i=He(),o=He();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Nf(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return pS()?8:WC(fS())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.rs(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.ss(e,t,o,i).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new yL;return this._s(e,t,h).next(d=>{if(l.result=d,this.Xi)return this.us(e,t,h,d.size)})}).next(()=>l.result)}us(e,t,i,o){return i.documentReadCount<this.es?(ro()<=Qe.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",io(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ne.resolve()):(ro()<=Qe.DEBUG&&ve("QueryEngine","Query:",io(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ts*o?(ro()<=Qe.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",io(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ir(t))):ne.resolve())}rs(e,t){if(av(t))return ne.resolve(null);let i=Ir(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=rf(t,null,"F"),i=Ir(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const h=He(...l);return this.ns.getDocuments(e,h).next(d=>this.indexManager.getMinOffset(e,i).next(g=>{const v=this.cs(t,d);return this.ls(t,v,h,g.readTime)?this.rs(e,rf(t,null,"F")):this.hs(e,v,t,g)}))})))}ss(e,t,i,o){return av(t)||o.isEqual(Ve.min())?ne.resolve(null):this.ns.getDocuments(e,i).next(l=>{const h=this.cs(t,l);return this.ls(t,h,i,o)?ne.resolve(null):(ro()<=Qe.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),io(t)),this.hs(e,h,t,UC(o,Ia)).next(d=>d))})}cs(e,t){let i=new Pt(Fy(e));return t.forEach((o,l)=>{Uu(e,l)&&(i=i.add(l))}),i}ls(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}_s(e,t,i){return ro()<=Qe.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",io(t)),this.ns.getDocumentsMatchingQuery(e,t,Mi.min(),i)}hs(e,t,i,o){return this.ns.getDocumentsMatchingQuery(e,i,o).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff="LocalStore",EL=3e8;class wL{constructor(e,t,i,o){this.persistence=e,this.Ps=t,this.serializer=o,this.Ts=new gt(qe),this.Is=new ys(l=>kf(l),Pf),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uL(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function SL(r,e,t,i){return new wL(r,e,t,i)}async function a_(r,e){const t=Fe(r);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,t.As(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const h=[],d=[];let g=He();for(const v of o){h.push(v.batchId);for(const E of v.mutations)g=g.add(E.key)}for(const v of l){d.push(v.batchId);for(const E of v.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(i,g).next(v=>({Rs:v,removedBatchIds:h,addedBatchIds:d}))})})}function CL(r,e){const t=Fe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),l=t.ds.newChangeBuffer({trackRemovals:!0});return function(d,g,v,E){const S=v.batch,T=S.keys();let R=ne.resolve();return T.forEach(M=>{R=R.next(()=>E.getEntry(g,M)).next(j=>{const N=v.docVersions.get(M);et(N!==null),j.version.compareTo(N)<0&&(S.applyToRemoteDocument(j,v),j.isValidDocument()&&(j.setReadTime(v.commitVersion),E.addEntry(j)))})}),R.next(()=>d.mutationQueue.removeMutationBatch(g,S))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let g=He();for(let v=0;v<d.mutationResults.length;++v)d.mutationResults[v].transformResults.length>0&&(g=g.add(d.batch.mutations[v].key));return g}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function l_(r){const e=Fe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function TL(r,e){const t=Fe(r),i=e.snapshotVersion;let o=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.ds.newChangeBuffer({trackRemovals:!0});o=t.Ts;const d=[];e.targetChanges.forEach((E,S)=>{const T=o.get(S);if(!T)return;d.push(t.Hr.removeMatchingKeys(l,E.removedDocuments,S).next(()=>t.Hr.addMatchingKeys(l,E.addedDocuments,S)));let R=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(S)!==null?R=R.withResumeToken(zt.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):E.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(E.resumeToken,i)),o=o.insert(S,R),function(j,N,Y){return j.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=EL?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0}(T,R,E)&&d.push(t.Hr.updateTargetData(l,R))});let g=Gr(),v=He();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))}),d.push(LL(l,h,e.documentUpdates).next(E=>{g=E.Vs,v=E.fs})),!i.isEqual(Ve.min())){const E=t.Hr.getLastRemoteSnapshotVersion(l).next(S=>t.Hr.setTargetsMetadata(l,l.currentSequenceNumber,i));d.push(E)}return ne.waitFor(d).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,g,v)).next(()=>g)}).then(l=>(t.Ts=o,l))}function LL(r,e,t){let i=He(),o=He();return t.forEach(l=>i=i.add(l)),e.getEntries(r,i).next(l=>{let h=Gr();return t.forEach((d,g)=>{const v=l.get(d);g.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(d)),g.isNoDocument()&&g.version.isEqual(Ve.min())?(e.removeEntry(d,g.readTime),h=h.insert(d,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),h=h.insert(d,g)):ve(Ff,"Ignoring outdated watch update for ",d,". Current version:",v.version," Watch version:",g.version)}),{Vs:h,fs:o}})}function IL(r,e){const t=Fe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Tf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function kL(r,e){const t=Fe(r);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Hr.getTargetData(i,e).next(l=>l?(o=l,ne.resolve(o)):t.Hr.allocateTargetId(i).next(h=>(o=new Ii(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Hr.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.Ts.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(i.targetId,i),t.Is.set(e,i.targetId)),i})}async function uf(r,e,t){const i=Fe(r),o=i.Ts.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,h=>i.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!Lo(h))throw h;ve(Ff,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Ts=i.Ts.remove(e),i.Is.delete(o.target)}function Ev(r,e,t){const i=Fe(r);let o=Ve.min(),l=He();return i.persistence.runTransaction("Execute query","readwrite",h=>function(g,v,E){const S=Fe(g),T=S.Is.get(E);return T!==void 0?ne.resolve(S.Ts.get(T)):S.Hr.getTargetData(v,E)}(i,h,Ir(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(h,d.targetId).next(g=>{l=g})}).next(()=>i.Ps.getDocumentsMatchingQuery(h,e,t?o:Ve.min(),t?l:He())).next(d=>(PL(i,dT(e),d),{documents:d,gs:l})))}function PL(r,e,t){let i=r.Es.get(e)||Ve.min();t.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),r.Es.set(e,i)}class wv{constructor(){this.activeTargetIds=_T()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AL{constructor(){this.ho=new wv,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,i){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new wv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv="ConnectivityMonitor";class Cv{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ve(Sv,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ve(Sv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ru=null;function cf(){return ru===null?ru=function(){return 268435456+Math.round(2147483648*Math.random())}():ru++,"0x"+ru.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh="RestConnection",RL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ML{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${i}/databases/${o}`,this.wo=this.databaseId.database===Tu?`project_id=${i}`:`project_id=${i}&database_id=${o}`}bo(e,t,i,o,l){const h=cf(),d=this.So(e,t.toUriEncodedString());ve(Uh,`Sending RPC '${e}' ${h}:`,d,i);const g={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(g,o,l),this.vo(e,d,g,i).then(v=>(ve(Uh,`Received RPC '${e}' ${h}: `,v),v),v=>{throw fo(Uh,`RPC '${e}' ${h} failed with error: `,v,"url: ",d,"request:",i),v})}Co(e,t,i,o,l,h){return this.bo(e,t,i,o,l)}Do(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Co}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),i&&i.headers.forEach((o,l)=>e[l]=o)}So(e,t){const i=RL[e];return`${this.po}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qt="WebChannelConnection";class bL extends ML{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,i,o){const l=cf();return new Promise((h,d)=>{const g=new py;g.setWithCredentials(!0),g.listenOnce(gy.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case iu.NO_ERROR:const E=g.getResponseJson();ve(qt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),h(E);break;case iu.TIMEOUT:ve(qt,`RPC '${e}' ${l} timed out`),d(new ke(ae.DEADLINE_EXCEEDED,"Request time out"));break;case iu.HTTP_ERROR:const S=g.getStatus();if(ve(qt,`RPC '${e}' ${l} failed with status:`,S,"response text:",g.getResponseText()),S>0){let T=g.getResponseJson();Array.isArray(T)&&(T=T[0]);const R=T==null?void 0:T.error;if(R&&R.status&&R.message){const M=function(N){const Y=N.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(Y)>=0?Y:ae.UNKNOWN}(R.status);d(new ke(M,R.message))}else d(new ke(ae.UNKNOWN,"Server responded with status "+g.getStatus()))}else d(new ke(ae.UNAVAILABLE,"Connection failed."));break;default:be()}}finally{ve(qt,`RPC '${e}' ${l} completed.`)}});const v=JSON.stringify(o);ve(qt,`RPC '${e}' ${l} sending request:`,o),g.send(t,"POST",v,i,15)})}Wo(e,t,i){const o=cf(),l=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=yy(),d=vy(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Do(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const E=l.join("");ve(qt,`Creating RPC '${e}' stream ${o}: ${E}`,g);const S=h.createWebChannel(E,g);let T=!1,R=!1;const M=new DL({Fo:N=>{R?ve(qt,`Not sending because RPC '${e}' stream ${o} is closed:`,N):(T||(ve(qt,`Opening RPC '${e}' stream ${o} transport.`),S.open(),T=!0),ve(qt,`RPC '${e}' stream ${o} sending:`,N),S.send(N))},Mo:()=>S.close()}),j=(N,Y,Z)=>{N.listen(Y,le=>{try{Z(le)}catch(K){setTimeout(()=>{throw K},0)}})};return j(S,da.EventType.OPEN,()=>{R||(ve(qt,`RPC '${e}' stream ${o} transport opened.`),M.Qo())}),j(S,da.EventType.CLOSE,()=>{R||(R=!0,ve(qt,`RPC '${e}' stream ${o} transport closed`),M.Ko())}),j(S,da.EventType.ERROR,N=>{R||(R=!0,fo(qt,`RPC '${e}' stream ${o} transport errored:`,N),M.Ko(new ke(ae.UNAVAILABLE,"The operation could not be completed")))}),j(S,da.EventType.MESSAGE,N=>{var Y;if(!R){const Z=N.data[0];et(!!Z);const le=Z,K=(le==null?void 0:le.error)||((Y=le[0])===null||Y===void 0?void 0:Y.error);if(K){ve(qt,`RPC '${e}' stream ${o} received error:`,K);const H=K.status;let q=function(C){const A=St[C];if(A!==void 0)return Qy(A)}(H),k=K.message;q===void 0&&(q=ae.INTERNAL,k="Unknown error status: "+H+" with message "+K.message),R=!0,M.Ko(new ke(q,k)),S.close()}else ve(qt,`RPC '${e}' stream ${o} received:`,Z),M.Uo(Z)}}),j(d,my.STAT_EVENT,N=>{N.stat===Yh.PROXY?ve(qt,`RPC '${e}' stream ${o} detected buffering proxy`):N.stat===Yh.NOPROXY&&ve(qt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{M.$o()},0),M}}function zh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(r){return new FT(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Ti=e,this.timerId=t,this.Go=i,this.zo=o,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),o=Math.max(0,t-i);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="PersistentStream";class c_{constructor(e,t,i,o,l,h,d,g){this.Ti=e,this.n_=i,this.r_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new u_(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Kr(t.toString()),Kr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.i_===t&&this.V_(i,o)},i=>{e(()=>{const o=new ke(ae.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(o)})})}V_(e,t){const i=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{i(()=>this.m_(o))}),this.stream.onMessage(o=>{i(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ve(Tv,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(ve(Tv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OL extends c_{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=zT(this.serializer,e),i=function(l){if(!("targetChange"in l))return Ve.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ve.min():h.readTime?kr(h.readTime):Ve.min()}(e);return this.listener.p_(t,i)}y_(e){const t={};t.database=lf(this.serializer),t.addTarget=function(l,h){let d;const g=h.target;if(d=nf(g)?{documents:HT(l,g)}:{query:WT(l,g).ht},d.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){d.resumeToken=Yy(l,h.resumeToken);const v=sf(l,h.expectedCount);v!==null&&(d.expectedCount=v)}else if(h.snapshotVersion.compareTo(Ve.min())>0){d.readTime=xu(l,h.snapshotVersion.toTimestamp());const v=sf(l,h.expectedCount);v!==null&&(d.expectedCount=v)}return d}(this.serializer,e);const i=KT(this.serializer,e);i&&(t.labels=i),this.I_(t)}w_(e){const t={};t.database=lf(this.serializer),t.removeTarget=e,this.I_(t)}}class VL extends c_{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return et(!!e.streamToken),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=$T(e.writeResults,e.commitTime),i=kr(e.commitTime);return this.listener.v_(i,t)}C_(){const e={};e.database=lf(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>BT(this.serializer,i))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{}class FL extends NL{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new ke(ae.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,i,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.bo(e,of(t,i),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ke(ae.UNKNOWN,l.toString())})}Co(e,t,i,o,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,d])=>this.connection.Co(e,of(t,i),o,h,d,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ke(ae.UNKNOWN,h.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class jL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Kr(t),this.N_=!1):ve("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="RemoteStore";class UL{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(h=>{i.enqueueAndForget(async()=>{_s(this)&&(ve(vs,"Restarting streams for network reachability change."),await async function(g){const v=Fe(g);v.W_.add(4),await ba(v),v.j_.set("Unknown"),v.W_.delete(4),await Wu(v)}(this))})}),this.j_=new jL(i,o)}}async function Wu(r){if(_s(r))for(const e of r.G_)await e(!0)}async function ba(r){for(const e of r.G_)await e(!1)}function h_(r,e){const t=Fe(r);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),Bf(t)?zf(t):Io(t).c_()&&Uf(t,e))}function jf(r,e){const t=Fe(r),i=Io(t);t.U_.delete(e),i.c_()&&f_(t,e),t.U_.size===0&&(i.c_()?i.P_():_s(t)&&t.j_.set("Unknown"))}function Uf(r,e){if(r.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Io(r).y_(e)}function f_(r,e){r.H_.Ne(e),Io(r).w_(e)}function zf(r){r.H_=new bT({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>r.U_.get(e)||null,it:()=>r.datastore.serializer.databaseId}),Io(r).start(),r.j_.B_()}function Bf(r){return _s(r)&&!Io(r).u_()&&r.U_.size>0}function _s(r){return Fe(r).W_.size===0}function d_(r){r.H_=void 0}async function zL(r){r.j_.set("Online")}async function BL(r){r.U_.forEach((e,t)=>{Uf(r,e)})}async function $L(r,e){d_(r),Bf(r)?(r.j_.q_(e),zf(r)):r.j_.set("Unknown")}async function HL(r,e,t){if(r.j_.set("Online"),e instanceof Xy&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const d of l.targetIds)o.U_.has(d)&&(await o.remoteSyncer.rejectListen(d,h),o.U_.delete(d),o.H_.removeTarget(d))}(r,e)}catch(i){ve(vs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Mu(r,i)}else if(e instanceof lu?r.H_.We(e):e instanceof Zy?r.H_.Ze(e):r.H_.je(e),!t.isEqual(Ve.min()))try{const i=await l_(r.localStore);t.compareTo(i)>=0&&await function(l,h){const d=l.H_.ot(h);return d.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const E=l.U_.get(v);E&&l.U_.set(v,E.withResumeToken(g.resumeToken,h))}}),d.targetMismatches.forEach((g,v)=>{const E=l.U_.get(g);if(!E)return;l.U_.set(g,E.withResumeToken(zt.EMPTY_BYTE_STRING,E.snapshotVersion)),f_(l,g);const S=new Ii(E.target,g,v,E.sequenceNumber);Uf(l,S)}),l.remoteSyncer.applyRemoteEvent(d)}(r,t)}catch(i){ve(vs,"Failed to raise snapshot:",i),await Mu(r,i)}}async function Mu(r,e,t){if(!Lo(e))throw e;r.W_.add(1),await ba(r),r.j_.set("Offline"),t||(t=()=>l_(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{ve(vs,"Retrying IndexedDB access"),await t(),r.W_.delete(1),await Wu(r)})}function p_(r,e){return e().catch(t=>Mu(r,t,e))}async function qu(r){const e=Fe(r),t=Vi(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:Tf;for(;WL(e);)try{const o=await IL(e.localStore,i);if(o===null){e.K_.length===0&&t.P_();break}i=o.batchId,qL(e,o)}catch(o){await Mu(e,o)}g_(e)&&m_(e)}function WL(r){return _s(r)&&r.K_.length<10}function qL(r,e){r.K_.push(e);const t=Vi(r);t.c_()&&t.b_&&t.S_(e.mutations)}function g_(r){return _s(r)&&!Vi(r).u_()&&r.K_.length>0}function m_(r){Vi(r).start()}async function KL(r){Vi(r).C_()}async function GL(r){const e=Vi(r);for(const t of r.K_)e.S_(t.mutations)}async function QL(r,e,t){const i=r.K_.shift(),o=Mf.from(i,e,t);await p_(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await qu(r)}async function ZL(r,e){e&&Vi(r).b_&&await async function(i,o){if(function(h){return RT(h)&&h!==ae.ABORTED}(o.code)){const l=i.K_.shift();Vi(i).h_(),await p_(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await qu(i)}}(r,e),g_(r)&&m_(r)}async function Lv(r,e){const t=Fe(r);t.asyncQueue.verifyOperationInProgress(),ve(vs,"RemoteStore received new credentials");const i=_s(t);t.W_.add(3),await ba(t),i&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Wu(t)}async function XL(r,e){const t=Fe(r);e?(t.W_.delete(2),await Wu(t)):e||(t.W_.add(2),await ba(t),t.j_.set("Unknown"))}function Io(r){return r.J_||(r.J_=function(t,i,o){const l=Fe(t);return l.M_(),new OL(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{xo:zL.bind(null,r),No:BL.bind(null,r),Lo:$L.bind(null,r),p_:HL.bind(null,r)}),r.G_.push(async e=>{e?(r.J_.h_(),Bf(r)?zf(r):r.j_.set("Unknown")):(await r.J_.stop(),d_(r))})),r.J_}function Vi(r){return r.Y_||(r.Y_=function(t,i,o){const l=Fe(t);return l.M_(),new VL(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{xo:()=>Promise.resolve(),No:KL.bind(null,r),Lo:ZL.bind(null,r),D_:GL.bind(null,r),v_:QL.bind(null,r)}),r.G_.push(async e=>{e?(r.Y_.h_(),await qu(r)):(await r.Y_.stop(),r.K_.length>0&&(ve(vs,`Stopping write stream with ${r.K_.length} pending writes`),r.K_=[]))})),r.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,d=new $f(e,t,h,o,l);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ke(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hf(r,e){if(Kr("AsyncQueue",`${e}: ${r}`),Lo(r))return new ke(ae.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{static emptySet(e){return new ho(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Me.comparator(t.key,i.key):(t,i)=>Me.comparator(t.key,i.key),this.keyedMap=pa(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ho)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new ho;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(){this.Z_=new gt(Me.comparator)}track(e){const t=e.doc.key,i=this.Z_.get(t);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(t):e.type===1&&i.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):be():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class yo{constructor(e,t,i,o,l,h,d,g,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach(d=>{h.push({type:0,doc:d})}),new yo(e,t,ho.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ju(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class JL{constructor(){this.queries=kv(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,i){const o=Fe(t),l=o.queries;o.queries=kv(),l.forEach((h,d)=>{for(const g of d.ta)g.onError(i)})})(this,new ke(ae.ABORTED,"Firestore shutting down"))}}function kv(){return new ys(r=>Ny(r),ju)}async function v_(r,e){const t=Fe(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.na()&&e.ra()&&(i=2):(l=new YL,i=e.ra()?0:1);try{switch(i){case 0:l.ea=await t.onListen(o,!0);break;case 1:l.ea=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const d=Hf(h,`Initialization of query '${io(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.ta.push(e),e.sa(t.onlineState),l.ea&&e.oa(l.ea)&&Wf(t)}async function y_(r,e){const t=Fe(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.ta.indexOf(e);h>=0&&(l.ta.splice(h,1),l.ta.length===0?o=e.ra()?0:1:!l.na()&&e.ra()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function eI(r,e){const t=Fe(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const d of h.ta)d.oa(o)&&(i=!0);h.ea=o}}i&&Wf(t)}function tI(r,e,t){const i=Fe(r),o=i.queries.get(e);if(o)for(const l of o.ta)l.onError(t);i.queries.delete(e)}function Wf(r){r.ia.forEach(e=>{e.next()})}var hf,Pv;(Pv=hf||(hf={}))._a="default",Pv.Cache="cache";class __{constructor(e,t,i){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new yo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const i=t!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=yo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==hf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e){this.key=e}}class w_{constructor(e){this.key=e}}class nI{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=He(),this.mutatedKeys=He(),this.ya=Fy(e),this.wa=new ho(this.ya)}get ba(){return this.fa}Sa(e,t){const i=t?t.Da:new Iv,o=t?t.wa:this.wa;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,d=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,S)=>{const T=o.get(E),R=Uu(this.query,S)?S:null,M=!!T&&this.mutatedKeys.has(T.key),j=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let N=!1;T&&R?T.data.isEqual(R.data)?M!==j&&(i.track({type:3,doc:R}),N=!0):this.va(T,R)||(i.track({type:2,doc:R}),N=!0,(g&&this.ya(R,g)>0||v&&this.ya(R,v)<0)&&(d=!0)):!T&&R?(i.track({type:0,doc:R}),N=!0):T&&!R&&(i.track({type:1,doc:T}),N=!0,(g||v)&&(d=!0)),N&&(R?(h=h.add(R),l=j?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{wa:h,Da:i,ls:d,mutatedKeys:l}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const h=e.Da.X_();h.sort((E,S)=>function(R,M){const j=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be()}};return j(R)-j(M)}(E.type,S.type)||this.ya(E.doc,S.doc)),this.Ca(i),o=o!=null&&o;const d=t&&!o?this.Fa():[],g=this.pa.size===0&&this.current&&!o?1:0,v=g!==this.ga;return this.ga=g,h.length!==0||v?{snapshot:new yo(this.query,e.wa,l,h,e.mutatedKeys,g===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Iv,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=He(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const t=[];return e.forEach(i=>{this.pa.has(i)||t.push(new w_(i))}),this.pa.forEach(i=>{e.has(i)||t.push(new E_(i))}),t}Oa(e){this.fa=e.gs,this.pa=He();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return yo.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const qf="SyncEngine";class rI{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class iI{constructor(e){this.key=e,this.Ba=!1}}class sI{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.La={},this.ka=new ys(d=>Ny(d),ju),this.qa=new Map,this.Qa=new Set,this.$a=new gt(Me.comparator),this.Ka=new Map,this.Ua=new Of,this.Wa={},this.Ga=new Map,this.za=vo.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function oI(r,e,t=!0){const i=k_(r);let o;const l=i.ka.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Na()):o=await S_(i,e,t,!0),o}async function aI(r,e){const t=k_(r);await S_(t,e,!0,!1)}async function S_(r,e,t,i){const o=await kL(r.localStore,Ir(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await lI(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&h_(r.remoteStore,o),d}async function lI(r,e,t,i,o){r.Ha=(S,T,R)=>async function(j,N,Y,Z){let le=N.view.Sa(Y);le.ls&&(le=await Ev(j.localStore,N.query,!1).then(({documents:k})=>N.view.Sa(k,le)));const K=Z&&Z.targetChanges.get(N.targetId),H=Z&&Z.targetMismatches.get(N.targetId)!=null,q=N.view.applyChanges(le,j.isPrimaryClient,K,H);return xv(j,N.targetId,q.Ma),q.snapshot}(r,S,T,R);const l=await Ev(r.localStore,e,!0),h=new nI(e,l.gs),d=h.Sa(l.documents),g=Da.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),v=h.applyChanges(d,r.isPrimaryClient,g);xv(r,t,v.Ma);const E=new rI(e,t,h);return r.ka.set(e,E),r.qa.has(t)?r.qa.get(t).push(e):r.qa.set(t,[e]),v.snapshot}async function uI(r,e,t){const i=Fe(r),o=i.ka.get(e),l=i.qa.get(o.targetId);if(l.length>1)return i.qa.set(o.targetId,l.filter(h=>!ju(h,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await uf(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&jf(i.remoteStore,o.targetId),ff(i,o.targetId)}).catch(To)):(ff(i,o.targetId),await uf(i.localStore,o.targetId,!0))}async function cI(r,e){const t=Fe(r),i=t.ka.get(e),o=t.qa.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),jf(t.remoteStore,i.targetId))}async function hI(r,e,t){const i=yI(r);try{const o=await function(h,d){const g=Fe(h),v=kt.now(),E=d.reduce((R,M)=>R.add(M.key),He());let S,T;return g.persistence.runTransaction("Locally write mutations","readwrite",R=>{let M=Gr(),j=He();return g.ds.getEntries(R,E).next(N=>{M=N,M.forEach((Y,Z)=>{Z.isValidDocument()||(j=j.add(Y))})}).next(()=>g.localDocuments.getOverlayedDocuments(R,M)).next(N=>{S=N;const Y=[];for(const Z of d){const le=IT(Z,S.get(Z.key).overlayedDocument);le!=null&&Y.push(new ji(Z.key,le,xy(le.value.mapValue),sr.exists(!0)))}return g.mutationQueue.addMutationBatch(R,v,Y,d)}).next(N=>{T=N;const Y=N.applyToLocalDocumentSet(S,j);return g.documentOverlayCache.saveOverlays(R,N.batchId,Y)})}).then(()=>({batchId:T.batchId,changes:Uy(S)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(h,d,g){let v=h.Wa[h.currentUser.toKey()];v||(v=new gt(qe)),v=v.insert(d,g),h.Wa[h.currentUser.toKey()]=v}(i,o.batchId,t),await Oa(i,o.changes),await qu(i.remoteStore)}catch(o){const l=Hf(o,"Failed to persist write");t.reject(l)}}async function C_(r,e){const t=Fe(r);try{const i=await TL(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.Ka.get(l);h&&(et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Ba=!0:o.modifiedDocuments.size>0?et(h.Ba):o.removedDocuments.size>0&&(et(h.Ba),h.Ba=!1))}),await Oa(t,i,e)}catch(i){await To(i)}}function Av(r,e,t){const i=Fe(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.ka.forEach((l,h)=>{const d=h.view.sa(e);d.snapshot&&o.push(d.snapshot)}),function(h,d){const g=Fe(h);g.onlineState=d;let v=!1;g.queries.forEach((E,S)=>{for(const T of S.ta)T.sa(d)&&(v=!0)}),v&&Wf(g)}(i.eventManager,e),o.length&&i.La.p_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function fI(r,e,t){const i=Fe(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Ka.get(e),l=o&&o.key;if(l){let h=new gt(Me.comparator);h=h.insert(l,Gt.newNoDocument(l,Ve.min()));const d=He().add(l),g=new $u(Ve.min(),new Map,new gt(qe),h,d);await C_(i,g),i.$a=i.$a.remove(l),i.Ka.delete(e),Kf(i)}else await uf(i.localStore,e,!1).then(()=>ff(i,e,t)).catch(To)}async function dI(r,e){const t=Fe(r),i=e.batch.batchId;try{const o=await CL(t.localStore,e);L_(t,i,null),T_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Oa(t,o)}catch(o){await To(o)}}async function pI(r,e,t){const i=Fe(r);try{const o=await function(h,d){const g=Fe(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let E;return g.mutationQueue.lookupMutationBatch(v,d).next(S=>(et(S!==null),E=S.keys(),g.mutationQueue.removeMutationBatch(v,S))).next(()=>g.mutationQueue.performConsistencyCheck(v)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(v,E,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E)).next(()=>g.localDocuments.getDocuments(v,E))})}(i.localStore,e);L_(i,e,t),T_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Oa(i,o)}catch(o){await To(o)}}function T_(r,e){(r.Ga.get(e)||[]).forEach(t=>{t.resolve()}),r.Ga.delete(e)}function L_(r,e,t){const i=Fe(r);let o=i.Wa[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Wa[i.currentUser.toKey()]=o}}function ff(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.qa.get(e))r.ka.delete(i),t&&r.La.Ja(i,t);r.qa.delete(e),r.isPrimaryClient&&r.Ua.Sr(e).forEach(i=>{r.Ua.containsKey(i)||I_(r,i)})}function I_(r,e){r.Qa.delete(e.path.canonicalString());const t=r.$a.get(e);t!==null&&(jf(r.remoteStore,t),r.$a=r.$a.remove(e),r.Ka.delete(t),Kf(r))}function xv(r,e,t){for(const i of t)i instanceof E_?(r.Ua.addReference(i.key,e),gI(r,i)):i instanceof w_?(ve(qf,"Document no longer in limbo: "+i.key),r.Ua.removeReference(i.key,e),r.Ua.containsKey(i.key)||I_(r,i.key)):be()}function gI(r,e){const t=e.key,i=t.path.canonicalString();r.$a.get(t)||r.Qa.has(i)||(ve(qf,"New document in limbo: "+t),r.Qa.add(i),Kf(r))}function Kf(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const e=r.Qa.values().next().value;r.Qa.delete(e);const t=new Me(ft.fromString(e)),i=r.za.next();r.Ka.set(i,new iI(t)),r.$a=r.$a.insert(t,i),h_(r.remoteStore,new Ii(Ir(Af(t.path)),i,"TargetPurposeLimboResolution",Ou.ae))}}async function Oa(r,e,t){const i=Fe(r),o=[],l=[],h=[];i.ka.isEmpty()||(i.ka.forEach((d,g)=>{h.push(i.Ha(g,e,t).then(v=>{var E;if((v||t)&&i.isPrimaryClient){const S=v?!v.fromCache:(E=t==null?void 0:t.targetChanges.get(g.targetId))===null||E===void 0?void 0:E.current;i.sharedClientState.updateQueryState(g.targetId,S?"current":"not-current")}if(v){o.push(v);const S=Nf.Yi(g.targetId,v);l.push(S)}}))}),await Promise.all(h),i.La.p_(o),await async function(g,v){const E=Fe(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ne.forEach(v,T=>ne.forEach(T.Hi,R=>E.persistence.referenceDelegate.addReference(S,T.targetId,R)).next(()=>ne.forEach(T.Ji,R=>E.persistence.referenceDelegate.removeReference(S,T.targetId,R)))))}catch(S){if(!Lo(S))throw S;ve(Ff,"Failed to update sequence numbers: "+S)}for(const S of v){const T=S.targetId;if(!S.fromCache){const R=E.Ts.get(T),M=R.snapshotVersion,j=R.withLastLimboFreeSnapshotVersion(M);E.Ts=E.Ts.insert(T,j)}}}(i.localStore,l))}async function mI(r,e){const t=Fe(r);if(!t.currentUser.isEqual(e)){ve(qf,"User change. New user:",e.toKey());const i=await a_(t.localStore,e);t.currentUser=e,function(l,h){l.Ga.forEach(d=>{d.forEach(g=>{g.reject(new ke(ae.CANCELLED,h))})}),l.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Oa(t,i.Rs)}}function vI(r,e){const t=Fe(r),i=t.Ka.get(e);if(i&&i.Ba)return He().add(i.key);{let o=He();const l=t.qa.get(e);if(!l)return o;for(const h of l){const d=t.ka.get(h);o=o.unionWith(d.view.ba)}return o}}function k_(r){const e=Fe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=C_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fI.bind(null,e),e.La.p_=eI.bind(null,e.eventManager),e.La.Ja=tI.bind(null,e.eventManager),e}function yI(r){const e=Fe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pI.bind(null,e),e}class Du{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hu(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return SL(this.persistence,new _L,e.initialUser,this.serializer)}Xa(e){return new o_(Vf.ri,this.serializer)}Za(e){return new AL}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Du.provider={build:()=>new Du};class _I extends Du{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){et(this.persistence.referenceDelegate instanceof Ru);const i=this.persistence.referenceDelegate.garbageCollector;return new iL(i,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new o_(i=>Ru.ri(i,t),this.serializer)}}class df{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Av(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=mI.bind(null,this.syncEngine),await XL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new JL}()}createDatastore(e){const t=Hu(e.databaseInfo.databaseId),i=function(l){return new bL(l)}(e.databaseInfo);return function(l,h,d,g){return new FL(l,h,d,g)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,l,h,d){return new UL(i,o,l,h,d)}(this.localStore,this.datastore,e.asyncQueue,t=>Av(this.syncEngine,t,0),function(){return Cv.D()?new Cv:new xL}())}createSyncEngine(e,t){return function(o,l,h,d,g,v,E){const S=new sI(o,l,h,d,g,v);return E&&(S.ja=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Fe(o);ve(vs,"RemoteStore shutting down."),l.W_.add(5),await ba(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}df.provider={build:()=>new df};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Kr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni="FirestoreClient";class EI{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Kt.UNAUTHENTICATED,this.clientId=Ey.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async h=>{ve(Ni,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(i,h=>(ve(Ni,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Hf(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Bh(r,e){r.asyncQueue.verifyOperationInProgress(),ve(Ni,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener(async o=>{i.isEqual(o)||(await a_(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function Rv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await wI(r);ve(Ni,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(i=>Lv(e.remoteStore,i)),r.setAppCheckTokenChangeListener((i,o)=>Lv(e.remoteStore,o)),r._onlineComponents=e}async function wI(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ve(Ni,"Using user provided OfflineComponentProvider");try{await Bh(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===ae.FAILED_PRECONDITION||o.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;fo("Error using user provided cache. Falling back to memory cache: "+t),await Bh(r,new Du)}}else ve(Ni,"Using default OfflineComponentProvider"),await Bh(r,new _I(void 0));return r._offlineComponents}async function A_(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ve(Ni,"Using user provided OnlineComponentProvider"),await Rv(r,r._uninitializedComponentsProvider._online)):(ve(Ni,"Using default OnlineComponentProvider"),await Rv(r,new df))),r._onlineComponents}function SI(r){return A_(r).then(e=>e.syncEngine)}async function x_(r){const e=await A_(r),t=e.eventManager;return t.onListen=oI.bind(null,e.syncEngine),t.onUnlisten=uI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=aI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=cI.bind(null,e.syncEngine),t}function CI(r,e,t={}){const i=new Wr;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,d,g,v){const E=new P_({next:T=>{E.su(),h.enqueueAndForget(()=>y_(l,S));const R=T.docs.has(d);!R&&T.fromCache?v.reject(new ke(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&T.fromCache&&g&&g.source==="server"?v.reject(new ke(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(T)},error:T=>v.reject(T)}),S=new __(Af(d.path),E,{includeMetadataChanges:!0,Ta:!0});return v_(l,S)}(await x_(r),r.asyncQueue,e,t,i)),i.promise}function TI(r,e,t={}){const i=new Wr;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,d,g,v){const E=new P_({next:T=>{E.su(),h.enqueueAndForget(()=>y_(l,S)),T.fromCache&&g.source==="server"?v.reject(new ke(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(T)},error:T=>v.reject(T)}),S=new __(d,E,{includeMetadataChanges:!0,Ta:!0});return v_(l,S)}(await x_(r),r.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(r,e,t){if(!t)throw new ke(ae.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function LI(r,e,t,i){if(e===!0&&i===!0)throw new ke(ae.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Dv(r){if(!Me.isDocumentKey(r))throw new ke(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function bv(r){if(Me.isDocumentKey(r))throw new ke(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Gf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":be()}function Qr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ke(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Gf(r);throw new ke(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="firestore.googleapis.com",Ov=!0;class Vv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ke(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=D_,this.ssl=Ov}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Ov;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=s_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nL)throw new ke(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=R_((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ke(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ke(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ke(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ku{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ke(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ke(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new MC;switch(i.type){case"firstParty":return new VC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ke(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=Mv.get(t);i&&(ve("ComponentProvider","Removing Datastore"),Mv.delete(t),i.terminate())}(this),Promise.resolve()}}function II(r,e,t,i={}){var o;const l=(r=Qr(r,Ku))._getSettings(),h=Object.assign(Object.assign({},l),{emulatorOptions:r._getEmulatorOptions()}),d=`${e}:${t}`;l.host!==D_&&l.host!==d&&fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},l),{host:d,ssl:!1,emulatorOptions:i});if(!Eu(g,h)&&(r._setSettings(g),i.mockUserToken)){let v,E;if(typeof i.mockUserToken=="string")v=i.mockUserToken,E=Kt.MOCK_USER;else{v=hS(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new ke(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Kt(S)}r._authCredentials=new DC(new _y(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Gu(this.firestore,e,this._query)}}class Tn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tn(this.firestore,e,this._key)}}class xi extends Gu{constructor(e,t,i){super(e,t,Af(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tn(this.firestore,null,new Me(e))}withConverter(e){return new xi(this.firestore,e,this._path)}}function Nv(r,e,...t){if(r=Ri(r),M_("collection","path",e),r instanceof Ku){const i=ft.fromString(e,...t);return bv(i),new xi(r,null,i)}{if(!(r instanceof Tn||r instanceof xi))throw new ke(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ft.fromString(e,...t));return bv(i),new xi(r.firestore,null,i)}}function ao(r,e,...t){if(r=Ri(r),arguments.length===1&&(e=Ey.newId()),M_("doc","path",e),r instanceof Ku){const i=ft.fromString(e,...t);return Dv(i),new Tn(r,null,new Me(i))}{if(!(r instanceof Tn||r instanceof xi))throw new ke(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ft.fromString(e,...t));return Dv(i),new Tn(r.firestore,r instanceof xi?r.converter:null,new Me(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="AsyncQueue";class jv{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new u_(this,"async_queue_retry"),this.bu=()=>{const i=zh();i&&ve(Fv,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.Su=e;const t=zh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=zh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Wr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Lo(e))throw e;ve(Fv,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const o=function(h){let d=h.message||"";return h.stack&&(d=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),d}(i);throw Kr("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.pu=!1,i))));return this.Su=t,t}enqueueAfterDelay(e,t,i){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const o=$f.createAndSchedule(this,e,t,i,l=>this.Fu(l));return this.fu.push(o),o}Du(){this.gu&&be()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class ko extends Ku{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new jv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jv(e),this._firestoreClient=void 0,await e}}}function kI(r,e){const t=typeof r=="object"?r:wC(),i=typeof r=="string"?r:Tu,o=mC(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=uS("firestore");l&&II(o,...l)}return o}function Qf(r){if(r._terminated)throw new ke(ae.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||PI(r),r._firestoreClient}function PI(r){var e,t,i;const o=r._freezeSettings(),l=function(d,g,v,E){return new ZC(d,g,v,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,R_(E.experimentalLongPollingOptions),E.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new EI(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(d){const g=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(g),_online:g}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _o(zt.fromBase64String(e))}catch(t){throw new ke(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _o(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ke(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=/^__.*__$/;class xI{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ji(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ma(e,this.data,t,this.fieldTransforms)}}class b_{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ji(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function O_(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be()}}class Jf{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Bu(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Jf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ku({path:i,Qu:!1});return o.$u(e),o}Ku(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ku({path:i,Qu:!1});return o.Bu(),o}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return bu(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(O_(this.Lu)&&AI.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class RI{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Hu(e)}ju(e,t,i,o=!1){return new Jf({Lu:e,methodName:t,zu:i,path:Ut.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function V_(r){const e=r._freezeSettings(),t=Hu(r._databaseId);return new RI(r._databaseId,!!e.ignoreUndefinedProperties,t)}function MI(r,e,t,i,o,l={}){const h=r.ju(l.merge||l.mergeFields?2:0,e,t,o);ed("Data must be an object, but it was:",h,i);const d=N_(i,h);let g,v;if(l.merge)g=new Cn(h.fieldMask),v=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const S of l.mergeFields){const T=pf(e,S,t);if(!h.contains(T))throw new ke(ae.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);j_(E,T)||E.push(T)}g=new Cn(E),v=h.fieldTransforms.filter(S=>g.covers(S.field))}else g=null,v=h.fieldTransforms;return new xI(new fn(d),g,v)}class Zu extends Zf{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zu}}function DI(r,e,t,i){const o=r.ju(1,e,t);ed("Data must be an object, but it was:",o,i);const l=[],h=fn.empty();Fi(i,(g,v)=>{const E=td(e,g,t);v=Ri(v);const S=o.Ku(E);if(v instanceof Zu)l.push(E);else{const T=Xu(v,S);T!=null&&(l.push(E),h.set(E,T))}});const d=new Cn(l);return new b_(h,d,o.fieldTransforms)}function bI(r,e,t,i,o,l){const h=r.ju(1,e,t),d=[pf(e,i,t)],g=[o];if(l.length%2!=0)throw new ke(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)d.push(pf(e,l[T])),g.push(l[T+1]);const v=[],E=fn.empty();for(let T=d.length-1;T>=0;--T)if(!j_(v,d[T])){const R=d[T];let M=g[T];M=Ri(M);const j=h.Ku(R);if(M instanceof Zu)v.push(R);else{const N=Xu(M,j);N!=null&&(v.push(R),E.set(R,N))}}const S=new Cn(v);return new b_(E,S,h.fieldTransforms)}function Xu(r,e){if(F_(r=Ri(r)))return ed("Unsupported field value:",e,r),N_(r,e);if(r instanceof Zf)return function(i,o){if(!O_(o.Lu))throw o.Wu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,o){const l=[];let h=0;for(const d of i){let g=Xu(d,o.Uu(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}}(r,e)}return function(i,o){if((i=Ri(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return ET(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=kt.fromDate(i);return{timestampValue:xu(o.serializer,l)}}if(i instanceof kt){const l=new kt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:xu(o.serializer,l)}}if(i instanceof Xf)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof _o)return{bytesValue:Yy(o.serializer,i._byteString)};if(i instanceof Tn){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.Wu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:bf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Yf)return function(h,d){return{mapValue:{fields:{[Py]:{stringValue:Ay},[Lu]:{arrayValue:{values:h.toArray().map(v=>{if(typeof v!="number")throw d.Wu("VectorValues must only contain numeric values.");return xf(d.serializer,v)})}}}}}}(i,o);throw o.Wu(`Unsupported field value: ${Gf(i)}`)}(r,e)}function N_(r,e){const t={};return Sy(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fi(r,(i,o)=>{const l=Xu(o,e.qu(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function F_(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof kt||r instanceof Xf||r instanceof _o||r instanceof Tn||r instanceof Zf||r instanceof Yf)}function ed(r,e,t){if(!F_(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=Gf(t);throw i==="an object"?e.Wu(r+" a custom object"):e.Wu(r+" "+i)}}function pf(r,e,t){if((e=Ri(e))instanceof Qu)return e._internalPath;if(typeof e=="string")return td(r,e);throw bu("Field path arguments must be of type string or ",r,!1,void 0,t)}const OI=new RegExp("[~\\*/\\[\\]]");function td(r,e,t){if(e.search(OI)>=0)throw bu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Qu(...e.split("."))._internalPath}catch{throw bu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function bu(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new ke(ae.INVALID_ARGUMENT,d+r+g)}function j_(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new VI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(z_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class VI extends U_{data(){return super.data()}}function z_(r,e){return typeof e=="string"?td(r,e):e instanceof Qu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ke(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class FI{convertValue(e,t="none"){switch(Oi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw be()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Fi(e,(o,l)=>{i[o]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[Lu].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(h=>_t(h.doubleValue));return new Yf(l)}convertGeoPoint(e){return new Xf(_t(e.latitude),_t(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Nu(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ka(e));default:return null}}convertTimestamp(e){const t=Di(e);return new kt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ft.fromString(e);et(i_(i));const o=new Pa(i.get(1),i.get(3)),l=new Me(i.popFirst(5));return o.isEqual(t)||Kr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(r,e,t){let i;return i=r?r.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class B_ extends U_{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new uu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(z_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class uu extends B_{data(e={}){return super.data(e)}}class UI{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ma(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new uu(this._firestore,this._userDataWriter,i.key,i,new ma(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(d=>{const g=new uu(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ma(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const g=new uu(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ma(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,E=-1;return d.type!==0&&(v=h.indexOf(d.doc.key),h=h.delete(d.doc.key)),d.type!==1&&(h=h.add(d.doc),E=h.indexOf(d.doc.key)),{type:zI(d.type),doc:g,oldIndex:v,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function zI(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(r){r=Qr(r,Tn);const e=Qr(r.firestore,ko);return CI(Qf(e),r._key).then(t=>qI(e,r,t))}class $_ extends FI{constructor(e){super(),this.firestore=e}convertBytes(e){return new _o(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,t)}}function $I(r){r=Qr(r,Gu);const e=Qr(r.firestore,ko),t=Qf(e),i=new $_(e);return NI(r._query),TI(t,r._query).then(o=>new UI(e,i,r,o))}function $h(r,e,t,...i){r=Qr(r,Tn);const o=Qr(r.firestore,ko),l=V_(o);let h;return h=typeof(e=Ri(e))=="string"||e instanceof Qu?bI(l,"updateDoc",r._key,e,t,i):DI(l,"updateDoc",r._key,e),nd(o,[h.toMutation(r._key,sr.exists(!0))])}function HI(r){return nd(Qr(r.firestore,ko),[new Rf(r._key,sr.none())])}function WI(r,e){const t=Qr(r.firestore,ko),i=ao(r),o=jI(r.converter,e);return nd(t,[MI(V_(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,sr.exists(!1))]).then(()=>i)}function nd(r,e){return function(i,o){const l=new Wr;return i.asyncQueue.enqueueAndForget(async()=>hI(await SI(i),o,l)),l.promise}(Qf(r),e)}function qI(r,e,t){const i=t.docs.get(e._key),o=new $_(r);return new B_(r,o,e._key,i,new ma(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Co=o})(EC),Su(new Ta("firestore",(i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),d=new ko(new bC(i.getProvider("auth-internal")),new NC(h,i.getProvider("app-check-internal")),function(v,E){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ke(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pa(v.options.projectId,E)}(h,o),h);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),co(Wm,qm,e),co(Wm,qm,"esm2017")})();var KI="firebase",GI="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */co(KI,GI,"app");const QI={apiKey:"AIzaSyAS7b2Bp3Voswu4hI93IYx-N4BEUlsqrF4",authDomain:"fire-hydrants-9d3f1.firebaseapp.com",projectId:"fire-hydrants-9d3f1",storageBucket:"fire-hydrants-9d3f1.appspot.com",messagingSenderId:"658716195379",appId:"1:658716195379:web:82edaccd3c06583be48146"},ZI=cy(QI),fs=kI(ZI);var Hh,Uv;function XI(){if(Uv)return Hh;Uv=1;const r=Math.asin,e=Math.cos,t=Math.sin,i=Math.sqrt,o=Math.PI,l=6378137;function h(E){return E*E}function d(E){return E*o/180}function g(E){return h(t(E/2))}function v(E,S){const T=d(Array.isArray(E)?E[1]:E.latitude??E.lat),R=d(Array.isArray(S)?S[1]:S.latitude??S.lat),M=d(Array.isArray(E)?E[0]:E.longitude??E.lng??E.lon),j=d(Array.isArray(S)?S[0]:S.longitude??S.lng??S.lon),N=g(R-T)+e(T)*e(R)*g(j-M);return 2*l*r(i(N))}return Hh=v,Hh}var YI=XI();const JI=gf(YI);console.log(" Google Maps API Key:","AIzaSyBO0tdSKHAuNy7mA7aEijlCSB4lZWuc-18");const ek={width:"100%",height:"100vh"},[zv,tk]=y.useState(null);y.useEffect(()=>{isLoaded&&window.google&&window.google.maps&&tk({url:"https://maps.google.com/mapfiles/kml/shapes/man.png",scaledSize:new window.google.maps.Size(40,40)})},[isLoaded]);const nk=({isOpen:r,message:e,onConfirm:t,onCancel:i})=>r?Ae.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center"},children:Ae.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",textAlign:"center",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.2)"},children:[Ae.jsx("h2",{children:""}),Ae.jsx("p",{children:e}),Ae.jsx("button",{onClick:t,style:{margin:"5px",padding:"10px",backgroundColor:"blue",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"OK"}),Ae.jsx("button",{onClick:i,style:{margin:"5px",padding:"10px",backgroundColor:"gray",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:""})]})}):null,rk=()=>{const[r,e]=y.useState([]),[t,i]=y.useState({lat:35.6895,lng:139.6917}),[o,l]=y.useState(14),[h,d]=y.useState(null),[g,v]=y.useState([]),[E,S]=y.useState([]),[T,R]=y.useState(""),[M,j]=y.useState(!1),[N,Y]=y.useState(!1),[Z,le]=y.useState(""),[K,H]=y.useState(null),[q,k]=y.useState(!1),[I,C]=y.useState(null),[A,D]=y.useState(!1),[b,P]=y.useState(null),{isLoaded:pe,loadError:Se}=Iw({googleMapsApiKey:"AIzaSyBO0tdSKHAuNy7mA7aEijlCSB4lZWuc-18"});if(Se)return console.error(" Google Maps "),Ae.jsx("div",{children:"Google Maps "});if(!pe)return console.log(" Google Maps API "),Ae.jsx("div",{children:"Loading Google Maps..."});y.useEffect(()=>{var te;pe?(console.log(" Google Maps :",pe),console.log(" window.google:",window.google),console.log(" window.google.maps:",(te=window.google)==null?void 0:te.maps)):console.log(" Google Maps API ")},[pe]);const Pe=y.useRef(null),Le=te=>{if(!pe||!window.google||!window.google.maps){console.error(" Google Maps API ");return}Pe.current=te,console.log(" Google Maps ",te)},J=()=>{navigator.geolocation.getCurrentPosition(te=>{const{latitude:ee,longitude:ye}=te.coords,Be={lat:ee,lng:ye};d(Be),i(Be),l(16)},te=>console.error(":",te),{enableHighAccuracy:!0})};y.useEffect(()=>{J()},[]),y.useEffect(()=>{(async()=>{try{const ye=(await $I(Nv(fs,"fire_hydrants"))).docs.map(Xe=>{const ot=Xe.data();return{...ot,firestoreId:Xe.id,checked:ot.checked||!1}});console.log(" Firestore :",ye),v(ye);const Be=ye.filter(Xe=>Xe.checked);S(Be)}catch(ee){console.error(" :",ee)}})()},[]);const he=(te,ee,ye,Be,Xe)=>{le(""),H(()=>()=>ie(te,ee,ye)),Y(!0)};y.useEffect(()=>{if(!h||g.length===0)return;const te=g.filter(ee=>JI(h,{lat:ee.lat,lng:ee.lon})<=1e3);e(te)},[h,g]);const ie=async(te,ee,ye)=>{try{const Be=ao(fs,"fire_hydrants",te);await $h(Be,{lat:ee,lon:ye}),v(Xe=>Xe.map(ot=>ot.firestoreId===te?{...ot,lat:ee,lon:ye}:ot)),console.log(` : ID=${te}, =(${ee}, ${ye})`)}catch(Be){console.error(" :",Be)}Y(!1)},V=te=>{if(T!=="")return;const ee=te.latLng.lat(),ye=te.latLng.lng();C({lat:ee,lng:ye}),D(!0)},G=async te=>{var ee;if(I){try{const Xe=((ee=(await(await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${I.lat},${I.lng}&key=AIzaSyBO0tdSKHAuNy7mA7aEijlCSB4lZWuc-18`)).json()).results[0])==null?void 0:ee.formatted_address)||"",ot={lat:I.lat,lon:I.lng,type:te,address:Xe,checked:!1},Ne=await WI(Nv(fs,"fire_hydrants"),ot);v([...g,{firestoreId:Ne.id,...ot}]),console.log(` : ${te} (${I.lat}, ${I.lng}) @ ${Xe}`)}catch(ye){console.error(" :",ye)}D(!1),C(null)}},re=(te,ee)=>{le(` ${ee} `),H(()=>()=>ge(te)),Y(!0)},ge=async te=>{try{await HI(ao(fs,"fire_hydrants",te)),v(ee=>ee.filter(ye=>ye.firestoreId!==te)),console.log(` : ID=${te}`)}catch(ee){console.error(" :",ee)}Y(!1)},$=async te=>{try{const ee=ao(fs,"fire_hydrants",te),ye=await BI(ee);if(!ye.exists()){console.error(` Firestore :  ID=${te}`);return}const Be=ye.data(),Xe=Be.checked||!1,ot=g.filter(Ne=>Ne.lat===Be.lat&&Ne.lon===Be.lon);for(const Ne of ot){const Qt=ao(fs,"fire_hydrants",Ne.firestoreId);await $h(Qt,{checked:!Xe})}v(Ne=>Ne.map(Qt=>Qt.lat===Be.lat&&Qt.lon===Be.lon?{...Qt,checked:!Xe}:Qt)),console.log(` : (${Be.lat}, ${Be.lon}) `)}catch(ee){console.error(" Firestore :",ee)}},Ce=()=>{if(!Pe.current){console.log(" mapRef ");return}const te=Pe.current.getBounds();if(!te){console.log(" getBounds()  undefined");return}P(te)};y.useEffect(()=>{if(!b||g.length===0)return;const te=g.filter(ee=>{const ye=new window.google.maps.LatLng(ee.lat,ee.lon);return b.contains(ye)});e(te)},[b,g]);const Ie=async()=>{try{for(const te of E){if(!te.firestoreId)continue;const ee=ao(fs,"fire_hydrants",te.firestoreId);await $h(ee,{checked:!1})}v(te=>te.map(ee=>({...ee,checked:!1}))),S([]),console.log(" ")}catch(te){console.error(" Firestore :",te)}Y(!1)},de=()=>{switch(T){case"":default:return{backgroundColor:"#4CAF50",color:"white"};case"":return{backgroundColor:"#2196F3",color:"white"};case"":return{backgroundColor:"#FF5722",color:"white"}}};return pe?Ae.jsxs("div",{style:{position:"relative"},children:[Ae.jsxs(pw,{mapContainerStyle:ek,center:t,zoom:o,onClick:te=>V(te),onLoad:Le,onBoundsChanged:Ce,children:[Ae.jsx(Qw,{children:te=>r.map(ee=>Ae.jsx(xh,{position:{lat:ee.lat,lng:ee.lon},clusterer:te},ee.firestoreId))}),Ae.jsx(nk,{isOpen:N,message:Z,onConfirm:K,onCancel:()=>Y(!1)}),h&&zv&&Ae.jsx(xh,{position:h,icon:zv}),A&&Ae.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"15px",borderRadius:"8px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.2)",textAlign:"center"},children:[Ae.jsx("h3",{children:""}),Ae.jsx("button",{onClick:()=>G(""),style:{margin:"5px",padding:"10px",backgroundColor:"red",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:""}),Ae.jsx("button",{onClick:()=>G(""),style:{margin:"5px",padding:"10px",backgroundColor:"blue",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:""}),Ae.jsx("button",{onClick:()=>D(!1),style:{marginTop:"10px",padding:"8px",backgroundColor:"gray",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:""})]}),r.map(te=>Ae.jsx(xh,{position:{lat:te.lat,lng:te.lon},draggable:T==="",onDragEnd:ee=>he(te.firestoreId,ee.latLng.lat(),ee.latLng.lng(),te.lat,te.lon),onClick:()=>{T===""?$(te.firestoreId):T===""&&re(te.firestoreId,te.type)},icon:te.checked?{url:"http://maps.google.com/mapfiles/ms/icons/green-dot.png",scaledSize:new window.google.maps.Size(40,40)}:{url:te.type===""?"http://maps.google.com/mapfiles/ms/icons/red-dot.png":"http://maps.google.com/mapfiles/ms/icons/blue-dot.png",scaledSize:new window.google.maps.Size(40,40)}},te.firestoreId))]}),Ae.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",padding:"15px",borderRadius:"10px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.2)",...de(),cursor:"pointer",fontSize:"18px",minWidth:"150px",textAlign:"center"},onClick:()=>j(!M),children:[Ae.jsxs("h3",{style:{margin:0,fontSize:"18px"},children:[": ",T," "]}),M&&Ae.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",padding:"10px"},children:[Ae.jsx("button",{onClick:()=>R(""),style:{padding:"12px",fontSize:"16px",borderRadius:"8px",border:"none",backgroundColor:"#4CAF50",color:"white",cursor:"pointer"},children:""}),Ae.jsx("button",{onClick:()=>R(""),style:{padding:"12px",fontSize:"16px",borderRadius:"8px",border:"none",backgroundColor:"#2196F3",color:"white",cursor:"pointer"},children:""}),Ae.jsx("button",{onClick:()=>R(""),style:{padding:"12px",fontSize:"16px",borderRadius:"8px",border:"none",backgroundColor:"#FF5722",color:"white",cursor:"pointer"},children:""})]})]}),Ae.jsx("button",{onClick:J,style:{position:"absolute",bottom:"20px",right:"20px",padding:"10px 15px",backgroundColor:"#4285F4",color:"white",fontSize:"14px",fontWeight:"bold",border:"none",borderRadius:"5px",cursor:"pointer",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.2)"},children:""}),Ae.jsx("button",{onClick:()=>k(!q),style:{position:"absolute",left:q?"280px":"10px",top:"50%",transform:"translateY(-50%)",width:"40px",height:"100px",padding:"12px",fontSize:"25px",border:"none",borderRadius:"10px",cursor:"pointer",backgroundColor:"gray",color:"white",transition:"left 0.3s ease-in-out"},children:q?"":""}),Ae.jsxs("div",{style:{position:"absolute",left:q?"0px":"-300px",bottom:"10px",width:"260px",backgroundColor:"rgba(255, 255, 255, 0.9)",padding:"10px",borderRadius:"8px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.2)",maxHeight:"250px",overflowY:"auto",minHeight:"600px",transition:"left 0.3s ease-in-out"},children:[Ae.jsx("h3",{style:{fontSize:"16px",textAlign:"center"},children:" "}),E.slice(0,10).map((te,ee)=>Ae.jsx("div",{style:{padding:"5px",borderBottom:"1px solid #ccc",fontSize:"14px"},children:te.address},ee)),Ae.jsx("button",{onClick:T===""?Ie:()=>alert(""),style:{marginTop:"10px",width:"100%",padding:"8px",backgroundColor:"red",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:""})]})]}):Ae.jsx("div",{children:"Loading..."})},ik=()=>Ae.jsxs("div",{children:[Ae.jsx("h1",{children:"Fire Hydrant Map"}),Ae.jsx(rk,{})," "]});nw.createRoot(document.getElementById("root")).render(Ae.jsx(ZE.StrictMode,{children:Ae.jsx(ik,{})}));
